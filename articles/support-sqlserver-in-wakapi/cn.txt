1:"$Sreact.fragment"
3:I[8387,[],""]
4:I[1007,[],""]
6:I[3809,[],"OutletBoundary"]
9:I[751,[],"AsyncMetadataOutlet"]
b:I[3809,[],"ViewportBoundary"]
d:I[3809,[],"MetadataBoundary"]
f:I[1254,[],""]
:HL["/_next/static/css/93e7e61feee30498.css","style"]
:HL["/_next/static/css/0e452e629ebb050b.css","style"]
:HL["/_next/static/css/3ce91b1129a4136b.css","style"]
:HL["/_next/static/css/0f707cd0b07b2440.css","style"]
0:{"P":null,"b":"5HTPObhrOTbJckl3B6KLX","p":"","c":["","articles","support-sqlserver-in-wakapi","cn"],"i":false,"f":[[["",{"children":["articles",{"children":[["params","support-sqlserver-in-wakapi/cn","oc"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/93e7e61feee30498.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],"$L2"]}],{"children":["articles",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["params","support-sqlserver-in-wakapi/cn","oc"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0e452e629ebb050b.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/3ce91b1129a4136b.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/0f707cd0b07b2440.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L6",null,{"children":["$L7","$L8",["$","$L9",null,{"promise":"$@a"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","sW4U3rGZnnfhek25D99rBv",{"children":[["$","$Lb",null,{"children":"$Lc"}],null]}],["$","$Ld",null,{"children":"$Le"}]]}],false]],"m":"$undefined","G":["$f","$undefined"],"s":false,"S":true}
10:"$Sreact.suspense"
11:I[751,[],"AsyncMetadata"]
e:["$","div",null,{"hidden":true,"children":["$","$10",null,{"fallback":null,"children":["$","$L11",null,{"promise":"$@12"}]}]}]
8:null
13:I[3567,["458","static/chunks/3f731c04-273ad2ee657c8337.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","198","static/chunks/198-cc20d3cf253a42cd.js","177","static/chunks/app/layout-eb08bdbed2782421.js"],"RootLayout"]
14:I[9787,["458","static/chunks/3f731c04-273ad2ee657c8337.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","198","static/chunks/198-cc20d3cf253a42cd.js","177","static/chunks/app/layout-eb08bdbed2782421.js"],""]
15:I[9584,["458","static/chunks/3f731c04-273ad2ee657c8337.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","198","static/chunks/198-cc20d3cf253a42cd.js","177","static/chunks/app/layout-eb08bdbed2782421.js"],"Header"]
16:I[8832,["234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","974","static/chunks/app/page-dc5519d316c93e1b.js"],"Localized"]
17:I[6562,["234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","974","static/chunks/app/page-dc5519d316c93e1b.js"],"LocalizedArticleLink"]
18:I[7508,["458","static/chunks/3f731c04-273ad2ee657c8337.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","198","static/chunks/198-cc20d3cf253a42cd.js","177","static/chunks/app/layout-eb08bdbed2782421.js"],"RunningTime"]
19:I[4266,["234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","974","static/chunks/app/page-dc5519d316c93e1b.js"],"LastUpdateTime"]
1c:I[1236,["458","static/chunks/3f731c04-273ad2ee657c8337.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","198","static/chunks/198-cc20d3cf253a42cd.js","177","static/chunks/app/layout-eb08bdbed2782421.js"],"ToTop"]
1a:T518,M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z1b:T5b8,M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z2:["$","$L13",null,{"children":[["$","$L14",null,{"data-host":"https://services.ddadaal.me","data-dnt":"false","src":"https://services.ddadaal.me/monitor/script.js","id":"ZwSg9rf6GA","async":true,"defer":true}],["$","$L15",null,{"resumeLangs":["cn","en"]}],["$","div",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"bg-base-200 text-base-content","children":["$","div",null,{"className":"footer sm:footer-horizontal py-6 max-w-7xl mx-auto px-4","children":[["$","div",null,{"className":"space-y-1","children":[["$","p",null,{"children":["ğŸ‘¨ğŸ¼â€ğŸ’»Â ",["$","$L16",null,{"id":"footer.codeBy","args":[["$","$L17","about/me",{"className":"link link-hover","basePath":"/about/me","children":"ddadaal"}]]}]]}],["$","p",null,{"children":["ğŸ“",["$","$L16",null,{"id":"footer.license","args":[["$","a","license",{"rel":"licene noreferrer","target":"_blank","className":"link","href":"https://creativecommons.org/licenses/by-sa/4.0/","children":"CC BY-SA 4.0"}]]}]]}],["$","$L18",null,{"serverStartTime":"2025-12-31T07:24:45.030+00:00"}],["$","$L19",null,{"time":"2025-12-31T07:24:45.030+00:00"}],["$","div",null,{"children":[["$","p",null,{"children":["ğŸ“²"," ",["$","$L16",null,{"id":"footer.contacts"}]]}],["$","div",null,{"className":"flex py-2 gap-2","children":[["$","span","http://wpa.qq.com/msgrd?v=3&uin=540232834&site=qq&menu=yes",{"children":["$","a",null,{"href":"http://wpa.qq.com/msgrd?v=3&uin=540232834&site=qq&menu=yes","title":"QQ: 540232834","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 448 512","children":["$undefined",[["$","path","0",{"d":"M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","mailto://ddadaal.me@outlook.com",{"children":["$","a",null,{"href":"mailto://ddadaal.me@outlook.com","title":"E-mail: ddadaal@outlook.com","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 576 512","children":["$undefined",[["$","path","0",{"d":"M160 448c-25.6 0-51.2-22.4-64-32-64-44.8-83.2-60.8-96-70.4V480c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V345.6c-12.8 9.6-32 25.6-96 70.4-12.8 9.6-38.4 32-64 32zm128-192H32c-17.67 0-32 14.33-32 32v16c25.6 19.2 22.4 19.2 115.2 86.4 9.6 6.4 28.8 25.6 44.8 25.6s35.2-19.2 44.8-22.4c92.8-67.2 89.6-67.2 115.2-86.4V288c0-17.67-14.33-32-32-32zm256-96H224c-17.67 0-32 14.33-32 32v32h96c33.21 0 60.59 25.42 63.71 57.82l.29-.22V416h192c17.67 0 32-14.33 32-32V192c0-17.67-14.33-32-32-32zm-32 128h-64v-64h64v64zm-352-96c0-35.29 28.71-64 64-64h224V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v192h96v-32z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://www.linkedin.com/in/chenjunda/",{"children":["$","a",null,{"href":"https://www.linkedin.com/in/chenjunda/","title":"LinkedIn: é™ˆä¿Šè¾¾","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 448 512","children":["$undefined",[["$","path","0",{"d":"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://github.com/ddadaal",{"children":["$","a",null,{"href":"https://github.com/ddadaal","title":"GitHub: ddadaal","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 496 512","children":["$undefined",[["$","path","0",{"d":"$1a","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://steamcommunity.com/profiles/76561198104889782",{"children":["$","a",null,{"href":"https://steamcommunity.com/profiles/76561198104889782","title":"Steam: Victor Crubs","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 496 512","children":["$undefined",[["$","path","0",{"d":"M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://zhihu.com/people/VicCrubs",{"children":["$","a",null,{"href":"https://zhihu.com/people/VicCrubs","title":"çŸ¥ä¹ï¼šé™ˆä¿Šè¾¾","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 640 512","children":["$undefined",[["$","path","0",{"d":"$1b","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://www.douban.com/people/183064260/",{"children":["$","a",null,{"href":"https://www.douban.com/people/183064260/","title":"è±†ç“£: ddadaal","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","role":"img","viewBox":"0 0 24 24","children":["$undefined",[["$","path","0",{"d":"M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}]]}]]}],["$","p",null,{"className":"text-center","children":["Â©"," ",2025," ","|"," ",["$","$L16",null,{"id":"footer.madeWithLove"}]]}]]}],["$","div",null,{"children":[["$","span",null,{"className":"footer-title","children":["ğŸš€"," ",["$","$L16",null,{"id":"footer.poweredBy"}]]}],[["$","a","React",{"className":"link link-hover","target":"_blank","href":"https://reactjs.org/","rel":"noreferrer","children":"React"}],["$","a","Next.js",{"className":"link link-hover","target":"_blank","href":"https://nextjs.org/","rel":"noreferrer","children":"Next.js"}],["$","a","GitHub Pages",{"className":"link link-hover","target":"_blank","href":"https://pages.github.com/","rel":"noreferrer","children":"GitHub Pages"}],["$","a","TypeScript",{"className":"link link-hover","target":"_blank","href":"https://www.typescriptlang.org/","rel":"noreferrer","children":"TypeScript"}]]]}],["$","div",null,{"children":[["$","span",null,{"className":"footer-title","children":["ğŸ¨"," ",["$","$L16",null,{"id":"footer.themedWith"}]]}],[["$","a","daisyui",{"className":"link link-hover","target":"_blank","href":"https://daisyui.com/","rel":"noreferrer","children":"daisyui"}],["$","a","tailwind",{"className":"link link-hover","target":"_blank","href":"https://tailwindcss.com/","rel":"noreferrer","children":"tailwind"}]]]}],["$","div",null,{"children":[["$","span",null,{"className":"footer-title","children":["ğŸ“"," ",["$","$L16",null,{"id":"footer.contacts"}]]}],[["$","a","idealclover - ç¿ ç¿ é…±çš„ä¸ªäººç½‘ç«™",{"className":"link link-hover","target":"_blank","href":"https://idealclover.top","rel":"noreferrer","children":"idealclover - ç¿ ç¿ é…±çš„ä¸ªäººç½‘ç«™"}],["$","a","Sephidator - Sephidatorçš„ä¸ªäººåšå®¢",{"className":"link link-hover","target":"_blank","href":"https://sephidator.xyz","rel":"noreferrer","children":"Sephidator - Sephidatorçš„ä¸ªäººåšå®¢"}],["$","a","iznauy - ä¸ªäººåšå®¢",{"className":"link link-hover","target":"_blank","href":"https://iznauy.github.io/","rel":"noreferrer","children":"iznauy - ä¸ªäººåšå®¢"}],["$","a","Aironoria - é™ˆä¿Šå®‡çš„ä¸ªäººåšå®¢",{"className":"link link-hover","target":"_blank","href":"https://aironoria.github.io","rel":"noreferrer","children":"Aironoria - é™ˆä¿Šå®‡çš„ä¸ªäººåšå®¢"}],["$","a","forewing - ä¸ªäººä¸»é¡µ",{"className":"link link-hover","target":"_blank","href":"https://jbesu.com/","rel":"noreferrer","children":"forewing - ä¸ªäººä¸»é¡µ"}],["$","a","Weiser - ä¸ªäººä¸»é¡µ",{"className":"link link-hover","target":"_blank","href":"https://weiser.fun","rel":"noreferrer","children":"Weiser - ä¸ªäººä¸»é¡µ"}]]]}]]}]}],["$","$L1c",null,{}]]}]
1d:I[1657,["458","static/chunks/3f731c04-273ad2ee657c8337.js","452","static/chunks/c99dd624-c70eb7fd833cb238.js","478","static/chunks/b767c4c5-8c8b588264c8b54b.js","786","static/chunks/1b3e99d6-bd6014aeea18f102.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","798","static/chunks/798-4c46c2b09214eda1.js","63","static/chunks/63-e828322be2bebc54.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-b83f93f581d95258.js"],"ArticleFrontmatter"]
20:I[807,["458","static/chunks/3f731c04-273ad2ee657c8337.js","452","static/chunks/c99dd624-c70eb7fd833cb238.js","478","static/chunks/b767c4c5-8c8b588264c8b54b.js","786","static/chunks/1b3e99d6-bd6014aeea18f102.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","798","static/chunks/798-4c46c2b09214eda1.js","63","static/chunks/63-e828322be2bebc54.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-b83f93f581d95258.js"],"RelatedArticles"]
21:I[5438,["458","static/chunks/3f731c04-273ad2ee657c8337.js","452","static/chunks/c99dd624-c70eb7fd833cb238.js","478","static/chunks/b767c4c5-8c8b588264c8b54b.js","786","static/chunks/1b3e99d6-bd6014aeea18f102.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","798","static/chunks/798-4c46c2b09214eda1.js","63","static/chunks/63-e828322be2bebc54.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-b83f93f581d95258.js"],"CommentPanelWithCurrentLanguage"]
1e:T7bca,
# ä¸å°±æ˜¯è°ƒåº“å˜›â€¦â€¦

åœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ](/articles/added-blog-page-click-monitoring)ä¸­ï¼Œæˆ‘ç»™åšå®¢å¢åŠ äº†ç‚¹å‡»é‡ç›‘æµ‹ï¼Œå¹¶å°†è¿™ä¸ªæœåŠ¡éƒ¨ç½²åˆ°äº†Azureï¼Œæ•°æ®åº“é‡‡ç”¨äº†ä½¿ç”¨SQL Serverçš„Azureçš„SQLæœåŠ¡ã€‚ç”±äºSQL Serveræœ‰å…è´¹çš„è®¢é˜…ï¼Œå¾®è½¯çš„Azure Data Studioä¹Ÿè¿˜ç®—å¥½ç”¨ï¼Œäºæ˜¯æˆ‘è§‰å¾—å¯ä»¥é‡ç”¨ä¸€ä¸‹åˆšæ‰å­¦ä¹ çš„è¿™ä¸ªæŠ€èƒ½ï¼Œå°†å…¶ä»–çš„æœåŠ¡ä¹Ÿä½¿ç”¨SQL Serveréƒ¨ç½²ã€‚

æˆ‘ä¹‹å‰åœ¨ç”¨[wakatime](https://wakatime.com/)æ¥è®°å½•æˆ‘çš„ç¼–ç¨‹çš„æ•°æ®ï¼ˆä¾‹å¦‚æ¯å¤©çš„ç¼–ç¨‹æ—¶é—´ã€æ‰€ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ç­‰ï¼‰ï¼Œä½†æ˜¯wakatimeå…è´¹ç”¨æˆ·åªèƒ½ä¿å­˜14å¤©çš„æ•°æ®ï¼Œè€Œä¸”wakatimeæ²¡æœ‰æä¾›å®˜æ–¹çš„å¯è‡ªå·±éƒ¨ç½²çš„åç«¯ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸€ç›´åœ¨å¯»æ‰¾wakatimeçš„æ›¿ä»£å“ã€‚ä¹‹å‰å°è¯•ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´çš„[codetime](https://codetime.dev/)ã€‚è¿™ä¸ªè½¯ä»¶çš„åŠŸèƒ½å’Œwakatimeç±»ä¼¼ï¼Œä½†æ˜¯å®ƒå½“å‰åªæ”¯æŒVSCodeå®¢æˆ·ç«¯ï¼Œè™½ç„¶å…è´¹ä¿å­˜æ•°æ®ï¼Œä½†æ˜¯ä»ç„¶æ²¡æœ‰æä¾›å¯è‡ªå·±éƒ¨ç½²çš„åç«¯ã€‚æˆ‘åœ¨å¾ˆæ—©ä¹‹å‰ä¹Ÿå°è¯•æ‰¾è¿‡wakatimeçš„åç«¯æ›¿ä»£å“ï¼Œä½†æ˜¯å½“æ—¶å¹¶æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªèƒ½ç”¨çš„ã€‚ä½†å‰ä¸ä¹…ï¼ŒåŒå­¦ç»™æˆ‘æ¨èäº†[wakapi](https://www.wakapi.com/)é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®é‡æ–°å®ç°äº†wakatimeçš„åç«¯APIï¼Œè¿™æ ·wakatimeçš„ä¸°å¯Œçš„å®¢æˆ·ç«¯æ’ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”å®Œå…¨å¯ä»¥è‡ªå·±éƒ¨ç½²ï¼Œä¸ç”¨æ‹…å¿ƒæ•°æ®å¹¶å­˜æ”¾åœ¨åˆ«äººçš„æœåŠ¡å™¨ä¸Šã€‚

å®ƒå°±æ˜¯æˆ‘ä¸€ç›´å¯»æ‰¾çš„wakatimeæ›¿ä»£å“ï¼

å¾ˆæ¿€åŠ¨åœ°æµè§ˆäº†ä¸€ä¸‹é¡¹ç›®ï¼Œçœ‹åˆ°wakapiå½“æ—¶å¹¶æ²¡æœ‰åŸç”Ÿæ”¯æŒSQL Serverï¼Œä½†æ˜¯åœ¨READMEä¸­æåˆ°ï¼Œwakatimeä½¿ç”¨äº†[gorm](https://gorm.io)ä½œä¸ºæ•°æ®åº“è®¿é—®æ¡†æ¶ï¼Œè€Œgormæœ¬èº«æ˜¯[æ”¯æŒSQL Server](https://github.com/go-gorm/sqlserver)çš„ã€‚

æˆ‘æƒ³ï¼Œæ—¢ç„¶åº“éƒ½æ”¯æŒäº†ï¼ŒSQL Serveræ”¯æŒæœ‰ä»€ä¹ˆéš¾çš„ï¼Ÿå¼•å…¥`gorm.io/sqlserver`åŒ…ï¼Œå¼•å…¥åˆ›å»ºä¸€ä¸ª`Dialector`ï¼Œç”¨gormçš„APIç¼–å†™çš„ç»å¤§å¤šæ•°æ•°æ®åº“æ“ä½œå°±å®Œæˆäº†ã€‚

```go
sqlserver.Open(mssqlConnectionString(c))
```

è¿™æœ‰ä»€ä¹ˆéš¾çš„ï¼Œå¼€è·‘ï¼ç»“æœé‡åˆ°äº†ä¸€å¤§å †æŠ¥é”™ã€‚

# é‡åˆ°å¹¶è§£å†³ä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªçš„é—®é¢˜

## SQLè¯­å¥

ä»”ç»†ä¸€çœ‹ï¼Œè¿™äº›æŠ¥é”™ä¸»è¦æ˜¯æ¥è‡ªäºæ•°æ®åº“migrationä¸­çš„åŸç”ŸSQLè¯­å¥å’Œç‰‡æ®µã€‚

ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œä¼šè¿è¡Œæ•°æ®åº“migrationè„šæœ¬ã€‚éšç€è½¯ä»¶å¼€å‘æ›´å¤šçš„æ–°åŠŸèƒ½ï¼Œå…¶ä½¿ç”¨çš„æ•°æ®åº“çš„ç»“æ„æ€»ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œmigrationæ˜¯æŒ‡ä¸€äº›ä»£ç ï¼Œè¿™äº›ä»£ç çš„ä½œç”¨æ˜¯ä¿®æ”¹æ•°æ®åº“schemaã€è®©schemaæ»¡è¶³å½“å‰ç‰ˆæœ¬çš„è¦æ±‚ã€‚å½“è½¯ä»¶åŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼Œå¯¹æ•°æ®åº“çš„å˜åŒ–ä¹Ÿå°±è¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥åœ¨ä¸€ä¸ªæˆç†Ÿçš„è½¯ä»¶ä¸­ï¼Œä½ å¸¸å¸¸ä¼šçœ‹åˆ°æœ‰å¾ˆå¤šçš„æ•°æ®åº“migrationçš„ä»£ç ã€‚åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œè¿™äº›migrationå°†ä¼šè¢«ä¸€ä¸ªä¸€ä¸ªåœ°æ‰§è¡Œï¼Œä½¿å¾—ç¨‹åºæ­£å¼å¼€å§‹æ—¶ï¼Œæ•°æ®åº“çš„schemaä¹Ÿæ›´æ–°åˆ°æœ€æ–°ã€‚

```bash
> tree migrations
migrations
â”œâ”€â”€ 20201103_rename_language_mappings_table.go
â”œâ”€â”€ 20201106_migration_cascade_constraints.go
â”œâ”€â”€ 20210202_fix_cascade_for_alias_user_constraint.go
â”œâ”€â”€ 20210206_drop_badges_column_add_sharing_flags.go
â”œâ”€â”€ 20210213_add_has_data_field.go
â”œâ”€â”€ 20210221_add_created_date_column.go
â”œâ”€â”€ 20210411_add_imprint_content.go
â”œâ”€â”€ 20210411_drop_migrations_table.go
â”œâ”€â”€ 20210806_remove_persisted_project_labels.go

```

è€Œæœ‰çš„migrationï¼ˆå°¤å…¶æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„migrationï¼‰å¾ˆå¯èƒ½åŒ…å«äº†ä¸€äº›åŸç”ŸSQLã€‚åŒæ—¶ï¼Œç”±äºORMæ˜¯å¯¹æ•°æ®åº“æ“ä½œçš„æŠ½è±¡ï¼Œè€Œå†å¼ºå¤§çš„æŠ½è±¡ä¹Ÿä¸å¦‚åŸç”Ÿçš„SQLæ¥å¾—å¼ºå¤§å’Œæ–¹ä¾¿ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™ï¼Œå¼€å‘è€…ä»ç„¶ä¼šé€‰æ‹©åœ¨ä¸€äº›åœ°æ–¹ä½¿ç”¨åŸç”ŸSQLè¯­å¥çš„ç‰‡æ®µæˆ–è€…è¯­å¥æ¥å®ç°ä¸€äº›åŠŸèƒ½ã€‚è™½ç„¶SQLæœ¬èº«æ˜¯æœ‰æ ‡å‡†çš„ï¼Œä½†æ˜¯å„ä¸ªæ•°æ®åº“å‚å•†å®é™…ä¸Šè‡ªå·±å®ç°äº†å¾ˆå¤šæ–°åŠŸèƒ½ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬æœ¬ä»¥ä¸ºç†æ‰€å½“ç„¶çš„åŠŸèƒ½ï¼Œå®é™…ä¸Šå¹¶ä¸åœ¨æ ‡å‡†ä¸­ï¼Œè€Œæ˜¯æ•°æ®åº“å‚å•†è‡ªå·±å®ç°çš„ï¼Œä¸€æ—¦æ‰‹å†™SQLè€Œæ²¡æœ‰æ„è¯†åˆ°æœ‰çš„SQLå®é™…ä¸Šåªåœ¨éƒ¨åˆ†æ•°æ®åº“ä¸­å…¼å®¹ï¼Œå°±å¯èƒ½ä¼šåœ¨ä¸å…¼å®¹çš„æ•°æ®åº“ä¸­é‡åˆ°é—®é¢˜ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œwakapiçš„æŸä¸ªç‰ˆæœ¬éœ€è¦åœ¨æ•°æ®åº“çš„`users`è¡¨ä¸­æ–°å¢ä¸€ä¸ª`has_data`åˆ—ï¼Œè€Œå¯¹äºå·²ç»å­˜åœ¨çš„`users`è¡¨ä¸­çš„æ•°æ®ï¼Œè¿™ä¸ªåˆ—éœ€è¦è¢«è®¾ç½®ä¸º`TRUE`ã€‚ä»£ç ä¸­ç”¨äºæ‰§è¡Œæ­¤æ¬¡migrationçš„ä»£ç ä½¿ç”¨å¦‚ä¸‹SQLè¯­å¥å®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼š

```sql
UPDATE users SET has_data = TRUE WHERE TRUE;
```

çœ‹ä¸Šå»æ˜¯ä¸ªå¾ˆç®€å•çš„äººç•œæ— å®³çš„SQLè¯­å¥ï¼Œå¯¹å§ï¼Ÿä½†æ˜¯è¿™ä¸ªSQLè¯­å¥åœ¨mssqlä¸­ä¸­æ˜¯éæ³•çš„ï¼Œå› ä¸ºmssqlä¸­å¹¶æ²¡æœ‰`TRUE`, `FALSE`å¸¸é‡ï¼sqlserverä¸­æ²¡æœ‰`boolean`ç±»å‹ï¼Œæ‰€æœ‰è¿™äº›ç±»å‹éƒ½æ˜¯ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚çš„`tinyint`æ¥è¡¨ç¤ºçš„ï¼Œè€Œ`TRUE`å’Œ`FALSE`å°±å¯¹åº”ä½¿ç”¨`1`å’Œ`0`æ¥è¡¨ç¤ºã€‚ä½†æ˜¯ï¼Œ`1`å’Œ`0`åœ¨sql serverä¸­å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„`boolean`è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒä»¬å¹¶ä¸èƒ½ç›´æ¥ç”¨åœ¨`WHERE`ä¸­ã€‚æ‰€ä»¥ï¼Œåœ¨MSSQLä¸­ï¼Œä»¥ä¸ŠSQLè¯­å¥å°±å¿…é¡»é‡æ–°æˆä»¥ä¸‹çš„æ ·å­ï¼š

```sql
UPDATE users SET has_data = 1;
```

## SQLè¯­å¥ç‰‡æ®µ

å¦ä¸€ä¸ªæƒ…å†µæ˜¯**SQLè¯­å¥ç‰‡æ®µ**ã€‚è™½ç„¶ORMçš„ä¸€å¤§ä½œç”¨å°±æ˜¯å°†è½¯ä»¶ä»£ç æ˜ å°„ä¸ºSQLè¯­å¥ï¼Œå‡å°‘æˆ‘ä»¬æ‰‹å†™SQLå¯èƒ½å¸¦æ¥çš„é”™è¯¯ï¼Œä½†æ˜¯ä¸ºäº†å®ç°çš„çµæ´»æ€§ï¼ŒORMå¸¸å¸¸åŒæ ·ä¹Ÿå…è®¸åœ¨è‡ªå·±çš„APIä¸­ç¼–å†™ä¸€äº›SQLçš„ç‰‡æ®µï¼Œè€ŒORMä¼šå°è¯•å°†è¿™äº›SQLç‰‡æ®µåµŒå…¥è¿›å»ã€‚ä½†æ˜¯è¿™äº›SQLç‰‡æ®µå¯èƒ½ä¹Ÿä¼šæœ‰ä¸å…¼å®¹çš„æƒ…å†µï¼ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç 

```go
result := db.Table("summaries AS s1").
			Where("s1.id IN ?", faultyIds).
			Update("num_heartbeats", "3")
```

ä¸Šè¿°gormæ•°æ®åº“ä»“åº“å°†ä¼šè¢«æ˜ å°„ä¸ºç±»å‹ä»¥ä¸‹çš„SQLè¯­å¥ã€‚æ³¨æ„`Table`å’Œ`Where`æ–¹æ³•çš„å‚æ•°ä¸ä¸‹åˆ—SQLè¯­å¥ä¸­å¯¹åº”çš„è¯­å¥çš„å¯¹åº”å…³ç³»ã€‚

```sql
update summaries AS s1 set num_heartbeats = 3 where s1.id IN ?
```

æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆç®€å•ï¼Ÿä½†æ˜¯MSSQLä»ç„¶ä¸æ”¯æŒï¼MSSQLä¸æ”¯æŒåœ¨`update`æŒè¯­å¥ä¸­ç»™è¡¨æ–°å¢ä¸€ä¸ªåˆ«åï¼Œæ‰€ä»¥ä»¥ä¸ŠSQLè¯­å¥ä¸­çš„`AS s1`å¿…é¡»è¢«å»æ‰ã€‚

## é‡ç”¨Dialectorçš„é€»è¾‘ï¼Œä¸ºå…³é”®è¯åŠ ä¸Šå¼•å·

å†çœ‹ä¸€ä¸ªSQLè¯­å¥ç‰‡æ®µï¼š

```go
r.db.Model(&models.User{}).Select("users.id as user, max(time) as time").
```

è¿™æ®µSQLè¯­å¥ä¸€èˆ¬ä¼šè¢«æ˜ å°„ä¸ºï¼š

```sql
select users.id as user, max(time) as time from users;
```

æœ‰é—®é¢˜å—ï¼Ÿæœ‰ï¼`user`åœ¨MSSQLä¸­æ˜¯å…³é”®è¯ï¼Œè¦ä½œä¸ºæ ‡è¯†ç¬¦ä½¿ç”¨å¿…é¡»ä½¿ç”¨`""`æˆ–è€…`[]`å°†å®ƒåŒ…è£¹èµ·æ¥ï¼è€Œ`user`åœ¨mysqlç­‰æ•°æ®åº“å¼•æ“ä¸­éƒ½ä¸æ˜¯å…³é”®è¯ï¼Œå› æ­¤å¯ä»¥éšæ„ç›´æ¥ä½¿ç”¨ã€‚

è¿™ä¸ªå°†å…³é”®è¯ä½œä¸ºå­—ç¬¦ä¸²ä½¿ç”¨çš„è¿‡ç¨‹å®é™…ä¸Šç¼–ç¨‹ä¸­å¾ˆå¸¸è§ï¼Œè¢«ç§°ä¸º`escape`ï¼Œæˆ–è€…æ›´ç®€å•çš„å«`quote`ï¼ŒåŠ å¼•å·ã€‚ä½†æ˜¯æ›´å‘çš„æ˜¯ï¼Œä¸åŒçš„SQLå¼•æ“æ‰€ä½¿ç”¨çš„åŠ å¼•å·çš„æ–¹æ³•ä¸ä¸€æ ·ã€‚MSSQLä½¿ç”¨çš„æ˜¯`""`æˆ–è€…`[]`ï¼Œä½†æ˜¯mysqlä½¿ç”¨çš„æ˜¯`ã€‚å¦‚ä½•é€šè¿‡ä¸€æ®µä»£ç æ¥ä¸ºä¸åŒçš„æ•°æ®åº“åŠ ä¸Šæ­£ç¡®çš„å¼•å·å‘¢ï¼Ÿ

å…¶å®ï¼Œè¿™ä¸ªåŠ å¼•å·çš„è¿‡ç¨‹å®åœ¨æ˜¯éå¸¸å¸¸è§ï¼Œåªè¦ORMéœ€è¦å°†ç¨‹åºå‘˜æ‰€å†™çš„åå­—ï¼ˆè¡¨åã€åˆ—åç­‰ï¼‰æ˜ å°„åˆ°SQLï¼Œé‚£ä¹ˆå°±éœ€è¦è€ƒè™‘ç»™è¿™äº›åå­—å«ä¸Šå¼•å·ï¼Œé˜²æ­¢è¿™äº›åå­—å’ŒSQLè‡ªå·±çš„å…³é”®è¯å†²çªã€‚å¦‚æœä½ å†™ä¸€ä¸ªåå­—å«`select`çš„è¡¨ï¼Œæ²¡æœ‰è¿™æ®µé€»è¾‘ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨å°±æ²¡æ³•é€šè¿‡ORMæ¥æ˜ å°„æˆSQLäº†ï¼

å› æ­¤ï¼Œæ ¹æ®Don't Repeat YourselfåŸåˆ™ï¼ŒORMä¸ºæ•°æ®åº“ç³»ç»Ÿçš„é€‚é…å™¨ä¸­è‚¯å®šä¼šæœ‰å¯¹åº”çš„é€»è¾‘ã€‚è€Œæˆ‘ä»¬ä¸å…¶è‡ªå·±ç¼–å†™è¿™ä¸ªå¤„ç†é€»è¾‘ï¼Œæœ€å¥½çš„æ–¹æ³•å½“ç„¶æ˜¯è°ƒç”¨é€‚é…å™¨ä¸­å·²ç»å†™å¥½çš„é€»è¾‘äº†ã€‚

gormä½¿ç”¨`Dialector`æ¥å£ä½œä¸ºORMæ”¯æŒä¸åŒæ•°æ®åº“ç³»ç»Ÿçš„é€‚é…å™¨çš„æ¥å£ï¼Œæ‰€æœ‰gormæ”¯æŒçš„æ•°æ®åº“éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å®ç°äº†`Dialector`æ¥å£çš„`Dialector`ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯å»çœ‹çœ‹gormçš„`Dialector`é‡Œå®šä¹‰äº†å“ªäº›æ¥å£ã€‚

```go {9}
// https://github.com/go-gorm/gorm/blob/0123dd45094295fade41e13550cd305eb5e3a848/interfaces.go#L12C1-L21C2
type Dialector interface {
	Name() string
	Initialize(*DB) error
	Migrator(db *DB) Migrator
	DataTypeOf(*schema.Field) string
	DefaultValueOf(*schema.Field) clause.Expression
	BindVarTo(writer clause.Writer, stmt *Statement, v interface{})
	QuoteTo(clause.Writer, string)
	Explain(sql string, vars ...interface{}) string
}
```

ä»åå­—åˆ¤æ–­ï¼Œè¿™ä¸ª`QuoteTo`æ–¹æ³•ä¼¼ä¹å°±æ˜¯æˆ‘ä»¬è¦çš„æ¥å£ã€‚å†éšä¾¿ç‚¹å¼€ä¸€ä¸ªdialectorå®ç°çš„ä»£ç æµè§ˆä¸€ä¸‹ï¼Œå°±èƒ½ç¡®å®šï¼Œ`QuoteTo`å°±æ˜¯åŠ å¼•å·çš„æ–¹æ³•ã€‚

å¯æ˜¯è¿™ä¸ªæ–¹æ³•çœ‹ä¸Šå»å’Œæˆ‘ä»¬æƒ³è±¡ä¸­çš„ä¸å¤ªä¸€æ ·ï¼šæˆ‘ä»¬é¢„æœŸè¿™ä¸ªåŠŸèƒ½æ˜¯ä¸€ä¸ª`(string) => string`çš„å‡½æ•°ï¼Œè¿™é‡Œæ€ä¹ˆæ˜¯ä¸€ä¸ª`(clause.Writer, string) => void`çš„å‡½æ•°ï¼Œè¿™ä¸ª`clause.Writer`æ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ

ç”±äºæ‹¼æ¥SQLè¯´åˆ°åº•ï¼Œå°±æ˜¯è¦ç”Ÿæˆå„ä¸ªSQLçš„ç‰‡æ®µï¼Œç„¶åå°†è¿™äº›ç‰‡æ®µçš„å­—ç¬¦ä¸²æ‹¼æ¥èµ·æ¥ã€‚åœ¨ç»å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€é‡Œï¼Œ`string`éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥æ‹¼æ¥å­—ç¬¦ä¸²å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åæŠŠä¸¤ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹å¤åˆ¶è¿›å»ã€‚è¿™ä¸ªè¿‡ç¨‹å¦‚æœè¿›è¡Œå¤ªå¤šæ¬¡ï¼Œå°±éå¸¸æµªè´¹æ—¶é—´å’Œå†…å­˜ã€‚æ‰€ä»¥ç¼–ç¨‹è¯­è¨€å¸¸å¸¸ä¼šæä¾›ä¸€ä¸ª**ç»„è£…å­—ç¬¦ä¸²çš„å·¥å…·ç±»**ã€‚è¿™ä¸ªå·¥å…·ç±»å¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ª**å¯å˜**çš„å­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨è¿™ä¸ª_å­—ç¬¦ä¸²_çš„åé¢å¢åŠ æ–°çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡æ“ä½œéƒ½åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚è€Œè¿™ä¸ª`Writer`æ¥å£ï¼Œå°±æ˜¯gormå®šä¹‰çš„ä¸€ä¸ªè¿™æ ·çš„èƒ½å¤Ÿ**ç»„è£…å­—ç¬¦ä¸²çš„å·¥å…·ç±»**æ‰€éœ€è¦å®ç°çš„æ¥å£ã€‚è¿™ä¸ª`Writer`æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š

```go
// https://github.com/go-gorm/gorm/blob/0123dd45094295fade41e13550cd305eb5e3a848/clause/clause.go#L13
type Writer interface {
	WriteByte(byte) error
	WriteString(string) (int, error)
}
```

å¾ˆç®€å•ï¼Œå¾ˆç›´ç™½ï¼š`WriteByte`ï¼šåœ¨åé¢å¢åŠ ä¸€ä¸ªå­—ç¬¦ï¼›`WriteString`ï¼Œåœ¨åé¢å¢åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

ç†Ÿæ‚‰Goçš„åŒå­¦å¯èƒ½ä¼šè¯´äº†ï¼šå•Šï¼Œè¿™ä¸ªæ¥å£çœ‹ä¸Šå»éå¸¸ç†Ÿæ‚‰ï¼ŒåŸç”Ÿçš„`strings.Builder`å°±æ˜¯ç”¨æ¥åšè¿™ä¸ªäº‹æƒ…çš„ï¼Œè€Œä¸”ä¹Ÿæœ‰è¿™ä¸¤ä¸ªæ–¹æ³•ï¼æ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ª`strings.Builder`æ¥ä½œä¸ºè¿™ä¸ª`clause.Writer`ï¼Ÿ

æ­£ç¡®ï¼æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ª`*strings.Builder`æ¥ä½œä¸º`clause.Writer`ï¼ˆç”¨æŒ‡é’ˆçš„åŸå› æ˜¯è¿™ä¸ª`strings.Builder`çš„è¿™ä¸¤ä¸ªæˆå‘˜æ–¹æ³•æ˜¯ä½¿ç”¨çš„æŒ‡é’ˆæ¥æ”¶è€…è€Œä¸æ˜¯å€¼æ¥æ”¶è€…ï¼Œæ‰€ä»¥åªæœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹æ‰ç®—å®ç°äº†è¿™ä¸ªæ¥å£ã€‚å…·ä½“å…³äºæŒ‡é’ˆæ¥æ”¶è€…å’Œå€¼æ¥æ”¶è€…çš„åŒºåˆ«æˆ‘ä»¬å°±ä¸åœ¨è¿™é‡Œä»‹ç»äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å­¦ä¹ ä¸€ä¸‹Goè¯­è¨€ï¼‰ï¼Œå¹¶åœ¨è°ƒç”¨åè·å–è¿™ä¸ª`builder`æœ€ç»ˆçš„å­—ç¬¦ä¸²ï¼Œè¿™æ ·å°±ç›´æ¥è°ƒç”¨äº†`dialector`ä¸­å®ç°äº†åŠ å¼•å·é€»è¾‘ã€‚

```go
func QuoteDbIdentifier(db *gorm.DB, identifier string) string {
	builder := &strings.Builder{}
	db.Dialector.QuoteTo(builder, identifier)
	return builder.String()
}
```

ç„¶åï¼Œæˆ‘ä»¬å°†æ­¤å‡½æ•°ç”¨åœ¨æ‰€æœ‰éœ€è¦åœ¨SQLç‰‡æ®µä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„åå­—çš„åœ°æ–¹ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±é‡ç”¨äº†dialectorçš„é€»è¾‘ï¼Œç”¨åŒä¸€å¥—ä»£ç å…¼å®¹äº†æ‰€æœ‰çš„æ•°æ®åº“ã€‚

```go {2}
r.db.Model(&models.User{}).Select(
  fmt.Sprintf("users.id as %s, max(time) as time"), utils.QuoteDbIndentifier(r.db, "user")
)
```

## é‡å†™ä¸æ”¯æŒçš„åŠŸèƒ½

è€Œåœ¨è¿›ä¸€æ­¥æŸ¥æ‰¾å¹¶ä¿®æ”¹åŸç”ŸSQLçš„è¯­å¥ä¸­ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€æ®µå¦‚ä¸‹çš„åŸç”ŸSQLè¯­å¥ï¼Œç›´æ¥è®©æˆ‘çœ¼å‰ä¸€é»‘ã€‚

```sql
with projects as (
			select project, user_id, min(time) as first, max(time) as last, count(*) as cnt
			from heartbeats
			where user_id = ? and project != ''
			and time between ? and ?
			and language is not null and language != '' and project != ''
			group by project, user_id
			order by last desc
			limit ? offset ? )
select distinct project, min(first) as first, min(last) as last, min(cnt) as count, first_value(language) over (partition by project order by count(*) desc) as top_language
			from heartbeats
			inner join projects using (project, user_id)
			group by project, language
			order by last desc
```

è¿™æ®µSQLè¯­å¥å°±è¿™æ ·èµ¤è£¸è£¸åœ°å†™åœ¨ä»£ç é‡Œã€‚ç»è¿‡ä»¥ä¸Šå‡ ä¸ªä¾‹å­ï¼Œæ˜¯ä¸æ˜¯ä»¥ä¸ºè¿™ä¸ªSQLåœ¨MSSQLä¸­å¿…å®šé—®é¢˜å·¨å¤§ï¼Œä¸é‡æ–°å†™ä¸€ä»½æ ¹æœ¬è·‘ä¸èµ·æ¥ï¼Ÿ

æˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ã€‚è€Œæˆ‘è‡ªå·±å¯¹SQL Serverå¹¶æ²¡æœ‰é‚£ä¹ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥èªæ˜çš„æˆ‘ï¼Œåœ¨ç»™ä¸€äº›åå­—å«ä¸Šå¼•å·åï¼Œç›´æ¥æŠŠè¿™æ®µä»£ç æ‰”ç»™äº†GitHub Copilotï¼Œè®©å®ƒå¸®æˆ‘æ”¹æˆSQL Serverèƒ½ç”¨çš„ã€‚åç›´è§‰çš„æ˜¯ï¼Œè¿™æ®µä»£ç å®é™…ä¸Šé—®é¢˜æ²¡é‚£ä¹ˆå¤§ï¼š

![copilotçš„ç»“æœ](./copilot.png)

å…·ä½“æ¥è¯´ï¼Œé™¤äº†ç¬¬ä¸‰ç‚¹å»æ‰äº†ä¸éœ€è¦çš„å¼•å·åï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š

1. ä¸æ”¯æŒ`join using`ï¼Œéœ€è¦ä½¿ç”¨å¸¸è§„çš„`join on`ä»£æ›¿
2. ä¸æ”¯æŒ`limit offset`ã€‚æŸ¥æ‰¾äº†ä¸€ä¸‹ï¼Œmssqlå¯ä»¥ä½¿ç”¨`offset ? ROWS fetch next ? rows only`æ¥ä»£æ›¿ï¼Œå½“ç„¶`limit`å’Œ`offset`çš„å‚æ•°é¡ºåºæ˜¯åè¿‡æ¥çš„

å•Šï¼ŒåŸæ¥è¿™ä¹ˆç®€å•ï¼ç”±äºéœ€è¦ä¿®æ”¹çš„åœ°æ–¹å¹¶ä¸å¤šï¼Œäºæ˜¯æˆ‘å°±ç®€å•çš„é€šè¿‡ifåˆ¤æ–­ï¼Œå°†å…¶ä¸­SQL Serverä¸å…¼å®¹çš„éƒ¨åˆ†ä¿®æ”¹ä¸ºSQL Serverå…¼å®¹çš„SQLè¯­å¥ï¼Œè¿™æ®µSQLè¯­å¥ä¹Ÿå°±å®Œæˆäº†ã€‚

## æŠŠåŒä¸€ä¸ªgoç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—ç±»å‹

ä¿®æ”¹äº†è¿™äº›SQLè¯­å¥åï¼Œç¨‹åºä»ç„¶è¿è¡Œä¸èµ·æ¥ï¼Œä»”ç»†ä¸€çœ‹ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š

```
mssql: A table can only have one timestamp. Because table 'users' already has one, the column 'last_logged_in_at' cannot be added.
```

ç®€å•ç¿»è¯‘ï¼Œä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªç±»å‹ä¸º`timestamp`çš„åˆ—ï¼Œè€Œ`users`ä¸­æœ‰å¤šä¸ªåˆ—éƒ½æ˜¯`timestamp`çš„ç±»å‹ï¼Œæ‰€ä»¥SQL ServeræŠ¥é”™äº†ã€‚

å»ä»£ç ä¸­ä¸€çœ‹ï¼Œ`users`è¡¨å¯¹åº”çš„`User`structç¡®å®æœ‰å¥½å‡ ä¸ªå­—æ®µéƒ½é€šè¿‡[gormçš„field tagåŠŸèƒ½](https://gorm.io/docs/models.html#Fields-Tags)`type:timestamp`ï¼Œç¡®å®šäº†åœ¨æ•°æ®åº“ä¸­è¿™äº›åˆ—éœ€è¦æ˜ å°„ä¸º`timestamp`ç±»å‹ã€‚

```go /timestamp/
// https://github.com/muety/wakapi/blob/fc483cc35cb06313da8231424d1d85b291655881/models/user.go#L17
type User struct {
  // ...
  CreatedAt           CustomTime  `gorm:"type:timestamp; default:CURRENT_TIMESTAMP" swaggertype:"string" format:"date" example:"2006-01-02 15:04:05.000"`
	LastLoggedInAt      CustomTime  `gorm:"type:timestamp; default:CURRENT_TIMESTAMP" swaggertype:"string" format:"date" example:"2006-01-02 15:04:05.000"`
  // ...
  SubscribedUntil     *CustomTime `json:"-" gorm:"type:timestamp" swaggertype:"string" format:"date" example:"2006-01-02 15:04:05.000"`
	SubscriptionRenewal *CustomTime `json:"-" gorm:"type:timestamp" swaggertype:"string" format:"date" example:"2006-01-02 15:04:05.000"`
}
```

`timestamp`æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼ŸMySQLä¸éƒ½æ˜¯ä½¿ç”¨`timestamp`æ¥ä»£è¡¨æ—¶é—´ç±»å‹å—ï¼Ÿå»æŸ¥æ‰¾`sql server timestamp`ï¼Œæˆ‘æ‰å‘ç°ï¼ŒSQL Serveré‡Œçš„`timestamp`çš„å«ä¹‰å’Œåˆ«çš„æ•°æ®åº“ä¸­çš„å«ä¹‰ä¸ä¸€æ ·ã€‚åœ¨åˆ«çš„æ•°æ®åº“ä¸­ï¼Œ`timestamp`å°±æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ—¶é—´æˆ³/æ—¶é—´ç‚¹çš„ç±»å‹ï¼Œè€Œæ ¹æ®[è¿™ä¸ªstackoverflowå›ç­”](https://stackoverflow.com/a/12063938)ï¼Œ`sql server`ä¸­çš„`timestamp`ä¸»è¦ç”¨äºä¹è§‚é”çš„æƒ…å†µï¼ˆå…·ä½“ä¸åœ¨è¿™é‡Œé˜è¿°ï¼‰ï¼Œåªæ˜¯ç”¨æ¥æ ‡è®°æœ¬è¡Œä¸Šä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯ä¸ªè¡¨åªèƒ½å­˜åœ¨ä¸€ä¸ª`timestamp`çš„åˆ—ã€‚è€Œåœ¨SQL Serverä¸­å¦‚æœè¦è¡¨ç¤ºä¸€ä¸ªæ—¶é—´æˆ³ï¼Œéœ€è¦ä½¿ç”¨`datetimeoffset`ã€‚

æ‰€ä»¥ç°åœ¨é—®é¢˜å°±å˜æˆäº†ï¼š**å¦‚ä½•å°†ä¸€ä¸ªç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—çš„ç±»å‹**ã€‚

`type:timestamp`è¿™ä¸ªtagè‚¯å®šæ˜¯ä¸èƒ½ç”¨äº†ï¼Œäºæ˜¯æˆ‘ä»¬å°±éœ€è¦æŸ¥æ‰¾æœ‰æ²¡æœ‰å…¶ä»–æ›´åŠ¨æ€çš„æ–¹æ³•ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªgoå­—æ®µæ˜ å°„åˆ°æ•°æ®åº“ä¸­çš„ç±»å‹ã€‚ç»è¿‡ä¸€ç•ªæŸ¥æ‰¾ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†[Customize Data Type](https://gorm.io/docs/data_types.html#GormDataTypeInterface)åŠŸèƒ½ã€‚gormå…è®¸å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„`struct`ï¼Œå¹¶ç»™è¿™ä¸ª`struct`å®ç°`GormDBDataTypeInterface`æ¥å£ï¼Œæ¥è¿”å›è¿™ä¸ªç±»å‹çš„å­—æ®µæ‰€çœŸæ­£å¯¹åº”çš„æ•°æ®åº“ç±»å‹ã€‚

```go
type GormDBDataTypeInterface interface {
  GormDBDataType(*gorm.DB, *schema.Field) string
}
```
è¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯`gorm.DB`å¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ“ä½œçš„æ•°æ®åº“å¯¹è±¡ï¼Œå¯ä»¥è·å–åˆ°å½“å‰æ­£åœ¨ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„`Dialector`ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®`Dialector`ç±»å‹ï¼Œæ¥è¾“å‡ºå¯¹åº”çš„æ•°æ®åº“åˆ—ç±»å‹ã€‚å¦å¤–ï¼Œè¿™ä¸ª`CustomTime`æ­£å¥½æ˜¯ä»£ç ä¸­æ‰€å®šä¹‰çš„ä¸€ä¸ªæ–°çš„`struct`ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨`CustomTime`ä¸Šå®ç°è¿™ä¸ªæ¥å£ã€‚

çœ‹æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä¸ºäº†ä»¥é˜²ä¸‡ä¸€ï¼Œæˆ‘ä»¬å†å…¨å±€æœç´¢ä¸€ä¸‹`type:timestamp`ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„ç”¨æ³•ã€‚æœç„¶è¢«æˆ‘æ‰¾åˆ°äº†ï¼

```go /timestamp(3)/
// https://github.com/muety/wakapi/blob/fc483cc35cb06313da8231424d1d85b291655881/models/heartbeat.go#L27
type Heartbeat struct {
  // ...
  Time            CustomTime `json:"time" gorm:"type:timestamp(3); index:idx_time; index:idx_time_user" swaggertype:"primitive,number"`
  // ...
}
```

è¿™é‡Œç”¨åˆ°äº†`timestamp(3)`ã€‚æ ¹æ®[mysqlçš„æ–‡æ¡£](https://dev.mysql.com/doc/refman/8.0/en/fractional-seconds.html)ï¼Œ`timestamp(n)`ä¸­çš„`n`æ˜¯ä»£è¡¨ç²¾ç¡®åˆ°ç§’åé¢çš„ç¬¬å‡ ä½æµ®ç‚¹ä½ï¼Œ`3`ä»£è¡¨ç²¾ç¡®åˆ°æ¯«ç§’ï¼Œè€Œ`6`ä»£è¡¨ç²¾ç¡®åˆ°å¾®ç§’ã€‚è€ŒSQL Serverçš„`datetimeoffset`ä¹Ÿæ”¯æŒç±»ä¼¼çš„æ ‡è®°ï¼ˆ[æ–‡æ¡£](https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-ver16)ï¼‰ï¼Œ`datetimeoffset(n)`ä¸­çš„`n`ä¹ŸåŒæ ·è¡¨ç¤ºç²¾ç¡®åˆ°ç§’åé¢çš„ç¬¬å‡ ä½æµ®ç‚¹ä½ã€‚ç”±äºæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨`type`tagï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªtagç”¨æ¥è¡¨ç¤ºè¿™ä¸ªç²¾ç¡®çš„ä½æ•°ï¼ˆæ ¹æ®sql serverçš„æ–‡æ¡£ï¼Œå°†è¿™ä¸ªä½æ•°ç§°ä¸º`scale`ï¼‰ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨æ–°çš„`timeScale`çš„tagï¼Œå…¶å€¼å°±æ˜¯`scale`çš„å€¼ã€‚è€Œä¸€ä¸ªå­—æ®µä¸Šå…·ä½“æœ‰å“ªäº›tagï¼Œæ­£å¥½å¯ä»¥é€šè¿‡`GormDBDataType`çš„ç¬¬äºŒä¸ªå‚æ•°è·å–ã€‚

äºæ˜¯æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å®ç°äº†`CustomTime`çš„`GormDBDataType`æ–¹æ³•ï¼š

```go
// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/shared.go#L44
func (j CustomTime) GormDBDataType(db *gorm.DB, field *schema.Field) string {

	t := "timestamp"

  // å¦‚æœä½¿ç”¨çš„æ˜¯SQL Server Dialectorï¼Œåˆ™å°†å…¶ç±»å‹è®¾ç½®ä¸ºdatetimeoffset
	if db.Config.Dialector.Name() == (sqlserver.Dialector{}).Name() {
		t = "datetimeoffset"
	}

  // å¦‚æœä¸€ä¸ªå±æ€§æœ‰TIMESCALEçš„tagï¼Œé‚£ä¹ˆç»™ç±»å‹åé¢å¢åŠ (n)å‚æ•°
  // gormå°†æ‰€æœ‰gormä¸‹çš„tagçš„keyè½¬æ¢æˆäº†å…¨å¤§å†™
  // å‚è€ƒï¼šhttps://github.com/go-gorm/gorm/blob/0123dd45094295fade41e13550cd305eb5e3a848/schema/utils.go#L35
	if scale, ok := field.TagSettings["TIMESCALE"]; ok {
		t += fmt.Sprintf("(%s)", scale)
	}

	return t
}
```

åŒæ—¶ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„`timestamp`éƒ½ç›´æ¥å»æ‰ï¼Œå°†`type:timestamp(n)`ä¿®æ”¹ä¸ºäº†`timeScale:n`ï¼š

```go /timeScale:3/
// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/user.go#L17
type User struct {
  // ...
  CreatedAt           CustomTime  `gorm:"default:CURRENT_TIMESTAMP" swaggertype:"string" format:"date" example:"2006-01-02 15:04:05.000"`
  LastLoggedInAt      CustomTime  `gorm:"default:CURRENT_TIMESTAMP" swaggertype:"string" format:"date" example:"2006-01-02 15:04:05.000"`
  // ...
  SubscribedUntil     *CustomTime `json:"-" swaggertype:"string" format:"date" example:"2006-01-02 15:04:05.000"`
  SubscriptionRenewal *CustomTime `json:"-" swaggertype:"string" format:"date" example:"2006-01-02 15:04:05.000"`
}

// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/heartbeat.go#L12
type Heartbeat struct {
  // ...
  Time            CustomTime `json:"time" gorm:"timeScale:3; index:idx_time; index:idx_time_user" swaggertype:"primitive,number"`
  // ...
}
```

è¿™æ ·å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚

## é¿å…åˆ›å»ºé€’å½’çš„çº§è”ä¿®æ”¹å¤–é”®çº¦æŸ

æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œåˆ°è¿™é‡Œä»ç„¶æ— æ³•å¯åŠ¨ç¨‹åºã€‚æŠ¥é”™å¦‚ä¸‹ï¼š

``` {3}
[2.938ms] [rows:0] CREATE TABLE "summary_items" ("id" bigint IDENTITY(1,1),"summary_id" bigint,"type" smallint,"key" nvarchar(255),"total" bigint,PRIMARY KEY ("id"),CONSTRAINT "fk_summaries_editors" FOREIGN KEY ("summary_id") REFERENCES "summaries"("id") ON DELETE CASCADE ON UPDATE CASCADE,CONSTRAINT "fk_summaries_operating_systems" FOREIGN KEY ("summary_id") REFERENCES "summaries"("id") ON DELETE CASCADE ON UPDATE CASCADE,CONSTRAINT "fk_summaries_machines" FOREIGN KEY ("summary_id") REFERENCES "summaries"("id") ON DELETE CASCADE ON UPDATE CASCADE,CONSTRAINT "fk_summaries_projects" FOREIGN KEY ("summary_id") REFERENCES "summaries"("id") ON DELETE CASCADE ON UPDATE CASCADE,CONSTRAINT "fk_summaries_languages" FOREIGN KEY ("summary_id") REFERENCES "summaries"("id") ON DELETE CASCADE ON UPDATE CASCADE)
2024-01-19T19:29:35.607826413+08:00 [ERROR] mssql: Could not create constraint or index. See previous errors.
panic: mssql: Could not create constraint or index. See previous errors.
```

`Could not create constraint or index. See previous errors.`è¿™ä¸ªç­‰äºä»€ä¹ˆéƒ½æ²¡è¯´å˜›ï¼ŒåªçŸ¥é“åˆ›å»ºä¸€ä¸ªå¤–é”®çº¦æŸæˆ–è€…ç´¢å¼•çš„æ—¶å€™å¤±è´¥äº†ï¼Œè€Œå…¶ä»–çš„é”™è¯¯ä¿¡æ¯è¢«gormæˆ–è€…gormçš„sqlserver dialectorå¿½ç•¥äº†ã€‚è¿˜

è¿˜å¥½æˆ‘èƒ½çœ‹åˆ°å…·ä½“æ‰§è¡Œçš„SQLè¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™æ®µSQLè¯­å¥æ‰‹åŠ¨è¾“å…¥åˆ°Azure Data Studioä¸­ï¼Œçœ‹çœ‹æ•°æ®åº“å¼•æ“åˆ°åº•æŠ¥äº†ä»€ä¹ˆé”™è¯¯ã€‚

![é€šè¿‡Azure Data StudioæŸ¥çœ‹å…·ä½“çš„é”™è¯¯ä¿¡æ¯](./foreign-keys.png)

> Introducing FOREIGN KEY constraint 'fk_summaries_operating_systems' on table 'summary_items' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.

çœ‹èµ·æ¥ï¼Œæ˜¯å› ä¸º`fk_summaries_operating_systems`è¿™ä¸ªçº§è”çš„å¤–é”®ç´¢å¼•ä¼šé€ æˆçº§è”é€’å½’ï¼ˆcyclesï¼‰ã€‚å’Œå¤–é”®çº¦æŸæœ‰å…³ï¼Œè€Œå¤–é”®çº¦æŸæ˜¯é€šè¿‡gormå®šä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå»çœ‹çœ‹ä»£ç é‡Œæ¶‰åŠè¿™ä¸ªå¤–é”®çº¦æŸçš„ä¸¤ä¸ªè¡¨çš„å®šä¹‰ã€‚

```go /constraint:OnUpdate:CASCADE,OnDelete:CASCADE/
// https://github.com/muety/wakapi/blob/fc483cc35cb06313da8231424d1d85b291655881/models/summary.go#L29
type Summary struct {
  // ...
	Projects         SummaryItems `json:"projects" gorm:"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"`
	Languages        SummaryItems `json:"languages" gorm:"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"`
	Editors          SummaryItems `json:"editors" gorm:"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"`
	OperatingSystems SummaryItems `json:"operating_systems" gorm:"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"`
	Machines         SummaryItems `json:"machines" gorm:"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"`
}

type SummaryItems []*SummaryItem

type SummaryItem struct {
  // ...
	Summary   *Summary      `json:"-" gorm:"not null; constraint:OnUpdate:CASCADE,OnDelete:CASCADE"`
	SummaryID uint          `json:"-" gorm:"size:32"`
}
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œ`Summary`å’Œ`SummaryItem`ä¸¤ä¸ªè¡¨æ˜¯1:mçš„å…³ç³»ï¼Œè¿™ä¸ªå…³ç³»æ˜ å°„åˆ°æ•°æ®åº“ä¸­ï¼Œä¹Ÿå°±æ˜¯`SummaryItem`è¡¨ä¸­æœ‰åˆ°`Summary`çš„IDçš„å¤–é”®`summary_id`ï¼Œè€Œè¿™ä¸ªå¤–é”®çš„çº¦æŸåˆ™æ˜¯é€šè¿‡`Summary`è¡¨ä¸­çš„tagå®šä¹‰çš„ã€‚

è½¬å›å¤´å»çœ‹ç”Ÿæˆçš„SQLï¼Œç”Ÿæˆçš„SQLé‡Œæœ‰**5**ä¸ªå®Œå…¨ç›¸åŒçš„å¤–é”®ï¼ˆ`fk_summaries_editors`, `fk_summaries_operating_systems`ï¼Œ`fk_summaries_machines`ï¼Œ`fk_summaries_projects`å’Œ`fk_summaries_languages`ï¼‰ã€‚ç”±äºè¿™äº”ä¸ªå¤–é”®éƒ½æ˜¯çº§è”åˆ é™¤ï¼ˆ`ON DELETE CASCADE`ï¼‰å’Œçº§è”æ›´æ–°ï¼ˆ`ON UPDATE CASCADE`ï¼‰ï¼Œå®é™…ä¸Šç¡®å®æ˜¯ä¼šå­˜åœ¨ä¸€ä¸ªçº§è”é€’å½’ï¼šå½“ä¸€ä¸ª`SummaryItem`è¢«åˆ é™¤ï¼Œä¼šé€ æˆå…¶å¯¹åº”çš„`Summary`è¢«åˆ é™¤ï¼Œè€Œ`Summary`è¢«åˆ é™¤å¯èƒ½ä¼šé€ æˆè¿™ä¸ª`SummaryItem`ä¹Ÿè¢«åˆ é™¤ã€‚

é‚£é—®é¢˜åˆæ¥äº†ï¼Œé‚£ä¸ºä»€ä¹ˆä¹‹å‰åœ¨MySQLã€PostgresSQLç­‰æ•°æ®åº“é‡Œå‡æ­£å¸¸å‘¢ï¼Ÿé€šè¿‡[è¿™ç¯‡Stack Overflow](https://stackoverflow.com/a/852047)çš„å›ç­”ï¼Œæˆ‘ä»¬çŸ¥é“äº†è¿™ç§é—®é¢˜åœ¨å…¶ä»–æ•°æ®åº“ä¸­å¹¶ä¸æ˜¯é—®é¢˜ï¼šå…¶ä»–æ•°æ®åº“ä¼šå°è¯•è§£å‡ºä¸€æ¡çº§è”è·¯å¾„å‡ºæ¥ã€‚è€ŒSQL Serverä¸ä¼šå»å°è¯•è§£ï¼Œå‘ç°äº†è¿™ç§å¾ªç¯ï¼Œå°±ä¼šç›´æ¥æŠ¥é”™ã€‚

é‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæ ¹æ®å¤–é”®åå’Œ`Summary`ä¸­çš„å±æ€§çš„å¯¹åº”å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æµ‹ï¼Œè¿™äº”ä¸ªå¤–é”®æ˜¯`Summary`ä¸­äº”ä¸ªå¼•ç”¨ä¸€ä¸€å¯¹åº”è¿‡æ¥çš„ã€‚ç”±äºè¿™äº”ä¸ªå¤–é”®å®é™…ä¸Šæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªéœ€è¦ä¿ç•™ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œæœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåªä¿ç•™ä¸€ä¸ªå­—æ®µçš„å¤–é”®tagï¼Œå…¶ä»–å­—æ®µå…¨éƒ¨ç»™ä¸€ä¸ª`-`çš„tagï¼Œè®©gormä¸è¦ä¸ºè¿™äº›å­—æ®µç”Ÿæˆå¤–é”®ã€‚

```go {5-8}
// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/summary.go#L30
type Summary struct {
	Projects SummaryItems `json:"projects" gorm:"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"`

	Languages        SummaryItems `json:"languages" gorm:"-"`
	Editors          SummaryItems `json:"editors" gorm:"-"`
	OperatingSystems SummaryItems `json:"operating_systems" gorm:"-"`
	Machines         SummaryItems `json:"machines" gorm:"-"`
}
```

## è§„é¿gorm sqlserverçš„bug

è‡³æ­¤ï¼Œç³»ç»Ÿç»ˆäºèƒ½å¯åŠ¨èµ·æ¥äº†ï¼Œå¹¶ä¸”å¤§å¤šæ•°åŠŸèƒ½å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚è€Œåœ¨ä»£ç å®¡æ ¸è¿‡ç¨‹ä¸­ï¼Œä½œè€…è¿˜[å‘ç°äº†ä¸€ä¸ªé—®é¢˜](https://github.com/muety/wakapi/pull/592#issuecomment-1892627154)ï¼šä»£ç ä¸­æœ‰ä¸€ä¸ª`Heartbeat`è¡¨ï¼Œå®ƒå°±æ˜¯wakatimeçš„å®¢æˆ·ç«¯æ’ä»¶å®šæœŸç»™æœåŠ¡å™¨ç«¯å‘é€çš„æ•°æ®ï¼Œå…¶ä¸­åŒ…å«äº†æ­£åœ¨å·¥ä½œçš„é¡¹ç›®ã€ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ç­‰ä¿¡æ¯ã€‚è€Œè¿™ä¸ªè¡¨ä¸­æœ‰ä¸€ä¸ªå­—æ®µä¸º`Hash`ï¼Œè¿™ä¸ªå­—æ®µçš„å€¼æ ¹æ®å…¶ä»–ä¿¡æ¯ç®—å‡ºæ¥ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ª`unique index`ï¼Œé€šè¿‡è¿™ä¸ªå­—æ®µï¼Œå°±é¿å…ç»™`Heartbeat`è¡¨æ’å…¥å¤šä¸ªé‡å¤çš„æ•°æ®ã€‚

```go {4}
// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/heartbeat.go#L13
type Heartbeat struct {
  // ...
	Hash            string     `json:"-" gorm:"type:varchar(17); uniqueIndex"`
  // ...
}
```

åœ¨æ’å…¥çš„æ—¶å€™ï¼Œä½œè€…ä½¿ç”¨äº†`ON CONFLICT DO NOTHING`çš„è¯­å¥ï¼Œè¿™ä¸ªè¯­å¥çš„ä½œç”¨å°±æ˜¯ï¼Œå¦‚æœå½“æ’å…¥ä¸€è¡Œçš„æ—¶å€™ï¼Œå‘ç°æœ‰äº›è¡Œè¿åäº†æŸä¸ª`unique index`çš„è¦æ±‚ï¼Œåˆ™**å¿½ç•¥**è¿™ä¸ªé—®é¢˜ï¼Œä¸æ’å…¥è¿™ä¸€è¡Œï¼Œä¹Ÿä¸æŠ¥é”™ã€‚è¿™åˆšå¥½éå¸¸é€‚åˆæ’å…¥æœ‰å¯èƒ½æœ‰é‡å¤çš„`Heartbeat`çš„åœºæ™¯ã€‚

```go
// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/repositories/heartbeat.go#L52
// ä¸‹è¿°ä»£ç å°†ä¼šè¢«æ˜ å°„ä¸ºON CONFLICT DO NOTHING
if err := r.db.
  Clauses(clause.OnConflict{
    DoNothing: true,
  }).
  Create(&heartbeats).Error; err != nil {
  return err
}
return nil
```

è¿™ç§è¡Œä¸ºè¢«ç§°ä¸º**æ’å…¥æˆ–è€…æ›´æ–°**ï¼Œåˆè¢«ç§°ä¸º**Upsert**ï¼ˆUpdate/Insertï¼‰ï¼Œå…¶è¡Œä¸ºæ˜¯ä¸€ä¸ªç®€å•çš„åˆ¤æ–­ï¼šå¦‚æœä¸€è¡Œå·²ç»å­˜åœ¨ï¼Œåˆ™æ›´æ–°è¿™ä¸€è¡Œçš„å†…å®¹ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥è¿™ä¸€è¡Œã€‚è€Œå¦‚ä½•åˆ¤æ–­**ä¸€è¡Œæ˜¯å¦å­˜åœ¨**å‘¢ï¼Ÿåˆ™æ˜¯é€šè¿‡`unique index`æ¥åˆ¤æ–­ã€‚

å¯æ˜¯é—æ†¾çš„æ˜¯ï¼ŒSQL Serverä¸æ”¯æŒ`ON CONFLICT DO NOTHING`ã€‚è¦æƒ³åœ¨SQL Serverä¸­æ¨¡æ‹Ÿupsertçš„è¡Œä¸ºï¼Œ[æœ‰å¾ˆå¤šæ–¹å¼](https://michaeljswart.com/2017/07/sql-server-upsert-patterns-and-antipatterns/)ï¼Œä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨`merge into`è¯­å¥ã€‚å…·ä½“å¦‚ä½•ç¼–å†™æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±ä¸å†å…·ä½“è®²è§£ã€‚

ç”±äºè¿™é‡Œæ˜¯ä½¿ç”¨çš„gormçš„APIï¼Œå¹¶ä¸æ˜¯ä½¿ç”¨åŸç”ŸSQLè¯­å¥ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ¥è¯´ï¼Œgormæ˜¯å¯ä»¥çŸ¥é“ç”¨æˆ·çš„æ„å›¾ï¼Œå¹¶æ ¹æ®ä¸åŒçš„æ•°æ®åº“ç”Ÿæˆè¡Œä¸ºç›¸åŒçš„ã€ä½†æ˜¯å…¼å®¹å¯¹åº”æ•°æ®åº“çš„SQLè¯­å¥çš„ã€‚æ ¹æ®[è¿™ä¸ªissue](https://github.com/go-gorm/sqlserver/issues/47)ï¼Œgormçš„SQL Serveråº“ç¡®å®åœ¨å¾ˆæ—©ä¹‹å‰å°±å°è¯•é€šè¿‡ç”Ÿæˆä¸€æ®µçš„SQL Serverå…¼å®¹çš„SQLè¯­å¥æ¥æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨gormçš„æ–‡æ¡£é‡Œä¹Ÿ[æåˆ°äº†](https://gorm.io/docs/create.html#Upsert-x2F-On-Conflict)ï¼Œ`clause.OnConflict`ä¼šæ ¹æ®ä¸åŒçš„æ•°æ®åº“ç”Ÿæˆä¸åŒçš„è¯­å¥ï¼Œè€Œå¯¹äºSQL Serverï¼Œå…¶å¯¹åº”ç”Ÿæˆçš„æ­£å¥½å°±æ˜¯`MERGE INTO`è¯­å¥ã€‚

ä½†æ˜¯ï¼Œæ—¢ç„¶åº“éƒ½æ”¯æŒäº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜ä¼šé‡åˆ°è¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿå†æ¬¡æ£€æŸ¥æ‰€å®é™…æ‰§è¡Œçš„SQLï¼Œå‘ç°è¿™ä¸€æ¬¡`Create`å®é™…ä¸Šç”Ÿæˆçš„SQLè¯­å¥ä»ç„¶æ˜¯æœ€æ™®é€šçš„`INSERT INTO`ï¼Œå¹¶æ²¡æœ‰ä¸æ˜¯æ­£ç¡®çš„`MERGE INTO`ï¼Œã€‚

```SQL /INSERT INTO/
024/01/19 20:10:23 /home/ddadaal/Code/wakapi/repositories/heartbeat.go:54 mssql: Cannot insert duplicate key row in object 'dbo.heartbeats' with unique index 'idx_heartbeats_hash'. The duplicate key value is (d926be93ebcc4b6f).

[10.830ms] [rows:0] INSERT INTO "heartbeats" ("user_id","entity","type","category","project","branch","language","is_write","editor","operating_system","machine","user_agent","time","hash","origin","origin_id","created_at") OUTPUT INSERTED."id" VALUES ('ddadaal','/home/user1/dev/project1/main.go','file','','wakapi','','Go',1,'','','','curl/8.5.0','2024-01-16 02:16:18.954','d926be93ebcc4b6f','','','2024-01-19 20:10:23.378');
```

çœ‹æ¥ï¼Œè¦æƒ³å¼„æ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œå°±å¾—è¿›åˆ°`gorm`çš„æºç é‡Œæ¥æŸ¥çœ‹é—®é¢˜å‡ºåœ¨å“ªé‡Œäº†ã€‚ä½¿ç”¨VSCodeå¯åŠ¨ä¸€ä¸ªè°ƒè¯•ç‰ˆæœ¬çš„ç¨‹åºï¼Œç»™ä¸Šé¢çš„ä»£ç çš„ä½ç½®æ‰“ä¸Šæ–­ç”µï¼Œä½¿ç”¨`curl`è¿ç»­æ’å…¥ä¸¤æ¬¡åŒæ ·çš„`Heartbeat`ï¼Œæ ¹æ®æ–­ç‚¹å¾€å†…æŸ¥æ‰¾ï¼Œå½“è¿›å…¥åˆ°gormçš„sqlserverçš„é€‚é…å™¨çš„æ—¶å€™çš„ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€äº›ç«¯å€ªï¼š

![æŸ¥æ‰¾åˆ°å¯èƒ½å‡ºç°bugçš„ä½ç½®](./sqlserver-adapter.png)

å½“å‰ï¼Œæˆ‘ä»¬æ­£åœ¨å›¾ä¸­çš„`if hasConflict`çš„ä½ç½®ï¼Œä¸”`hasConflict`å½“å‰ä¸ºtrueã€‚æ ¹æ®ä¸‹é¢çš„ä¸€æ®µä»£ç ï¼Œå¦‚æœ`hasConflict`ä¸º`true`çš„è¯ï¼Œå°†ä¼šè¿›å…¥`MergeCreate`å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°å³æ˜¯ä¸€ä¸ªåœ¨MySQLå®ç°ç±»ä¼¼è¡Œä¸ºçš„SQLçš„è¯­å¥çš„ä»£ç ã€‚ä½†æ˜¯ï¼Œå®é™…åœ¨æ©™è‰²å—ç»“æŸåï¼Œ`hasConflict`**è¢«æ”¹æˆäº†`false`**ï¼Œæ‰€ä»¥æœ€ç»ˆå¹¶æ²¡æœ‰è¿›å…¥`MergeCreate`ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„`INSERT INTO` SQLã€‚é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ©™è‰²è¿™æ®µä»£ç å°±æ˜¯ç½ªé­ç¥¸é¦–ï¼

è¿™æ®µä»£ç å¹²äº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œå®ƒä¼šæ£€æŸ¥è¦æ’å…¥çš„è¡Œä¸­çš„å„ä¸ªåˆ—ä¸­æœ‰æ²¡æœ‰åŒ…å«ä¸»é”®ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ä¸»é”®ï¼Œåˆ™å°†ä¼šæŠŠ`hasConflict`æ”¹ä¸º`false`ï¼›è€Œå¦‚ä½•è®¾ç½®äº†ä¸»é”®ï¼Œæ‰ä¼šè¿›å…¥`MERGE INTO`æµç¨‹ã€‚å›æƒ³å‰é¢ï¼Œè¦æƒ³æ­£ç¡®ç”Ÿæˆupsertè¡Œä¸ºï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­**ä¸€è¡Œæ˜¯å¦å­˜åœ¨**ã€‚è€Œå¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œçš„ä»£ç å°†**ä¸€è¡Œæ˜¯å¦å­˜åœ¨**çš„åˆ¤æ–­æ ‡å‡†ç­‰ä»·ä¸ºäº†ä¸»é”®æ˜¯å¦å­˜åœ¨ï¼Œè€Œå¿½ç•¥äº†å…¶ä»–å…·æœ‰çš„`unique index`çš„åˆ—ã€‚

å½“ç„¶ï¼Œå…¶ä»–äººä¹Ÿå‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œgorm-sqlserverçš„ä»“åº“ä¸­ä¹Ÿæœ‰[å·²ç»åŠå¹´å‰æ‰“å¼€çš„issue](https://github.com/go-gorm/sqlserver/issues/100)æ­£å¥½å°±æ˜¯å…³äºè¿™ä¸ªé—®é¢˜ã€‚è€Œå¾ˆé—æ†¾ï¼Œè¿™ä¸ªé—®é¢˜è¿‡äº†åŠå¹´ä¾ç„¶æ²¡æœ‰ä¿®å¤ã€‚

è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å¤šç§æ–¹æ³•ï¼Œè€Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†æœ€ç®€å•ç²—æš´çš„æ–¹æ³•ï¼šä¸ç®¡ï¼è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯åŒæ—¶æ’å…¥å¤šä¸ª`Heartbeatt`ï¼Œé‚£æˆ‘ä»¬å°±æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªæ’å…¥ï¼Œå¦‚æœä¸€ä¸ªè¡Œæ’å…¥å¤±è´¥äº†ï¼Œæˆ‘ä»¬ç®€å•åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æœè¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºhashé‡å¤é€ æˆäº†ï¼Œé‚£æˆ‘ä»¬å°±ä¸ç®¡äº†ï¼æ£€æŸ¥äº†ä¸€ä¸‹ä»£ç ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„åœºæ™¯ï¼Œå…¶å®å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯åªæ’å…¥ä¸€è¡Œï¼Œæ‰€ä»¥è¿™æ ·å†™å¯¹æ€§èƒ½é€ æˆçš„å½±å“æ˜¯å¯ä»¥æ¥å—çš„ã€‚

```go
// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/repositories/heartbeat.go#L34
if r.db.Dialector.Name() == (sqlserver.Dialector{}).Name() {
  for _, h := range heartbeats {
    err := r.db.Create(h).Error
    if err != nil {
      if strings.Contains(err.Error(), "Cannot insert duplicate key row in object 'dbo.heartbeats' with unique index 'idx_heartbeats_hash'") {
        // ignored
      } else {
        return err
      }
    }
  }
  return nil
}
```

# æ€»ç®—è¿˜æ˜¯å®Œæˆäº†

ç»ˆäºï¼Œç»è¿‡äº†ä¸€å‘¨çš„æ—¶é—´ï¼Œæœ¬æ¥ä»¥ä¸ºåªæ˜¯ä¸€ä¸ªç®€å•çš„è°ƒåº“ï¼Œç»“æœå´å‘ç°äº†è¿™ä¹ˆå¤šçš„é—®é¢˜ã€‚ç»è¿‡è¿™ä¸ªè¿‡ç¨‹ï¼Œä¹‹å‰è¿SQL Serverç”¨éƒ½æ²¡ç”¨è¿‡çš„æˆ‘ä¹ŸçŸ¥é“äº†å¾ˆå¤šSQL Serverçš„ç»†èŠ‚ï¼›ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡gormï¼Œç°åœ¨å´è¿æºä»£ç éƒ½å¥½å¥½ç¿»äº†ä¸€é€šã€‚

è€Œå…³äºgoï¼Œè™½ç„¶æˆ‘ä¸€ç›´ä¸å–œæ¬¢goçš„è¯­æ³•ï¼Œè§‰å¾—å®ƒå¤ªç®€å•ï¼Œç±»å‹ç³»ç»Ÿå¤ªå¼±ï¼Œå¾ˆå¤šä»£ç éƒ½èŠ±åœ¨å›ºå®šçš„æ¨¡æ¿ä»£ç ä¸Šï¼ˆæ¯”å¦‚`if err := nil`ï¼‰ï¼Œä½†æ˜¯ä¸å¾—ä¸æ‰¿è®¤çš„ä¸€ç‚¹æ˜¯ï¼Œgoç¡®å®éå¸¸çš„**explicit**ã€‚æ²¡é‚£ä¹ˆå¤šä¹±ä¸ƒå…«ç³Ÿçš„åå°„ã€è¿è¡Œæ—¶é»‘é­”æ³•ï¼Œæ§åˆ¶æµéå¸¸æ¸…æ™°ï¼Œæƒ³çŸ¥é“ä»€ä¹ˆä»£ç è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³•ï¼Œç›´æ¥`Shift+F12`å°±å®Œäº‹äº†ï¼Œå‡ºæ¥çš„ç»“æœä¸ä¼šå¤šä¸ä¼šå°‘ï¼›è¦æƒ³æŸä¸ªé”™è¯¯æ˜¯åœ¨å“ªé‡Œå¤„ç†çš„ï¼Œè·Ÿç€ç¹ççš„é”™è¯¯å¤„ç†ä»£ç æ€»èƒ½æ‰¾åˆ°ã€‚å®ƒç¡®å®ç¼ºå°‘ä¸€äº›ç‰¹æ€§ï¼Œä½†æ˜¯å®ƒéå¸¸åœ°å·¥ä¸šåŒ–ã€‚

è§£å†³è¿™äº›é—®é¢˜åï¼ŒPRé¡ºåˆ©åˆå¹¶è¿›äº†ä¸»åˆ†æ”¯ï¼Œæˆå°±æ„Ÿæ»¡æ»¡ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€ä¸ªæ²¡é‚£ä¹ˆç®€å•çš„å¼€æºé¡¹ç›®çš„è´¡çŒ®äº†ã€‚

![https://github.com/muety/wakapi/pull/592](./pr-merged.png)

å¯¹æˆ‘æ¥è¯´ï¼Œè®¾å®šä¸€ä¸ªç›®æ ‡æ˜¯å­¦ä¹ çš„æœ€å¥½çš„é€”å¾„ï¼Œåœ¨è¿™æ¬¡å®è·µé‡Œå†æ¬¡å¾—åˆ°äº†å°è¯ã€‚
5:["$","article",null,{"children":[["$","div",null,{"className":"bg-neutral px-4 py-8","children":["$","div",null,{"className":"max-w-7xl mx-auto min-h-[256px] flex justify-center text-center text-neutral-content","children":["$","div",null,{"className":"flex flex-col justify-center animate-slide-up","children":[["$","h1",null,{"className":"text-4xl my-2","children":"ä»è°ƒåº“åˆ°ç¿»æºä»£ç ï¼šç»™wakapiå¢åŠ SQL Serveræ”¯æŒ"}],["$","$L1d",null,{"className":"justify-center","articleId":"support-sqlserver-in-wakapi","info":{"content":"$1e","title":"ä»è°ƒåº“åˆ°ç¿»æºä»£ç ï¼šç»™wakapiå¢åŠ SQL Serveræ”¯æŒ","date":"2024-01-17 22:58","id":"support-sqlserver-in-wakapi","lang":"cn","tags":["project","problem-investigation"],"related":"$undefined","ignored_in_list":"$undefined","hide_heading":"$undefined","no_toc":"$undefined","absolute_path":"$undefined","last_updated":"$undefined","wordCount":6636,"readingTime":33.18,"filePath":"contents/20240117-support-sqlserver-in-wakapi/cn.md","summary":{"articleId":"support-sqlserver-in-wakapi","lang":"cn","hash":"2894ee61840e2353f94fdd29fb81283beca5354b54bd7435b9453fdffcf7c88e","summaries":[{"metadata":{"summarizer":"azure-ai","model":"DeepSeek-R1"},"summaries":["ä½œè€…åœ¨å°è¯•å°†Wakapié¡¹ç›®è¿ç§»è‡³SQL Serveræ—¶ï¼Œé‡åˆ°ä¸€ç³»åˆ—æ•°æ®åº“é€‚é…é—®é¢˜ã€‚åŒ…æ‹¬SQLè¯­æ³•å·®å¼‚ã€ORMæ¡†æ¶é…ç½®ã€å¤–é”®çº¦æŸå†²çªåŠGORMåº“çš„UpsertåŠŸèƒ½ç¼ºé™·ã€‚é€šè¿‡ä¿®æ”¹åŸç”ŸSQLè¯­å¥ã€åŠ¨æ€è°ƒæ•´æ—¶é—´å­—æ®µç±»å‹æ˜ å°„ã€é‡æ„å¤–é”®å…³ç³»ã€æ‰‹åŠ¨å¤„ç†å”¯ä¸€ç´¢å¼•å†²çªï¼Œæœ€ç»ˆè§£å†³å…¼å®¹æ€§é—®é¢˜å¹¶æˆåŠŸåˆå¹¶ä»£ç ã€‚æ­¤æ¬¡å®è·µæ·±å…¥äº†è§£äº†SQL Serverç‰¹æ€§ä¸GORMå†…éƒ¨æœºåˆ¶ï¼ŒéªŒè¯äº†é€šè¿‡å®é™…é¡¹ç›®æ”»åšå­¦ä¹ æŠ€æœ¯çš„æœ‰æ•ˆæ€§ã€‚"],"startTime":"2025-02-14T13:43:38.671Z","endTime":"2025-02-14T13:44:02.939Z"},{"metadata":{"summarizer":"ollama","model":"deepseek-r1:8b"},"summaries":["åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæˆ‘é€æ­¥å‘ç°äº†è®¸å¤šå…³äº SQL Server å’Œ GORM çš„ç»†èŠ‚ï¼Œå¹¶é€šè¿‡æ‰‹åŠ¨å¤„ç†é‡å¤æ’å…¥çš„é—®é¢˜ï¼Œæœ€ç»ˆå®Œæˆäº†ä»»åŠ¡ã€‚å°½ç®¡é‡åˆ°äº†ä¸€äº›æŒ‘æˆ˜ï¼Œä½†è¿‡ç¨‹è®©æˆ‘å¯¹ Go è¯­è¨€å’Œå¼€æºé¡¹ç›®è´¡çŒ®æœ‰äº†æ›´æ·±çš„ç†è§£ã€‚\n\n**ä¸»è¦æ­¥éª¤ï¼š**\n\n1. **é—®é¢˜è¯†åˆ«**ï¼šåœ¨å°è¯•ä½¿ç”¨ GORM æ’å…¥æ•°æ®æ—¶ï¼Œé‡åˆ°äº†é‡å¤ä¸»é”®é”™è¯¯ã€‚\n2. **è°ƒè¯•ä¸åˆ†æ**ï¼šé€šè¿‡è°ƒè¯•å·¥å…·è¿½è¸ªåˆ° GORM çš„ SQL Server é€‚é…å™¨ï¼Œå‘ç°äº†å¯èƒ½çš„ bugã€‚\n3. **æ‰‹åŠ¨å¤„ç†**ï¼šåœ¨æ²¡æœ‰ä¿®å¤é€‚é…å™¨çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©æ‰‹åŠ¨é€ä¸ªæ’å…¥æ•°æ®ï¼Œè·³è¿‡é‡å¤çš„è®°å½•ã€‚\n4. **å­¦ä¹ ä¸åæ€**ï¼šæ·±å…¥äº†è§£äº† Go è¯­è¨€çš„æ˜ç¡®æ€§å’Œé”™è¯¯å¤„ç†æœºåˆ¶ï¼ŒåŒæ—¶ä¹Ÿè®¤è¯†åˆ° SQL Server çš„ç‰¹æ€§ã€‚\n\né€šè¿‡è¿™æ¬¡ç»å†ï¼Œæˆ‘ä¸ä»…è§£å†³äº†é—®é¢˜ï¼Œè¿˜æå‡äº†å¯¹å¼€å‘å·¥å…·å’Œå¼€æºé¡¹ç›®è´¡çŒ®çš„ç†è§£ã€‚æœ€ç»ˆï¼Œæˆ‘çš„Pull Requestå¾—åˆ°äº†åˆå¹¶ï¼Œè¿™è®©æˆ‘æ„Ÿåˆ°æˆå°±æ„Ÿå’Œæ»¡è¶³ã€‚\n\n**ç»“æœï¼š**\n\n- **é—®é¢˜è§£å†³**ï¼šæˆåŠŸå°†æ•°æ®æ’å…¥ SQL Serverï¼Œæ— é‡å¤è®°å½•é”™è¯¯ã€‚\n- **æŠ€èƒ½æå‡**ï¼šåŠ æ·±äº†å¯¹ Go è¯­è¨€å’Œ GORM çš„ç†è§£ï¼ŒæŒæ¡äº†è°ƒè¯•æŠ€å·§ã€‚\n- **è´¡çŒ®ä½“éªŒ**ï¼šç¬¬ä¸€æ¬¡åœ¨å¤§å‹å¼€æºé¡¹ç›®ä¸­å‚ä¸é—®é¢˜è§£å†³ï¼Œå¢å¼ºäº†è§£å†³é—®é¢˜çš„ä¿¡å¿ƒã€‚\n\nè¿™æ¬¡ç»å†è®©æˆ‘æ›´åŠ æ˜ç¡®åœ°è®¤è¯†åˆ°å­¦ä¹ çš„é‡è¦æ€§ï¼Œä¸ç®¡æ˜¯æŠ€æœ¯ä¸Šçš„è¿˜æ˜¯å·¥å…·ä½¿ç”¨æ–¹é¢ï¼Œéƒ½éœ€è¦æŒç»­æ¢ç´¢å’Œå®è·µã€‚"]}]}},"langVersions":["cn"]}]]}]}]}],["$","div",null,{"className":"animate-slide-up","children":[["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":"$L1f"}],["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","$L20",null,{"relatedArticles":[]}]}],["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","$L21",null,{"articleId":"support-sqlserver-in-wakapi","articleTitle":"ä»è°ƒåº“åˆ°ç¿»æºä»£ç ï¼šç»™wakapiå¢åŠ SQL Serveræ”¯æŒ"}]}]]}]]}]
c:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
7:null
22:I[4867,["458","static/chunks/3f731c04-273ad2ee657c8337.js","452","static/chunks/c99dd624-c70eb7fd833cb238.js","478","static/chunks/b767c4c5-8c8b588264c8b54b.js","786","static/chunks/1b3e99d6-bd6014aeea18f102.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","798","static/chunks/798-4c46c2b09214eda1.js","63","static/chunks/63-e828322be2bebc54.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-b83f93f581d95258.js"],"ArticleSummarization"]
23:I[4533,["458","static/chunks/3f731c04-273ad2ee657c8337.js","452","static/chunks/c99dd624-c70eb7fd833cb238.js","478","static/chunks/b767c4c5-8c8b588264c8b54b.js","786","static/chunks/1b3e99d6-bd6014aeea18f102.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","798","static/chunks/798-4c46c2b09214eda1.js","63","static/chunks/63-e828322be2bebc54.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-b83f93f581d95258.js"],"Gallery"]
32:I[7745,["458","static/chunks/3f731c04-273ad2ee657c8337.js","452","static/chunks/c99dd624-c70eb7fd833cb238.js","478","static/chunks/b767c4c5-8c8b588264c8b54b.js","786","static/chunks/1b3e99d6-bd6014aeea18f102.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","798","static/chunks/798-4c46c2b09214eda1.js","63","static/chunks/63-e828322be2bebc54.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-b83f93f581d95258.js"],"ArticleToc"]
24:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z25:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z26:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z27:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z28:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z29:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z2b:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z2c:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z2e:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z30:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z1f:["$","div",null,{"className":"flex flex-row space-x-4","children":[["$","div",null,{"className":"prose max-w-full lg:w-[75%]","children":[["$","$L22",null,{"summaries":[{"metadata":"$5:props:children:0:props:children:props:children:props:children:1:props:info:summary:summaries:0:metadata","children":[["$","p","p-0",{"children":"ä½œè€…åœ¨å°è¯•å°†Wakapié¡¹ç›®è¿ç§»è‡³SQL Serveræ—¶ï¼Œé‡åˆ°ä¸€ç³»åˆ—æ•°æ®åº“é€‚é…é—®é¢˜ã€‚åŒ…æ‹¬SQLè¯­æ³•å·®å¼‚ã€ORMæ¡†æ¶é…ç½®ã€å¤–é”®çº¦æŸå†²çªåŠGORMåº“çš„UpsertåŠŸèƒ½ç¼ºé™·ã€‚é€šè¿‡ä¿®æ”¹åŸç”ŸSQLè¯­å¥ã€åŠ¨æ€è°ƒæ•´æ—¶é—´å­—æ®µç±»å‹æ˜ å°„ã€é‡æ„å¤–é”®å…³ç³»ã€æ‰‹åŠ¨å¤„ç†å”¯ä¸€ç´¢å¼•å†²çªï¼Œæœ€ç»ˆè§£å†³å…¼å®¹æ€§é—®é¢˜å¹¶æˆåŠŸåˆå¹¶ä»£ç ã€‚æ­¤æ¬¡å®è·µæ·±å…¥äº†è§£äº†SQL Serverç‰¹æ€§ä¸GORMå†…éƒ¨æœºåˆ¶ï¼ŒéªŒè¯äº†é€šè¿‡å®é™…é¡¹ç›®æ”»åšå­¦ä¹ æŠ€æœ¯çš„æœ‰æ•ˆæ€§ã€‚"}]]},{"metadata":"$5:props:children:0:props:children:props:children:props:children:1:props:info:summary:summaries:1:metadata","children":[["$","p","p-0",{"children":"åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæˆ‘é€æ­¥å‘ç°äº†è®¸å¤šå…³äº SQL Server å’Œ GORM çš„ç»†èŠ‚ï¼Œå¹¶é€šè¿‡æ‰‹åŠ¨å¤„ç†é‡å¤æ’å…¥çš„é—®é¢˜ï¼Œæœ€ç»ˆå®Œæˆäº†ä»»åŠ¡ã€‚å°½ç®¡é‡åˆ°äº†ä¸€äº›æŒ‘æˆ˜ï¼Œä½†è¿‡ç¨‹è®©æˆ‘å¯¹ Go è¯­è¨€å’Œå¼€æºé¡¹ç›®è´¡çŒ®æœ‰äº†æ›´æ·±çš„ç†è§£ã€‚"}],"\n",["$","p","p-1",{"children":["$","strong","strong-0",{"children":"ä¸»è¦æ­¥éª¤ï¼š"}]}],"\n",["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":[["$","strong","strong-0",{"children":"é—®é¢˜è¯†åˆ«"}],"ï¼šåœ¨å°è¯•ä½¿ç”¨ GORM æ’å…¥æ•°æ®æ—¶ï¼Œé‡åˆ°äº†é‡å¤ä¸»é”®é”™è¯¯ã€‚"]}],"\n",["$","li","li-1",{"children":[["$","strong","strong-0",{"children":"è°ƒè¯•ä¸åˆ†æ"}],"ï¼šé€šè¿‡è°ƒè¯•å·¥å…·è¿½è¸ªåˆ° GORM çš„ SQL Server é€‚é…å™¨ï¼Œå‘ç°äº†å¯èƒ½çš„ bugã€‚"]}],"\n",["$","li","li-2",{"children":[["$","strong","strong-0",{"children":"æ‰‹åŠ¨å¤„ç†"}],"ï¼šåœ¨æ²¡æœ‰ä¿®å¤é€‚é…å™¨çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©æ‰‹åŠ¨é€ä¸ªæ’å…¥æ•°æ®ï¼Œè·³è¿‡é‡å¤çš„è®°å½•ã€‚"]}],"\n",["$","li","li-3",{"children":[["$","strong","strong-0",{"children":"å­¦ä¹ ä¸åæ€"}],"ï¼šæ·±å…¥äº†è§£äº† Go è¯­è¨€çš„æ˜ç¡®æ€§å’Œé”™è¯¯å¤„ç†æœºåˆ¶ï¼ŒåŒæ—¶ä¹Ÿè®¤è¯†åˆ° SQL Server çš„ç‰¹æ€§ã€‚"]}],"\n"]}],"\n",["$","p","p-2",{"children":"é€šè¿‡è¿™æ¬¡ç»å†ï¼Œæˆ‘ä¸ä»…è§£å†³äº†é—®é¢˜ï¼Œè¿˜æå‡äº†å¯¹å¼€å‘å·¥å…·å’Œå¼€æºé¡¹ç›®è´¡çŒ®çš„ç†è§£ã€‚æœ€ç»ˆï¼Œæˆ‘çš„Pull Requestå¾—åˆ°äº†åˆå¹¶ï¼Œè¿™è®©æˆ‘æ„Ÿåˆ°æˆå°±æ„Ÿå’Œæ»¡è¶³ã€‚"}],"\n",["$","p","p-3",{"children":["$","strong","strong-0",{"children":"ç»“æœï¼š"}]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":[["$","strong","strong-0",{"children":"é—®é¢˜è§£å†³"}],"ï¼šæˆåŠŸå°†æ•°æ®æ’å…¥ SQL Serverï¼Œæ— é‡å¤è®°å½•é”™è¯¯ã€‚"]}],"\n",["$","li","li-1",{"children":[["$","strong","strong-0",{"children":"æŠ€èƒ½æå‡"}],"ï¼šåŠ æ·±äº†å¯¹ Go è¯­è¨€å’Œ GORM çš„ç†è§£ï¼ŒæŒæ¡äº†è°ƒè¯•æŠ€å·§ã€‚"]}],"\n",["$","li","li-2",{"children":[["$","strong","strong-0",{"children":"è´¡çŒ®ä½“éªŒ"}],"ï¼šç¬¬ä¸€æ¬¡åœ¨å¤§å‹å¼€æºé¡¹ç›®ä¸­å‚ä¸é—®é¢˜è§£å†³ï¼Œå¢å¼ºäº†è§£å†³é—®é¢˜çš„ä¿¡å¿ƒã€‚"]}],"\n"]}],"\n",["$","p","p-4",{"children":"è¿™æ¬¡ç»å†è®©æˆ‘æ›´åŠ æ˜ç¡®åœ°è®¤è¯†åˆ°å­¦ä¹ çš„é‡è¦æ€§ï¼Œä¸ç®¡æ˜¯æŠ€æœ¯ä¸Šçš„è¿˜æ˜¯å·¥å…·ä½¿ç”¨æ–¹é¢ï¼Œéƒ½éœ€è¦æŒç»­æ¢ç´¢å’Œå®è·µã€‚"}]]}]}],["$","$L23",null,{"withCaption":true,"id":"support-sqlserver-in-wakapi","children":[["$","h1","h1-0",{"id":"ä¸å°±æ˜¯è°ƒåº“å˜›","children":[["$","a","ä¸å°±æ˜¯è°ƒåº“å˜›",{"href":"#ä¸å°±æ˜¯è°ƒåº“å˜›","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$24","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"ä¸å°±æ˜¯è°ƒåº“å˜›â€¦â€¦"]}],"\n",["$","p","p-0",{"children":["åœ¨",["$","a","a-0",{"href":"/articles/added-blog-page-click-monitoring","children":"ä¸Šä¸€ç¯‡æ–‡ç« "}],"ä¸­ï¼Œæˆ‘ç»™åšå®¢å¢åŠ äº†ç‚¹å‡»é‡ç›‘æµ‹ï¼Œå¹¶å°†è¿™ä¸ªæœåŠ¡éƒ¨ç½²åˆ°äº†Azureï¼Œæ•°æ®åº“é‡‡ç”¨äº†ä½¿ç”¨SQL Serverçš„Azureçš„SQLæœåŠ¡ã€‚ç”±äºSQL Serveræœ‰å…è´¹çš„è®¢é˜…ï¼Œå¾®è½¯çš„Azure Data Studioä¹Ÿè¿˜ç®—å¥½ç”¨ï¼Œäºæ˜¯æˆ‘è§‰å¾—å¯ä»¥é‡ç”¨ä¸€ä¸‹åˆšæ‰å­¦ä¹ çš„è¿™ä¸ªæŠ€èƒ½ï¼Œå°†å…¶ä»–çš„æœåŠ¡ä¹Ÿä½¿ç”¨SQL Serveréƒ¨ç½²ã€‚"]}],"\n",["$","p","p-1",{"children":["æˆ‘ä¹‹å‰åœ¨ç”¨",["$","a","a-0",{"href":"https://wakatime.com/","children":"wakatime"}],"æ¥è®°å½•æˆ‘çš„ç¼–ç¨‹çš„æ•°æ®ï¼ˆä¾‹å¦‚æ¯å¤©çš„ç¼–ç¨‹æ—¶é—´ã€æ‰€ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ç­‰ï¼‰ï¼Œä½†æ˜¯wakatimeå…è´¹ç”¨æˆ·åªèƒ½ä¿å­˜14å¤©çš„æ•°æ®ï¼Œè€Œä¸”wakatimeæ²¡æœ‰æä¾›å®˜æ–¹çš„å¯è‡ªå·±éƒ¨ç½²çš„åç«¯ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸€ç›´åœ¨å¯»æ‰¾wakatimeçš„æ›¿ä»£å“ã€‚ä¹‹å‰å°è¯•ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´çš„",["$","a","a-1",{"href":"https://codetime.dev/","children":"codetime"}],"ã€‚è¿™ä¸ªè½¯ä»¶çš„åŠŸèƒ½å’Œwakatimeç±»ä¼¼ï¼Œä½†æ˜¯å®ƒå½“å‰åªæ”¯æŒVSCodeå®¢æˆ·ç«¯ï¼Œè™½ç„¶å…è´¹ä¿å­˜æ•°æ®ï¼Œä½†æ˜¯ä»ç„¶æ²¡æœ‰æä¾›å¯è‡ªå·±éƒ¨ç½²çš„åç«¯ã€‚æˆ‘åœ¨å¾ˆæ—©ä¹‹å‰ä¹Ÿå°è¯•æ‰¾è¿‡wakatimeçš„åç«¯æ›¿ä»£å“ï¼Œä½†æ˜¯å½“æ—¶å¹¶æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªèƒ½ç”¨çš„ã€‚ä½†å‰ä¸ä¹…ï¼ŒåŒå­¦ç»™æˆ‘æ¨èäº†",["$","a","a-2",{"href":"https://www.wakapi.com/","children":"wakapi"}],"é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®é‡æ–°å®ç°äº†wakatimeçš„åç«¯APIï¼Œè¿™æ ·wakatimeçš„ä¸°å¯Œçš„å®¢æˆ·ç«¯æ’ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”å®Œå…¨å¯ä»¥è‡ªå·±éƒ¨ç½²ï¼Œä¸ç”¨æ‹…å¿ƒæ•°æ®å¹¶å­˜æ”¾åœ¨åˆ«äººçš„æœåŠ¡å™¨ä¸Šã€‚"]}],"\n",["$","p","p-2",{"children":"å®ƒå°±æ˜¯æˆ‘ä¸€ç›´å¯»æ‰¾çš„wakatimeæ›¿ä»£å“ï¼"}],"\n",["$","p","p-3",{"children":["å¾ˆæ¿€åŠ¨åœ°æµè§ˆäº†ä¸€ä¸‹é¡¹ç›®ï¼Œçœ‹åˆ°wakapiå½“æ—¶å¹¶æ²¡æœ‰åŸç”Ÿæ”¯æŒSQL Serverï¼Œä½†æ˜¯åœ¨READMEä¸­æåˆ°ï¼Œwakatimeä½¿ç”¨äº†",["$","a","a-0",{"href":"https://gorm.io","children":"gorm"}],"ä½œä¸ºæ•°æ®åº“è®¿é—®æ¡†æ¶ï¼Œè€Œgormæœ¬èº«æ˜¯",["$","a","a-1",{"href":"https://github.com/go-gorm/sqlserver","children":"æ”¯æŒSQL Server"}],"çš„ã€‚"]}],"\n",["$","p","p-4",{"children":["æˆ‘æƒ³ï¼Œæ—¢ç„¶åº“éƒ½æ”¯æŒäº†ï¼ŒSQL Serveræ”¯æŒæœ‰ä»€ä¹ˆéš¾çš„ï¼Ÿå¼•å…¥",["$","code","code-0",{"children":"gorm.io/sqlserver"}],"åŒ…ï¼Œå¼•å…¥åˆ›å»ºä¸€ä¸ª",["$","code","code-1",{"children":"Dialector"}],"ï¼Œç”¨gormçš„APIç¼–å†™çš„ç»å¤§å¤šæ•°æ•°æ®åº“æ“ä½œå°±å®Œæˆäº†ã€‚"]}],"\n",["$","figure","figure-0",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"sqlserver"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-2",{"style":{"color":"#61AFEF"},"children":"Open"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-4",{"style":{"color":"#61AFEF"},"children":"mssqlConnectionString"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-6",{"style":{"color":"#E06C75"},"children":"c"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":"))"}]]}]}]}]}],"\n",["$","p","p-5",{"children":"è¿™æœ‰ä»€ä¹ˆéš¾çš„ï¼Œå¼€è·‘ï¼ç»“æœé‡åˆ°äº†ä¸€å¤§å †æŠ¥é”™ã€‚"}],"\n",["$","h1","h1-1",{"id":"é‡åˆ°å¹¶è§£å†³ä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªçš„é—®é¢˜","children":[["$","a","é‡åˆ°å¹¶è§£å†³ä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªçš„é—®é¢˜",{"href":"#é‡åˆ°å¹¶è§£å†³ä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªçš„é—®é¢˜","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$25","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"é‡åˆ°å¹¶è§£å†³ä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªçš„é—®é¢˜"]}],"\n",["$","h2","h2-0",{"id":"sqlè¯­å¥","children":[["$","a","sqlè¯­å¥",{"href":"#sqlè¯­å¥","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$26","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"SQLè¯­å¥"]}],"\n",["$","p","p-6",{"children":"ä»”ç»†ä¸€çœ‹ï¼Œè¿™äº›æŠ¥é”™ä¸»è¦æ˜¯æ¥è‡ªäºæ•°æ®åº“migrationä¸­çš„åŸç”ŸSQLè¯­å¥å’Œç‰‡æ®µã€‚"}],"\n",["$","p","p-7",{"children":"ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œä¼šè¿è¡Œæ•°æ®åº“migrationè„šæœ¬ã€‚éšç€è½¯ä»¶å¼€å‘æ›´å¤šçš„æ–°åŠŸèƒ½ï¼Œå…¶ä½¿ç”¨çš„æ•°æ®åº“çš„ç»“æ„æ€»ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œmigrationæ˜¯æŒ‡ä¸€äº›ä»£ç ï¼Œè¿™äº›ä»£ç çš„ä½œç”¨æ˜¯ä¿®æ”¹æ•°æ®åº“schemaã€è®©schemaæ»¡è¶³å½“å‰ç‰ˆæœ¬çš„è¦æ±‚ã€‚å½“è½¯ä»¶åŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼Œå¯¹æ•°æ®åº“çš„å˜åŒ–ä¹Ÿå°±è¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥åœ¨ä¸€ä¸ªæˆç†Ÿçš„è½¯ä»¶ä¸­ï¼Œä½ å¸¸å¸¸ä¼šçœ‹åˆ°æœ‰å¾ˆå¤šçš„æ•°æ®åº“migrationçš„ä»£ç ã€‚åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œè¿™äº›migrationå°†ä¼šè¢«ä¸€ä¸ªä¸€ä¸ªåœ°æ‰§è¡Œï¼Œä½¿å¾—ç¨‹åºæ­£å¼å¼€å§‹æ—¶ï¼Œæ•°æ®åº“çš„schemaä¹Ÿæ›´æ–°åˆ°æœ€æ–°ã€‚"}],"\n",["$","figure","figure-1",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"bash","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"bash","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"> tree migrations"}]}],"\n",["$","span","span-1",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"migrations"}]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20201103_rename_language_mappings_table.go"}]]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20201106_migration_cascade_constraints.go"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20210202_fix_cascade_for_alias_user_constraint.go"}]]}],"\n",["$","span","span-5",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20210206_drop_badges_column_add_sharing_flags.go"}]]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20210213_add_has_data_field.go"}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20210221_add_created_date_column.go"}]]}],"\n",["$","span","span-8",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20210411_add_imprint_content.go"}]]}],"\n",["$","span","span-9",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20210411_drop_migrations_table.go"}]]}],"\n",["$","span","span-10",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"â”œâ”€â”€"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" 20210806_remove_persisted_project_labels.go"}]]}],"\n",["$","span","span-11",{"data-line":"","children":" "}]]}]}]}],"\n",["$","p","p-8",{"children":"è€Œæœ‰çš„migrationï¼ˆå°¤å…¶æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„migrationï¼‰å¾ˆå¯èƒ½åŒ…å«äº†ä¸€äº›åŸç”ŸSQLã€‚åŒæ—¶ï¼Œç”±äºORMæ˜¯å¯¹æ•°æ®åº“æ“ä½œçš„æŠ½è±¡ï¼Œè€Œå†å¼ºå¤§çš„æŠ½è±¡ä¹Ÿä¸å¦‚åŸç”Ÿçš„SQLæ¥å¾—å¼ºå¤§å’Œæ–¹ä¾¿ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™ï¼Œå¼€å‘è€…ä»ç„¶ä¼šé€‰æ‹©åœ¨ä¸€äº›åœ°æ–¹ä½¿ç”¨åŸç”ŸSQLè¯­å¥çš„ç‰‡æ®µæˆ–è€…è¯­å¥æ¥å®ç°ä¸€äº›åŠŸèƒ½ã€‚è™½ç„¶SQLæœ¬èº«æ˜¯æœ‰æ ‡å‡†çš„ï¼Œä½†æ˜¯å„ä¸ªæ•°æ®åº“å‚å•†å®é™…ä¸Šè‡ªå·±å®ç°äº†å¾ˆå¤šæ–°åŠŸèƒ½ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬æœ¬ä»¥ä¸ºç†æ‰€å½“ç„¶çš„åŠŸèƒ½ï¼Œå®é™…ä¸Šå¹¶ä¸åœ¨æ ‡å‡†ä¸­ï¼Œè€Œæ˜¯æ•°æ®åº“å‚å•†è‡ªå·±å®ç°çš„ï¼Œä¸€æ—¦æ‰‹å†™SQLè€Œæ²¡æœ‰æ„è¯†åˆ°æœ‰çš„SQLå®é™…ä¸Šåªåœ¨éƒ¨åˆ†æ•°æ®åº“ä¸­å…¼å®¹ï¼Œå°±å¯èƒ½ä¼šåœ¨ä¸å…¼å®¹çš„æ•°æ®åº“ä¸­é‡åˆ°é—®é¢˜ã€‚"}],"\n",["$","p","p-9",{"children":["ä¸¾ä¸ªä¾‹å­ï¼Œwakapiçš„æŸä¸ªç‰ˆæœ¬éœ€è¦åœ¨æ•°æ®åº“çš„",["$","code","code-0",{"children":"users"}],"è¡¨ä¸­æ–°å¢ä¸€ä¸ª",["$","code","code-1",{"children":"has_data"}],"åˆ—ï¼Œè€Œå¯¹äºå·²ç»å­˜åœ¨çš„",["$","code","code-2",{"children":"users"}],"è¡¨ä¸­çš„æ•°æ®ï¼Œè¿™ä¸ªåˆ—éœ€è¦è¢«è®¾ç½®ä¸º",["$","code","code-3",{"children":"TRUE"}],"ã€‚ä»£ç ä¸­ç”¨äºæ‰§è¡Œæ­¤æ¬¡migrationçš„ä»£ç ä½¿ç”¨å¦‚ä¸‹SQLè¯­å¥å®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼š"]}],"\n",["$","figure","figure-2",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"sql","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"sql","data-theme":"one-dark-pro","style":{"display":"grid"},"children":["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"UPDATE"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" users "}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"SET"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" has_data "}],["$","span","span-4",{"style":{"color":"#56B6C2"},"children":"="}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":" TRUE "}],["$","span","span-6",{"style":{"color":"#C678DD"},"children":"WHERE"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":" TRUE;"}]]}]}]}]}],"\n",["$","p","p-10",{"children":["çœ‹ä¸Šå»æ˜¯ä¸ªå¾ˆç®€å•çš„äººç•œæ— å®³çš„SQLè¯­å¥ï¼Œå¯¹å§ï¼Ÿä½†æ˜¯è¿™ä¸ªSQLè¯­å¥åœ¨mssqlä¸­ä¸­æ˜¯éæ³•çš„ï¼Œå› ä¸ºmssqlä¸­å¹¶æ²¡æœ‰",["$","code","code-0",{"children":"TRUE"}],", ",["$","code","code-1",{"children":"FALSE"}],"å¸¸é‡ï¼sqlserverä¸­æ²¡æœ‰",["$","code","code-2",{"children":"boolean"}],"ç±»å‹ï¼Œæ‰€æœ‰è¿™äº›ç±»å‹éƒ½æ˜¯ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚çš„",["$","code","code-3",{"children":"tinyint"}],"æ¥è¡¨ç¤ºçš„ï¼Œè€Œ",["$","code","code-4",{"children":"TRUE"}],"å’Œ",["$","code","code-5",{"children":"FALSE"}],"å°±å¯¹åº”ä½¿ç”¨",["$","code","code-6",{"children":"1"}],"å’Œ",["$","code","code-7",{"children":"0"}],"æ¥è¡¨ç¤ºã€‚ä½†æ˜¯ï¼Œ",["$","code","code-8",{"children":"1"}],"å’Œ",["$","code","code-9",{"children":"0"}],"åœ¨sql serverä¸­å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„",["$","code","code-10",{"children":"boolean"}],"è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒä»¬å¹¶ä¸èƒ½ç›´æ¥ç”¨åœ¨",["$","code","code-11",{"children":"WHERE"}],"ä¸­ã€‚æ‰€ä»¥ï¼Œåœ¨MSSQLä¸­ï¼Œä»¥ä¸ŠSQLè¯­å¥å°±å¿…é¡»é‡æ–°æˆä»¥ä¸‹çš„æ ·å­ï¼š"]}],"\n",["$","figure","figure-3",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"sql","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"sql","data-theme":"one-dark-pro","style":{"display":"grid"},"children":["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"UPDATE"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" users "}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"SET"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" has_data "}],["$","span","span-4",{"style":{"color":"#56B6C2"},"children":"="}],["$","span","span-5",{"style":{"color":"#D19A66"},"children":" 1"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":";"}]]}]}]}]}],"\n",["$","h2","h2-1",{"id":"sqlè¯­å¥ç‰‡æ®µ","children":[["$","a","sqlè¯­å¥ç‰‡æ®µ",{"href":"#sqlè¯­å¥ç‰‡æ®µ","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$27","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"SQLè¯­å¥ç‰‡æ®µ"]}],"\n",["$","p","p-11",{"children":["å¦ä¸€ä¸ªæƒ…å†µæ˜¯",["$","strong","strong-0",{"children":"SQLè¯­å¥ç‰‡æ®µ"}],"ã€‚è™½ç„¶ORMçš„ä¸€å¤§ä½œç”¨å°±æ˜¯å°†è½¯ä»¶ä»£ç æ˜ å°„ä¸ºSQLè¯­å¥ï¼Œå‡å°‘æˆ‘ä»¬æ‰‹å†™SQLå¯èƒ½å¸¦æ¥çš„é”™è¯¯ï¼Œä½†æ˜¯ä¸ºäº†å®ç°çš„çµæ´»æ€§ï¼ŒORMå¸¸å¸¸åŒæ ·ä¹Ÿå…è®¸åœ¨è‡ªå·±çš„APIä¸­ç¼–å†™ä¸€äº›SQLçš„ç‰‡æ®µï¼Œè€ŒORMä¼šå°è¯•å°†è¿™äº›SQLç‰‡æ®µåµŒå…¥è¿›å»ã€‚ä½†æ˜¯è¿™äº›SQLç‰‡æ®µå¯èƒ½ä¹Ÿä¼šæœ‰ä¸å…¼å®¹çš„æƒ…å†µï¼ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç "]}],"\n",["$","figure","figure-4",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"result"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" :="}],["$","span","span-2",{"style":{"color":"#E06C75"},"children":" db"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#61AFEF"},"children":"Table"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-6",{"style":{"color":"#98C379"},"children":"\"summaries AS s1\""}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":")."}]]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\t\t\tWhere"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"\"s1.id IN ?\""}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-4",{"style":{"color":"#E06C75"},"children":"faultyIds"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":")."}]]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\t\t\tUpdate"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"\"num_heartbeats\""}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-4",{"style":{"color":"#98C379"},"children":"\"3\""}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":")"}]]}]]}]}]}],"\n",["$","p","p-12",{"children":["ä¸Šè¿°gormæ•°æ®åº“ä»“åº“å°†ä¼šè¢«æ˜ å°„ä¸ºç±»å‹ä»¥ä¸‹çš„SQLè¯­å¥ã€‚æ³¨æ„",["$","code","code-0",{"children":"Table"}],"å’Œ",["$","code","code-1",{"children":"Where"}],"æ–¹æ³•çš„å‚æ•°ä¸ä¸‹åˆ—SQLè¯­å¥ä¸­å¯¹åº”çš„è¯­å¥çš„å¯¹åº”å…³ç³»ã€‚"]}],"\n",["$","figure","figure-5",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"sql","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"sql","data-theme":"one-dark-pro","style":{"display":"grid"},"children":["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"update"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" summaries "}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"AS"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" s1 "}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":"set"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":" num_heartbeats "}],["$","span","span-6",{"style":{"color":"#56B6C2"},"children":"="}],["$","span","span-7",{"style":{"color":"#D19A66"},"children":" 3"}],["$","span","span-8",{"style":{"color":"#C678DD"},"children":" where"}],["$","span","span-9",{"style":{"color":"#D19A66"},"children":" s1"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-11",{"style":{"color":"#D19A66"},"children":"id"}],["$","span","span-12",{"style":{"color":"#C678DD"},"children":" IN"}],["$","span","span-13",{"style":{"color":"#ABB2BF"},"children":" ?"}]]}]}]}]}],"\n",["$","p","p-13",{"children":["æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆç®€å•ï¼Ÿä½†æ˜¯MSSQLä»ç„¶ä¸æ”¯æŒï¼MSSQLä¸æ”¯æŒåœ¨",["$","code","code-0",{"children":"update"}],"æŒè¯­å¥ä¸­ç»™è¡¨æ–°å¢ä¸€ä¸ªåˆ«åï¼Œæ‰€ä»¥ä»¥ä¸ŠSQLè¯­å¥ä¸­çš„",["$","code","code-1",{"children":"AS s1"}],"å¿…é¡»è¢«å»æ‰ã€‚"]}],"\n",["$","h2","h2-2",{"id":"é‡ç”¨dialectorçš„é€»è¾‘ä¸ºå…³é”®è¯åŠ ä¸Šå¼•å·","children":[["$","a","é‡ç”¨dialectorçš„é€»è¾‘ä¸ºå…³é”®è¯åŠ ä¸Šå¼•å·",{"href":"#é‡ç”¨dialectorçš„é€»è¾‘ä¸ºå…³é”®è¯åŠ ä¸Šå¼•å·","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$28","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"é‡ç”¨Dialectorçš„é€»è¾‘ï¼Œä¸ºå…³é”®è¯åŠ ä¸Šå¼•å·"]}],"\n",["$","p","p-14",{"children":"å†çœ‹ä¸€ä¸ªSQLè¯­å¥ç‰‡æ®µï¼š"}],"\n",["$","figure","figure-6",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"r"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-2",{"style":{"color":"#E06C75"},"children":"db"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#61AFEF"},"children":"Model"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-6",{"style":{"color":"#C678DD"},"children":"&"}],["$","span","span-7",{"style":{"color":"#E5C07B"},"children":"models"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-9",{"style":{"color":"#E5C07B"},"children":"User"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":"{})."}],["$","span","span-11",{"style":{"color":"#61AFEF"},"children":"Select"}],["$","span","span-12",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-13",{"style":{"color":"#98C379"},"children":"\"users.id as user, max(time) as time\""}],["$","span","span-14",{"style":{"color":"#ABB2BF"},"children":")."}]]}]}]}]}],"\n",["$","p","p-15",{"children":"è¿™æ®µSQLè¯­å¥ä¸€èˆ¬ä¼šè¢«æ˜ å°„ä¸ºï¼š"}],"\n",["$","figure","figure-7",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"sql","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"sql","data-theme":"one-dark-pro","style":{"display":"grid"},"children":["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"select"}],["$","span","span-1",{"style":{"color":"#D19A66"},"children":" users"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#D19A66"},"children":"id"}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":" as"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":" user, "}],["$","span","span-6",{"style":{"color":"#56B6C2"},"children":"max"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-8",{"style":{"color":"#C678DD"},"children":"time"}],["$","span","span-9",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-10",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-11",{"style":{"color":"#C678DD"},"children":" time"}],["$","span","span-12",{"style":{"color":"#C678DD"},"children":" from"}],["$","span","span-13",{"style":{"color":"#ABB2BF"},"children":" users;"}]]}]}]}]}],"\n",["$","p","p-16",{"children":["æœ‰é—®é¢˜å—ï¼Ÿæœ‰ï¼",["$","code","code-0",{"children":"user"}],"åœ¨MSSQLä¸­æ˜¯å…³é”®è¯ï¼Œè¦ä½œä¸ºæ ‡è¯†ç¬¦ä½¿ç”¨å¿…é¡»ä½¿ç”¨",["$","code","code-1",{"children":"\"\""}],"æˆ–è€…",["$","code","code-2",{"children":"[]"}],"å°†å®ƒåŒ…è£¹èµ·æ¥ï¼è€Œ",["$","code","code-3",{"children":"user"}],"åœ¨mysqlç­‰æ•°æ®åº“å¼•æ“ä¸­éƒ½ä¸æ˜¯å…³é”®è¯ï¼Œå› æ­¤å¯ä»¥éšæ„ç›´æ¥ä½¿ç”¨ã€‚"]}],"\n",["$","p","p-17",{"children":["è¿™ä¸ªå°†å…³é”®è¯ä½œä¸ºå­—ç¬¦ä¸²ä½¿ç”¨çš„è¿‡ç¨‹å®é™…ä¸Šç¼–ç¨‹ä¸­å¾ˆå¸¸è§ï¼Œè¢«ç§°ä¸º",["$","code","code-0",{"children":"escape"}],"ï¼Œæˆ–è€…æ›´ç®€å•çš„å«",["$","code","code-1",{"children":"quote"}],"ï¼ŒåŠ å¼•å·ã€‚ä½†æ˜¯æ›´å‘çš„æ˜¯ï¼Œä¸åŒçš„SQLå¼•æ“æ‰€ä½¿ç”¨çš„åŠ å¼•å·çš„æ–¹æ³•ä¸ä¸€æ ·ã€‚MSSQLä½¿ç”¨çš„æ˜¯",["$","code","code-2",{"children":"\"\""}],"æˆ–è€…",["$","code","code-3",{"children":"[]"}],"ï¼Œä½†æ˜¯mysqlä½¿ç”¨çš„æ˜¯`ã€‚å¦‚ä½•é€šè¿‡ä¸€æ®µä»£ç æ¥ä¸ºä¸åŒçš„æ•°æ®åº“åŠ ä¸Šæ­£ç¡®çš„å¼•å·å‘¢ï¼Ÿ"]}],"\n",["$","p","p-18",{"children":["å…¶å®ï¼Œè¿™ä¸ªåŠ å¼•å·çš„è¿‡ç¨‹å®åœ¨æ˜¯éå¸¸å¸¸è§ï¼Œåªè¦ORMéœ€è¦å°†ç¨‹åºå‘˜æ‰€å†™çš„åå­—ï¼ˆè¡¨åã€åˆ—åç­‰ï¼‰æ˜ å°„åˆ°SQLï¼Œé‚£ä¹ˆå°±éœ€è¦è€ƒè™‘ç»™è¿™äº›åå­—å«ä¸Šå¼•å·ï¼Œé˜²æ­¢è¿™äº›åå­—å’ŒSQLè‡ªå·±çš„å…³é”®è¯å†²çªã€‚å¦‚æœä½ å†™ä¸€ä¸ªåå­—å«",["$","code","code-0",{"children":"select"}],"çš„è¡¨ï¼Œæ²¡æœ‰è¿™æ®µé€»è¾‘ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨å°±æ²¡æ³•é€šè¿‡ORMæ¥æ˜ å°„æˆSQLäº†ï¼"]}],"\n",["$","p","p-19",{"children":"å› æ­¤ï¼Œæ ¹æ®Don't Repeat YourselfåŸåˆ™ï¼ŒORMä¸ºæ•°æ®åº“ç³»ç»Ÿçš„é€‚é…å™¨ä¸­è‚¯å®šä¼šæœ‰å¯¹åº”çš„é€»è¾‘ã€‚è€Œæˆ‘ä»¬ä¸å…¶è‡ªå·±ç¼–å†™è¿™ä¸ªå¤„ç†é€»è¾‘ï¼Œæœ€å¥½çš„æ–¹æ³•å½“ç„¶æ˜¯è°ƒç”¨é€‚é…å™¨ä¸­å·²ç»å†™å¥½çš„é€»è¾‘äº†ã€‚"}],"\n",["$","p","p-20",{"children":["gormä½¿ç”¨",["$","code","code-0",{"children":"Dialector"}],"æ¥å£ä½œä¸ºORMæ”¯æŒä¸åŒæ•°æ®åº“ç³»ç»Ÿçš„é€‚é…å™¨çš„æ¥å£ï¼Œæ‰€æœ‰gormæ”¯æŒçš„æ•°æ®åº“éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å®ç°äº†",["$","code","code-1",{"children":"Dialector"}],"æ¥å£çš„",["$","code","code-2",{"children":"Dialector"}],"ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯å»çœ‹çœ‹gormçš„",["$","code","code-3",{"children":"Dialector"}],"é‡Œå®šä¹‰äº†å“ªäº›æ¥å£ã€‚"]}],"\n",["$","figure","figure-8",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/go-gorm/gorm/blob/0123dd45094295fade41e13550cd305eb5e3a848/interfaces.go#L12C1-L21C2"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" Dialector"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" interface"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tName"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"() "}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"string"}]]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tInitialize"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"*"}],["$","span","span-3",{"style":{"color":"#E5C07B"},"children":"DB"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-5",{"style":{"color":"#C678DD"},"children":"error"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tMigrator"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"db"}],["$","span","span-3",{"style":{"color":"#C678DD"},"children":" *"}],["$","span","span-4",{"style":{"color":"#E5C07B"},"children":"DB"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-6",{"style":{"color":"#E5C07B"},"children":"Migrator"}]]}],"\n",["$","span","span-5",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tDataTypeOf"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"*"}],["$","span","span-3",{"style":{"color":"#E5C07B"},"children":"schema"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-5",{"style":{"color":"#E5C07B"},"children":"Field"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-7",{"style":{"color":"#C678DD"},"children":"string"}]]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tDefaultValueOf"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"*"}],["$","span","span-3",{"style":{"color":"#E5C07B"},"children":"schema"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-5",{"style":{"color":"#E5C07B"},"children":"Field"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-7",{"style":{"color":"#E5C07B"},"children":"clause"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-9",{"style":{"color":"#E5C07B"},"children":"Expression"}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tBindVarTo"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"writer"}],["$","span","span-3",{"style":{"color":"#E5C07B"},"children":" clause"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-5",{"style":{"color":"#E5C07B"},"children":"Writer"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-7",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"stmt"}],["$","span","span-8",{"style":{"color":"#C678DD"},"children":" *"}],["$","span","span-9",{"style":{"color":"#E5C07B"},"children":"Statement"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-11",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"v"}],["$","span","span-12",{"style":{"color":"#C678DD"},"children":" interface"}],["$","span","span-13",{"style":{"color":"#ABB2BF"},"children":"{})"}]]}],"\n",["$","span","span-8",{"data-line":"","data-highlighted-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tQuoteTo"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"clause"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#E5C07B"},"children":"Writer"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-6",{"style":{"color":"#C678DD"},"children":"string"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":")"}]]}],"\n",["$","span","span-9",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tExplain"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"sql"}],["$","span","span-3",{"style":{"color":"#C678DD"},"children":" string"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-5",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"vars"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":" ..."}],["$","span","span-7",{"style":{"color":"#C678DD"},"children":"interface"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":"{}) "}],["$","span","span-9",{"style":{"color":"#C678DD"},"children":"string"}]]}],"\n",["$","span","span-10",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-21",{"children":["ä»åå­—åˆ¤æ–­ï¼Œè¿™ä¸ª",["$","code","code-0",{"children":"QuoteTo"}],"æ–¹æ³•ä¼¼ä¹å°±æ˜¯æˆ‘ä»¬è¦çš„æ¥å£ã€‚å†éšä¾¿ç‚¹å¼€ä¸€ä¸ªdialectorå®ç°çš„ä»£ç æµè§ˆä¸€ä¸‹ï¼Œå°±èƒ½ç¡®å®šï¼Œ",["$","code","code-1",{"children":"QuoteTo"}],"å°±æ˜¯åŠ å¼•å·çš„æ–¹æ³•ã€‚"]}],"\n",["$","p","p-22",{"children":["å¯æ˜¯è¿™ä¸ªæ–¹æ³•çœ‹ä¸Šå»å’Œæˆ‘ä»¬æƒ³è±¡ä¸­çš„ä¸å¤ªä¸€æ ·ï¼šæˆ‘ä»¬é¢„æœŸè¿™ä¸ªåŠŸèƒ½æ˜¯ä¸€ä¸ª",["$","code","code-0",{"children":"(string) => string"}],"çš„å‡½æ•°ï¼Œè¿™é‡Œæ€ä¹ˆæ˜¯ä¸€ä¸ª",["$","code","code-1",{"children":"(clause.Writer, string) => void"}],"çš„å‡½æ•°ï¼Œè¿™ä¸ª",["$","code","code-2",{"children":"clause.Writer"}],"æ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ"]}],"\n",["$","p","p-23",{"children":["ç”±äºæ‹¼æ¥SQLè¯´åˆ°åº•ï¼Œå°±æ˜¯è¦ç”Ÿæˆå„ä¸ªSQLçš„ç‰‡æ®µï¼Œç„¶åå°†è¿™äº›ç‰‡æ®µçš„å­—ç¬¦ä¸²æ‹¼æ¥èµ·æ¥ã€‚åœ¨ç»å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€é‡Œï¼Œ",["$","code","code-0",{"children":"string"}],"éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥æ‹¼æ¥å­—ç¬¦ä¸²å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åæŠŠä¸¤ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹å¤åˆ¶è¿›å»ã€‚è¿™ä¸ªè¿‡ç¨‹å¦‚æœè¿›è¡Œå¤ªå¤šæ¬¡ï¼Œå°±éå¸¸æµªè´¹æ—¶é—´å’Œå†…å­˜ã€‚æ‰€ä»¥ç¼–ç¨‹è¯­è¨€å¸¸å¸¸ä¼šæä¾›ä¸€ä¸ª",["$","strong","strong-0",{"children":"ç»„è£…å­—ç¬¦ä¸²çš„å·¥å…·ç±»"}],"ã€‚è¿™ä¸ªå·¥å…·ç±»å¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ª",["$","strong","strong-1",{"children":"å¯å˜"}],"çš„å­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨è¿™ä¸ª_å­—ç¬¦ä¸²_çš„åé¢å¢åŠ æ–°çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡æ“ä½œéƒ½åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚è€Œè¿™ä¸ª",["$","code","code-1",{"children":"Writer"}],"æ¥å£ï¼Œå°±æ˜¯gormå®šä¹‰çš„ä¸€ä¸ªè¿™æ ·çš„èƒ½å¤Ÿ",["$","strong","strong-2",{"children":"ç»„è£…å­—ç¬¦ä¸²çš„å·¥å…·ç±»"}],"æ‰€éœ€è¦å®ç°çš„æ¥å£ã€‚è¿™ä¸ª",["$","code","code-2",{"children":"Writer"}],"æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š"]}],"\n",["$","figure","figure-9",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/go-gorm/gorm/blob/0123dd45094295fade41e13550cd305eb5e3a848/clause/clause.go#L13"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" Writer"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" interface"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tWriteByte"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"byte"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":"error"}]]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"\tWriteString"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"string"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":") ("}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":"int"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-6",{"style":{"color":"#C678DD"},"children":"error"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":")"}]]}],"\n",["$","span","span-4",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-24",{"children":["å¾ˆç®€å•ï¼Œå¾ˆç›´ç™½ï¼š",["$","code","code-0",{"children":"WriteByte"}],"ï¼šåœ¨åé¢å¢åŠ ä¸€ä¸ªå­—ç¬¦ï¼›",["$","code","code-1",{"children":"WriteString"}],"ï¼Œåœ¨åé¢å¢åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚"]}],"\n",["$","p","p-25",{"children":["ç†Ÿæ‚‰Goçš„åŒå­¦å¯èƒ½ä¼šè¯´äº†ï¼šå•Šï¼Œè¿™ä¸ªæ¥å£çœ‹ä¸Šå»éå¸¸ç†Ÿæ‚‰ï¼ŒåŸç”Ÿçš„",["$","code","code-0",{"children":"strings.Builder"}],"å°±æ˜¯ç”¨æ¥åšè¿™ä¸ªäº‹æƒ…çš„ï¼Œè€Œä¸”ä¹Ÿæœ‰è¿™ä¸¤ä¸ªæ–¹æ³•ï¼æ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ª",["$","code","code-1",{"children":"strings.Builder"}],"æ¥ä½œä¸ºè¿™ä¸ª",["$","code","code-2",{"children":"clause.Writer"}],"ï¼Ÿ"]}],"\n",["$","p","p-26",{"children":["æ­£ç¡®ï¼æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ª",["$","code","code-0",{"children":"*strings.Builder"}],"æ¥ä½œä¸º",["$","code","code-1",{"children":"clause.Writer"}],"ï¼ˆç”¨æŒ‡é’ˆçš„åŸå› æ˜¯è¿™ä¸ª",["$","code","code-2",{"children":"strings.Builder"}],"çš„è¿™ä¸¤ä¸ªæˆå‘˜æ–¹æ³•æ˜¯ä½¿ç”¨çš„æŒ‡é’ˆæ¥æ”¶è€…è€Œä¸æ˜¯å€¼æ¥æ”¶è€…ï¼Œæ‰€ä»¥åªæœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹æ‰ç®—å®ç°äº†è¿™ä¸ªæ¥å£ã€‚å…·ä½“å…³äºæŒ‡é’ˆæ¥æ”¶è€…å’Œå€¼æ¥æ”¶è€…çš„åŒºåˆ«æˆ‘ä»¬å°±ä¸åœ¨è¿™é‡Œä»‹ç»äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å­¦ä¹ ä¸€ä¸‹Goè¯­è¨€ï¼‰ï¼Œå¹¶åœ¨è°ƒç”¨åè·å–è¿™ä¸ª",["$","code","code-3",{"children":"builder"}],"æœ€ç»ˆçš„å­—ç¬¦ä¸²ï¼Œè¿™æ ·å°±ç›´æ¥è°ƒç”¨äº†",["$","code","code-4",{"children":"dialector"}],"ä¸­å®ç°äº†åŠ å¼•å·é€»è¾‘ã€‚"]}],"\n",["$","figure","figure-10",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"func"}],["$","span","span-1",{"style":{"color":"#61AFEF"},"children":" QuoteDbIdentifier"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-3",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"db"}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":" *"}],["$","span","span-5",{"style":{"color":"#E5C07B"},"children":"gorm"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-7",{"style":{"color":"#E5C07B"},"children":"DB"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-9",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"identifier"}],["$","span","span-10",{"style":{"color":"#C678DD"},"children":" string"}],["$","span","span-11",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-12",{"style":{"color":"#C678DD"},"children":"string"}],["$","span","span-13",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tbuilder"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" :="}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" &"}],["$","span","span-3",{"style":{"color":"#E5C07B"},"children":"strings"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-5",{"style":{"color":"#E5C07B"},"children":"Builder"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"{}"}]]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tdb"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-2",{"style":{"color":"#E06C75"},"children":"Dialector"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#61AFEF"},"children":"QuoteTo"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-6",{"style":{"color":"#E06C75"},"children":"builder"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-8",{"style":{"color":"#E06C75"},"children":"identifier"}],["$","span","span-9",{"style":{"color":"#ABB2BF"},"children":")"}]]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\treturn"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" builder"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#61AFEF"},"children":"String"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"()"}]]}],"\n",["$","span","span-4",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-27",{"children":"ç„¶åï¼Œæˆ‘ä»¬å°†æ­¤å‡½æ•°ç”¨åœ¨æ‰€æœ‰éœ€è¦åœ¨SQLç‰‡æ®µä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„åå­—çš„åœ°æ–¹ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±é‡ç”¨äº†dialectorçš„é€»è¾‘ï¼Œç”¨åŒä¸€å¥—ä»£ç å…¼å®¹äº†æ‰€æœ‰çš„æ•°æ®åº“ã€‚"}],"\n",["$","figure","figure-11",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"r"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-2",{"style":{"color":"#E06C75"},"children":"db"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#61AFEF"},"children":"Model"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-6",{"style":{"color":"#C678DD"},"children":"&"}],["$","span","span-7",{"style":{"color":"#E5C07B"},"children":"models"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-9",{"style":{"color":"#E5C07B"},"children":"User"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":"{})."}],["$","span","span-11",{"style":{"color":"#61AFEF"},"children":"Select"}],["$","span","span-12",{"style":{"color":"#ABB2BF"},"children":"("}]]}],"\n",["$","span","span-1",{"data-line":"","data-highlighted-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  fmt"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-2",{"style":{"color":"#61AFEF"},"children":"Sprintf"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-4",{"style":{"color":"#98C379"},"children":"\"users.id as "}],["$","span","span-5",{"style":{"color":"#D19A66"},"children":"%s"}],["$","span","span-6",{"style":{"color":"#98C379"},"children":", max(time) as time\""}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":"), "}],["$","span","span-8",{"style":{"color":"#E06C75"},"children":"utils"}],["$","span","span-9",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-10",{"style":{"color":"#61AFEF"},"children":"QuoteDbIndentifier"}],["$","span","span-11",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-12",{"style":{"color":"#E06C75"},"children":"r"}],["$","span","span-13",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-14",{"style":{"color":"#E06C75"},"children":"db"}],["$","span","span-15",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-16",{"style":{"color":"#98C379"},"children":"\"user\""}],["$","span","span-17",{"style":{"color":"#ABB2BF"},"children":")"}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":")"}]}]]}]}]}],"\n",["$","h2","h2-3",{"id":"é‡å†™ä¸æ”¯æŒçš„åŠŸèƒ½","children":[["$","a","é‡å†™ä¸æ”¯æŒçš„åŠŸèƒ½",{"href":"#é‡å†™ä¸æ”¯æŒçš„åŠŸèƒ½","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$29","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"é‡å†™ä¸æ”¯æŒçš„åŠŸèƒ½"]}],"\n",["$","p","p-28",{"children":"è€Œåœ¨è¿›ä¸€æ­¥æŸ¥æ‰¾å¹¶ä¿®æ”¹åŸç”ŸSQLçš„è¯­å¥ä¸­ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€æ®µå¦‚ä¸‹çš„åŸç”ŸSQLè¯­å¥ï¼Œç›´æ¥è®©æˆ‘çœ¼å‰ä¸€é»‘ã€‚"}],"\n",["$","figure","figure-12",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"sql","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"sql","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"with"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" projects "}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" ("}]]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tselect"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" project, user_id, "}],["$","span","span-2",{"style":{"color":"#56B6C2"},"children":"min"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":"time"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-6",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-7",{"style":{"color":"#C678DD"},"children":" first"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-9",{"style":{"color":"#56B6C2"},"children":"max"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-11",{"style":{"color":"#C678DD"},"children":"time"}],["$","span","span-12",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-13",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-14",{"style":{"color":"#C678DD"},"children":" last"}],["$","span","span-15",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-16",{"style":{"color":"#56B6C2"},"children":"count"}],["$","span","span-17",{"style":{"color":"#ABB2BF"},"children":"(*) "}],["$","span","span-18",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-19",{"style":{"color":"#ABB2BF"},"children":" cnt"}]]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tfrom"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" heartbeats"}]]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\twhere"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" user_id "}],["$","span","span-2",{"style":{"color":"#56B6C2"},"children":"="}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" ? "}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":"and"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":" project "}],["$","span","span-6",{"style":{"color":"#56B6C2"},"children":"!="}],["$","span","span-7",{"style":{"color":"#98C379"},"children":" ''"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tand"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":" time"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" between"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" ? "}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":"and"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":" ?"}]]}],"\n",["$","span","span-5",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tand"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":" language"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" is not null"}],["$","span","span-3",{"style":{"color":"#C678DD"},"children":" and"}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":" language"}],["$","span","span-5",{"style":{"color":"#56B6C2"},"children":" !="}],["$","span","span-6",{"style":{"color":"#98C379"},"children":" ''"}],["$","span","span-7",{"style":{"color":"#C678DD"},"children":" and"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":" project "}],["$","span","span-9",{"style":{"color":"#56B6C2"},"children":"!="}],["$","span","span-10",{"style":{"color":"#98C379"},"children":" ''"}]]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tgroup by"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" project, user_id"}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\torder by"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":" last"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" desc"}]]}],"\n",["$","span","span-8",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tlimit"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" ? offset ? )"}]]}],"\n",["$","span","span-9",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"select distinct"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" project, "}],["$","span","span-2",{"style":{"color":"#56B6C2"},"children":"min"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-4",{"style":{"color":"#C678DD"},"children":"first"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-6",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-7",{"style":{"color":"#C678DD"},"children":" first"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-9",{"style":{"color":"#56B6C2"},"children":"min"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-11",{"style":{"color":"#C678DD"},"children":"last"}],["$","span","span-12",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-13",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-14",{"style":{"color":"#C678DD"},"children":" last"}],["$","span","span-15",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-16",{"style":{"color":"#56B6C2"},"children":"min"}],["$","span","span-17",{"style":{"color":"#ABB2BF"},"children":"(cnt) "}],["$","span","span-18",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-19",{"style":{"color":"#ABB2BF"},"children":" count, "}],["$","span","span-20",{"style":{"color":"#56B6C2"},"children":"first_value"}],["$","span","span-21",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-22",{"style":{"color":"#C678DD"},"children":"language"}],["$","span","span-23",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-24",{"style":{"color":"#C678DD"},"children":"over"}],["$","span","span-25",{"style":{"color":"#ABB2BF"},"children":" ("}],["$","span","span-26",{"style":{"color":"#C678DD"},"children":"partition"}],["$","span","span-27",{"style":{"color":"#C678DD"},"children":" by"}],["$","span","span-28",{"style":{"color":"#ABB2BF"},"children":" project "}],["$","span","span-29",{"style":{"color":"#C678DD"},"children":"order by"}],["$","span","span-30",{"style":{"color":"#56B6C2"},"children":" count"}],["$","span","span-31",{"style":{"color":"#ABB2BF"},"children":"(*) "}],["$","span","span-32",{"style":{"color":"#C678DD"},"children":"desc"}],["$","span","span-33",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-34",{"style":{"color":"#C678DD"},"children":"as"}],["$","span","span-35",{"style":{"color":"#ABB2BF"},"children":" top_language"}]]}],"\n",["$","span","span-10",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tfrom"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" heartbeats"}]]}],"\n",["$","span","span-11",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tinner join"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" projects "}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"using"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" (project, user_id)"}]]}],"\n",["$","span","span-12",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\tgroup by"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" project, "}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"language"}]]}],"\n",["$","span","span-13",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\t\t\torder by"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":" last"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" desc"}]]}]]}]}]}],"\n",["$","p","p-29",{"children":"è¿™æ®µSQLè¯­å¥å°±è¿™æ ·èµ¤è£¸è£¸åœ°å†™åœ¨ä»£ç é‡Œã€‚ç»è¿‡ä»¥ä¸Šå‡ ä¸ªä¾‹å­ï¼Œæ˜¯ä¸æ˜¯ä»¥ä¸ºè¿™ä¸ªSQLåœ¨MSSQLä¸­å¿…å®šé—®é¢˜å·¨å¤§ï¼Œä¸é‡æ–°å†™ä¸€ä»½æ ¹æœ¬è·‘ä¸èµ·æ¥ï¼Ÿ"}],"\n",["$","p","p-30",{"children":"æˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ã€‚è€Œæˆ‘è‡ªå·±å¯¹SQL Serverå¹¶æ²¡æœ‰é‚£ä¹ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥èªæ˜çš„æˆ‘ï¼Œåœ¨ç»™ä¸€äº›åå­—å«ä¸Šå¼•å·åï¼Œç›´æ¥æŠŠè¿™æ®µä»£ç æ‰”ç»™äº†GitHub Copilotï¼Œè®©å®ƒå¸®æˆ‘æ”¹æˆSQL Serverèƒ½ç”¨çš„ã€‚åç›´è§‰çš„æ˜¯ï¼Œè¿™æ®µä»£ç å®é™…ä¸Šé—®é¢˜æ²¡é‚£ä¹ˆå¤§ï¼š"}],"\n",["$","p","p-31",{"children":"$L2a"}],"\n",["$","p","p-32",{"children":"å…·ä½“æ¥è¯´ï¼Œé™¤äº†ç¬¬ä¸‰ç‚¹å»æ‰äº†ä¸éœ€è¦çš„å¼•å·åï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š"}],"\n",["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":["ä¸æ”¯æŒ",["$","code","code-0",{"children":"join using"}],"ï¼Œéœ€è¦ä½¿ç”¨å¸¸è§„çš„",["$","code","code-1",{"children":"join on"}],"ä»£æ›¿"]}],"\n",["$","li","li-1",{"children":["ä¸æ”¯æŒ",["$","code","code-0",{"children":"limit offset"}],"ã€‚æŸ¥æ‰¾äº†ä¸€ä¸‹ï¼Œmssqlå¯ä»¥ä½¿ç”¨",["$","code","code-1",{"children":"offset ? ROWS fetch next ? rows only"}],"æ¥ä»£æ›¿ï¼Œå½“ç„¶",["$","code","code-2",{"children":"limit"}],"å’Œ",["$","code","code-3",{"children":"offset"}],"çš„å‚æ•°é¡ºåºæ˜¯åè¿‡æ¥çš„"]}],"\n"]}],"\n",["$","p","p-33",{"children":"å•Šï¼ŒåŸæ¥è¿™ä¹ˆç®€å•ï¼ç”±äºéœ€è¦ä¿®æ”¹çš„åœ°æ–¹å¹¶ä¸å¤šï¼Œäºæ˜¯æˆ‘å°±ç®€å•çš„é€šè¿‡ifåˆ¤æ–­ï¼Œå°†å…¶ä¸­SQL Serverä¸å…¼å®¹çš„éƒ¨åˆ†ä¿®æ”¹ä¸ºSQL Serverå…¼å®¹çš„SQLè¯­å¥ï¼Œè¿™æ®µSQLè¯­å¥ä¹Ÿå°±å®Œæˆäº†ã€‚"}],"\n",["$","h2","h2-4",{"id":"æŠŠåŒä¸€ä¸ªgoç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—ç±»å‹","children":[["$","a","æŠŠåŒä¸€ä¸ªgoç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—ç±»å‹",{"href":"#æŠŠåŒä¸€ä¸ªgoç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—ç±»å‹","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$2b","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"æŠŠåŒä¸€ä¸ªgoç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—ç±»å‹"]}],"\n",["$","p","p-34",{"children":"ä¿®æ”¹äº†è¿™äº›SQLè¯­å¥åï¼Œç¨‹åºä»ç„¶è¿è¡Œä¸èµ·æ¥ï¼Œä»”ç»†ä¸€çœ‹ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š"}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"children":"mssql: A table can only have one timestamp. Because table 'users' already has one, the column 'last_logged_in_at' cannot be added.\n"}]}],"\n",["$","p","p-35",{"children":["ç®€å•ç¿»è¯‘ï¼Œä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªç±»å‹ä¸º",["$","code","code-0",{"children":"timestamp"}],"çš„åˆ—ï¼Œè€Œ",["$","code","code-1",{"children":"users"}],"ä¸­æœ‰å¤šä¸ªåˆ—éƒ½æ˜¯",["$","code","code-2",{"children":"timestamp"}],"çš„ç±»å‹ï¼Œæ‰€ä»¥SQL ServeræŠ¥é”™äº†ã€‚"]}],"\n",["$","p","p-36",{"children":["å»ä»£ç ä¸­ä¸€çœ‹ï¼Œ",["$","code","code-0",{"children":"users"}],"è¡¨å¯¹åº”çš„",["$","code","code-1",{"children":"User"}],"structç¡®å®æœ‰å¥½å‡ ä¸ªå­—æ®µéƒ½é€šè¿‡",["$","a","a-0",{"href":"https://gorm.io/docs/models.html#Fields-Tags","children":"gormçš„field tagåŠŸèƒ½"}],["$","code","code-2",{"children":"type:timestamp"}],"ï¼Œç¡®å®šäº†åœ¨æ•°æ®åº“ä¸­è¿™äº›åˆ—éœ€è¦æ˜ å°„ä¸º",["$","code","code-3",{"children":"timestamp"}],"ç±»å‹ã€‚"]}],"\n",["$","figure","figure-13",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/fc483cc35cb06313da8231424d1d85b291655881/models/user.go#L17"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" User"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" struct"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  CreatedAt"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"           CustomTime"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"  `gorm:\"type:"}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"timestamp"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"; default:CURRENT_TIMESTAMP\" swaggertype:\"string\" format:\"date\" example:\"2006-01-02 15:04:05.000\"`"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tLastLoggedInAt"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"      CustomTime"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"  `gorm:\"type:"}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"timestamp"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"; default:CURRENT_TIMESTAMP\" swaggertype:\"string\" format:\"date\" example:\"2006-01-02 15:04:05.000\"`"}]]}],"\n",["$","span","span-5",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  SubscribedUntil"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":"     *"}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"CustomTime"}],["$","span","span-3",{"style":{"color":"#98C379"},"children":" `json:\"-\" gorm:\"type:"}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"timestamp"}]}],["$","span","span-4",{"style":{"color":"#98C379"},"children":"\" swaggertype:\"string\" format:\"date\" example:\"2006-01-02 15:04:05.000\"`"}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tSubscriptionRenewal"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":" *"}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"CustomTime"}],["$","span","span-3",{"style":{"color":"#98C379"},"children":" `json:\"-\" gorm:\"type:"}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"timestamp"}]}],["$","span","span-4",{"style":{"color":"#98C379"},"children":"\" swaggertype:\"string\" format:\"date\" example:\"2006-01-02 15:04:05.000\"`"}]]}],"\n",["$","span","span-8",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-37",{"children":[["$","code","code-0",{"children":"timestamp"}],"æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼ŸMySQLä¸éƒ½æ˜¯ä½¿ç”¨",["$","code","code-1",{"children":"timestamp"}],"æ¥ä»£è¡¨æ—¶é—´ç±»å‹å—ï¼Ÿå»æŸ¥æ‰¾",["$","code","code-2",{"children":"sql server timestamp"}],"ï¼Œæˆ‘æ‰å‘ç°ï¼ŒSQL Serveré‡Œçš„",["$","code","code-3",{"children":"timestamp"}],"çš„å«ä¹‰å’Œåˆ«çš„æ•°æ®åº“ä¸­çš„å«ä¹‰ä¸ä¸€æ ·ã€‚åœ¨åˆ«çš„æ•°æ®åº“ä¸­ï¼Œ",["$","code","code-4",{"children":"timestamp"}],"å°±æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ—¶é—´æˆ³/æ—¶é—´ç‚¹çš„ç±»å‹ï¼Œè€Œæ ¹æ®",["$","a","a-0",{"href":"https://stackoverflow.com/a/12063938","children":"è¿™ä¸ªstackoverflowå›ç­”"}],"ï¼Œ",["$","code","code-5",{"children":"sql server"}],"ä¸­çš„",["$","code","code-6",{"children":"timestamp"}],"ä¸»è¦ç”¨äºä¹è§‚é”çš„æƒ…å†µï¼ˆå…·ä½“ä¸åœ¨è¿™é‡Œé˜è¿°ï¼‰ï¼Œåªæ˜¯ç”¨æ¥æ ‡è®°æœ¬è¡Œä¸Šä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯ä¸ªè¡¨åªèƒ½å­˜åœ¨ä¸€ä¸ª",["$","code","code-7",{"children":"timestamp"}],"çš„åˆ—ã€‚è€Œåœ¨SQL Serverä¸­å¦‚æœè¦è¡¨ç¤ºä¸€ä¸ªæ—¶é—´æˆ³ï¼Œéœ€è¦ä½¿ç”¨",["$","code","code-8",{"children":"datetimeoffset"}],"ã€‚"]}],"\n",["$","p","p-38",{"children":["æ‰€ä»¥ç°åœ¨é—®é¢˜å°±å˜æˆäº†ï¼š",["$","strong","strong-0",{"children":"å¦‚ä½•å°†ä¸€ä¸ªç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—çš„ç±»å‹"}],"ã€‚"]}],"\n",["$","p","p-39",{"children":[["$","code","code-0",{"children":"type:timestamp"}],"è¿™ä¸ªtagè‚¯å®šæ˜¯ä¸èƒ½ç”¨äº†ï¼Œäºæ˜¯æˆ‘ä»¬å°±éœ€è¦æŸ¥æ‰¾æœ‰æ²¡æœ‰å…¶ä»–æ›´åŠ¨æ€çš„æ–¹æ³•ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªgoå­—æ®µæ˜ å°„åˆ°æ•°æ®åº“ä¸­çš„ç±»å‹ã€‚ç»è¿‡ä¸€ç•ªæŸ¥æ‰¾ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†",["$","a","a-0",{"href":"https://gorm.io/docs/data_types.html#GormDataTypeInterface","children":"Customize Data Type"}],"åŠŸèƒ½ã€‚gormå…è®¸å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„",["$","code","code-1",{"children":"struct"}],"ï¼Œå¹¶ç»™è¿™ä¸ª",["$","code","code-2",{"children":"struct"}],"å®ç°",["$","code","code-3",{"children":"GormDBDataTypeInterface"}],"æ¥å£ï¼Œæ¥è¿”å›è¿™ä¸ªç±»å‹çš„å­—æ®µæ‰€çœŸæ­£å¯¹åº”çš„æ•°æ®åº“ç±»å‹ã€‚"]}],"\n",["$","figure","figure-14",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" GormDBDataTypeInterface"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" interface"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"  GormDBDataType"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"*"}],["$","span","span-3",{"style":{"color":"#E5C07B"},"children":"gorm"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-5",{"style":{"color":"#E5C07B"},"children":"DB"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-7",{"style":{"color":"#C678DD"},"children":"*"}],["$","span","span-8",{"style":{"color":"#E5C07B"},"children":"schema"}],["$","span","span-9",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-10",{"style":{"color":"#E5C07B"},"children":"Field"}],["$","span","span-11",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-12",{"style":{"color":"#C678DD"},"children":"string"}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-40",{"children":["è¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯",["$","code","code-0",{"children":"gorm.DB"}],"å¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ“ä½œçš„æ•°æ®åº“å¯¹è±¡ï¼Œå¯ä»¥è·å–åˆ°å½“å‰æ­£åœ¨ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„",["$","code","code-1",{"children":"Dialector"}],"ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®",["$","code","code-2",{"children":"Dialector"}],"ç±»å‹ï¼Œæ¥è¾“å‡ºå¯¹åº”çš„æ•°æ®åº“åˆ—ç±»å‹ã€‚å¦å¤–ï¼Œè¿™ä¸ª",["$","code","code-3",{"children":"CustomTime"}],"æ­£å¥½æ˜¯ä»£ç ä¸­æ‰€å®šä¹‰çš„ä¸€ä¸ªæ–°çš„",["$","code","code-4",{"children":"struct"}],"ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨",["$","code","code-5",{"children":"CustomTime"}],"ä¸Šå®ç°è¿™ä¸ªæ¥å£ã€‚"]}],"\n",["$","p","p-41",{"children":["çœ‹æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä¸ºäº†ä»¥é˜²ä¸‡ä¸€ï¼Œæˆ‘ä»¬å†å…¨å±€æœç´¢ä¸€ä¸‹",["$","code","code-0",{"children":"type:timestamp"}],"ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„ç”¨æ³•ã€‚æœç„¶è¢«æˆ‘æ‰¾åˆ°äº†ï¼"]}],"\n",["$","figure","figure-15",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/fc483cc35cb06313da8231424d1d85b291655881/models/heartbeat.go#L27"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" Heartbeat"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" struct"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  Time"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"            CustomTime"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"time\" gorm:\"type:"}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"timestamp(3)"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"; index:idx_time; index:idx_time_user\" swaggertype:\"primitive,number\"`"}]]}],"\n",["$","span","span-4",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-5",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-42",{"children":["è¿™é‡Œç”¨åˆ°äº†",["$","code","code-0",{"children":"timestamp(3)"}],"ã€‚æ ¹æ®",["$","a","a-0",{"href":"https://dev.mysql.com/doc/refman/8.0/en/fractional-seconds.html","children":"mysqlçš„æ–‡æ¡£"}],"ï¼Œ",["$","code","code-1",{"children":"timestamp(n)"}],"ä¸­çš„",["$","code","code-2",{"children":"n"}],"æ˜¯ä»£è¡¨ç²¾ç¡®åˆ°ç§’åé¢çš„ç¬¬å‡ ä½æµ®ç‚¹ä½ï¼Œ",["$","code","code-3",{"children":"3"}],"ä»£è¡¨ç²¾ç¡®åˆ°æ¯«ç§’ï¼Œè€Œ",["$","code","code-4",{"children":"6"}],"ä»£è¡¨ç²¾ç¡®åˆ°å¾®ç§’ã€‚è€ŒSQL Serverçš„",["$","code","code-5",{"children":"datetimeoffset"}],"ä¹Ÿæ”¯æŒç±»ä¼¼çš„æ ‡è®°ï¼ˆ",["$","a","a-1",{"href":"https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-ver16","children":"æ–‡æ¡£"}],"ï¼‰ï¼Œ",["$","code","code-6",{"children":"datetimeoffset(n)"}],"ä¸­çš„",["$","code","code-7",{"children":"n"}],"ä¹ŸåŒæ ·è¡¨ç¤ºç²¾ç¡®åˆ°ç§’åé¢çš„ç¬¬å‡ ä½æµ®ç‚¹ä½ã€‚ç”±äºæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨",["$","code","code-8",{"children":"type"}],"tagï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªtagç”¨æ¥è¡¨ç¤ºè¿™ä¸ªç²¾ç¡®çš„ä½æ•°ï¼ˆæ ¹æ®sql serverçš„æ–‡æ¡£ï¼Œå°†è¿™ä¸ªä½æ•°ç§°ä¸º",["$","code","code-9",{"children":"scale"}],"ï¼‰ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨æ–°çš„",["$","code","code-10",{"children":"timeScale"}],"çš„tagï¼Œå…¶å€¼å°±æ˜¯",["$","code","code-11",{"children":"scale"}],"çš„å€¼ã€‚è€Œä¸€ä¸ªå­—æ®µä¸Šå…·ä½“æœ‰å“ªäº›tagï¼Œæ­£å¥½å¯ä»¥é€šè¿‡",["$","code","code-12",{"children":"GormDBDataType"}],"çš„ç¬¬äºŒä¸ªå‚æ•°è·å–ã€‚"]}],"\n",["$","p","p-43",{"children":["äºæ˜¯æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å®ç°äº†",["$","code","code-0",{"children":"CustomTime"}],"çš„",["$","code","code-1",{"children":"GormDBDataType"}],"æ–¹æ³•ï¼š"]}],"\n",["$","figure","figure-16",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/shared.go#L44"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"func"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" ("}],["$","span","span-2",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"j "}],["$","span","span-3",{"style":{"color":"#E5C07B"},"children":"CustomTime"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-5",{"style":{"color":"#61AFEF"},"children":"GormDBDataType"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-7",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"db"}],["$","span","span-8",{"style":{"color":"#C678DD"},"children":" *"}],["$","span","span-9",{"style":{"color":"#E5C07B"},"children":"gorm"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-11",{"style":{"color":"#E5C07B"},"children":"DB"}],["$","span","span-12",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-13",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"field"}],["$","span","span-14",{"style":{"color":"#C678DD"},"children":" *"}],["$","span","span-15",{"style":{"color":"#E5C07B"},"children":"schema"}],["$","span","span-16",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-17",{"style":{"color":"#E5C07B"},"children":"Field"}],["$","span","span-18",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-19",{"style":{"color":"#C678DD"},"children":"string"}],["$","span","span-20",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":" "}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tt"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" :="}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" \"timestamp\""}]]}],"\n",["$","span","span-4",{"data-line":"","children":" "}],"\n",["$","span","span-5",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // å¦‚æœä½¿ç”¨çš„æ˜¯SQL Server Dialectorï¼Œåˆ™å°†å…¶ç±»å‹è®¾ç½®ä¸ºdatetimeoffset"}]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\tif"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" db"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#E06C75"},"children":"Config"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":"Dialector"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-7",{"style":{"color":"#61AFEF"},"children":"Name"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":"() "}],["$","span","span-9",{"style":{"color":"#56B6C2"},"children":"=="}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":" ("}],["$","span","span-11",{"style":{"color":"#E5C07B"},"children":"sqlserver"}],["$","span","span-12",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-13",{"style":{"color":"#E5C07B"},"children":"Dialector"}],["$","span","span-14",{"style":{"color":"#ABB2BF"},"children":"{})."}],["$","span","span-15",{"style":{"color":"#61AFEF"},"children":"Name"}],["$","span","span-16",{"style":{"color":"#ABB2BF"},"children":"() {"}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\t\tt"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" ="}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" \"datetimeoffset\""}]]}],"\n",["$","span","span-8",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"\t}"}]}],"\n",["$","span","span-9",{"data-line":"","children":" "}],"\n",["$","span","span-10",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // å¦‚æœä¸€ä¸ªå±æ€§æœ‰TIMESCALEçš„tagï¼Œé‚£ä¹ˆç»™ç±»å‹åé¢å¢åŠ (n)å‚æ•°"}]}],"\n",["$","span","span-11",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // gormå°†æ‰€æœ‰gormä¸‹çš„tagçš„keyè½¬æ¢æˆäº†å…¨å¤§å†™"}]}],"\n",["$","span","span-12",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // å‚è€ƒï¼šhttps://github.com/go-gorm/gorm/blob/0123dd45094295fade41e13550cd305eb5e3a848/schema/utils.go#L35"}]}],"\n",["$","span","span-13",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\tif"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" scale"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-3",{"style":{"color":"#E06C75"},"children":"ok"}],["$","span","span-4",{"style":{"color":"#E5C07B"},"children":" :="}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":" field"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-7",{"style":{"color":"#E06C75"},"children":"TagSettings"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":"["}],["$","span","span-9",{"style":{"color":"#98C379"},"children":"\"TIMESCALE\""}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":"]; "}],["$","span","span-11",{"style":{"color":"#E06C75"},"children":"ok"}],["$","span","span-12",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-14",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\t\tt"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" +="}],["$","span","span-2",{"style":{"color":"#E06C75"},"children":" fmt"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#61AFEF"},"children":"Sprintf"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-6",{"style":{"color":"#98C379"},"children":"\"("}],["$","span","span-7",{"style":{"color":"#D19A66"},"children":"%s"}],["$","span","span-8",{"style":{"color":"#98C379"},"children":")\""}],["$","span","span-9",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-10",{"style":{"color":"#E06C75"},"children":"scale"}],["$","span","span-11",{"style":{"color":"#ABB2BF"},"children":")"}]]}],"\n",["$","span","span-15",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"\t}"}]}],"\n",["$","span","span-16",{"data-line":"","children":" "}],"\n",["$","span","span-17",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"\treturn"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" t"}]]}],"\n",["$","span","span-18",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-44",{"children":["åŒæ—¶ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„",["$","code","code-0",{"children":"timestamp"}],"éƒ½ç›´æ¥å»æ‰ï¼Œå°†",["$","code","code-1",{"children":"type:timestamp(n)"}],"ä¿®æ”¹ä¸ºäº†",["$","code","code-2",{"children":"timeScale:n"}],"ï¼š"]}],"\n",["$","figure","figure-17",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/user.go#L17"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" User"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" struct"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  CreatedAt"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"           CustomTime"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"  `gorm:\"default:CURRENT_TIMESTAMP\" swaggertype:\"string\" format:\"date\" example:\"2006-01-02 15:04:05.000\"`"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  LastLoggedInAt"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"      CustomTime"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"  `gorm:\"default:CURRENT_TIMESTAMP\" swaggertype:\"string\" format:\"date\" example:\"2006-01-02 15:04:05.000\"`"}]]}],"\n",["$","span","span-5",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  SubscribedUntil"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":"     *"}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"CustomTime"}],["$","span","span-3",{"style":{"color":"#98C379"},"children":" `json:\"-\" swaggertype:\"string\" format:\"date\" example:\"2006-01-02 15:04:05.000\"`"}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  SubscriptionRenewal"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":" *"}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"CustomTime"}],["$","span","span-3",{"style":{"color":"#98C379"},"children":" `json:\"-\" swaggertype:\"string\" format:\"date\" example:\"2006-01-02 15:04:05.000\"`"}]]}],"\n",["$","span","span-8",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}],"\n",["$","span","span-9",{"data-line":"","children":" "}],"\n",["$","span","span-10",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/heartbeat.go#L12"}]}],"\n",["$","span","span-11",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" Heartbeat"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" struct"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-12",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-13",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  Time"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"            CustomTime"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"time\" gorm:\""}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"timeScale:3"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"; index:idx_time; index:idx_time_user\" swaggertype:\"primitive,number\"`"}]]}],"\n",["$","span","span-14",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-15",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-45",{"children":"è¿™æ ·å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚"}],"\n",["$","h2","h2-5",{"id":"é¿å…åˆ›å»ºé€’å½’çš„çº§è”ä¿®æ”¹å¤–é”®çº¦æŸ","children":[["$","a","é¿å…åˆ›å»ºé€’å½’çš„çº§è”ä¿®æ”¹å¤–é”®çº¦æŸ",{"href":"#é¿å…åˆ›å»ºé€’å½’çš„çº§è”ä¿®æ”¹å¤–é”®çº¦æŸ","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$2c","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"é¿å…åˆ›å»ºé€’å½’çš„çº§è”ä¿®æ”¹å¤–é”®çº¦æŸ"]}],"\n",["$","p","p-46",{"children":"æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œåˆ°è¿™é‡Œä»ç„¶æ— æ³•å¯åŠ¨ç¨‹åºã€‚æŠ¥é”™å¦‚ä¸‹ï¼š"}],"\n",["$","figure","figure-18",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"{3}","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"{3}","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"children":"[2.938ms] [rows:0] CREATE TABLE \"summary_items\" (\"id\" bigint IDENTITY(1,1),\"summary_id\" bigint,\"type\" smallint,\"key\" nvarchar(255),\"total\" bigint,PRIMARY KEY (\"id\"),CONSTRAINT \"fk_summaries_editors\" FOREIGN KEY (\"summary_id\") REFERENCES \"summaries\"(\"id\") ON DELETE CASCADE ON UPDATE CASCADE,CONSTRAINT \"fk_summaries_operating_systems\" FOREIGN KEY (\"summary_id\") REFERENCES \"summaries\"(\"id\") ON DELETE CASCADE ON UPDATE CASCADE,CONSTRAINT \"fk_summaries_machines\" FOREIGN KEY (\"summary_id\") REFERENCES \"summaries\"(\"id\") ON DELETE CASCADE ON UPDATE CASCADE,CONSTRAINT \"fk_summaries_projects\" FOREIGN KEY (\"summary_id\") REFERENCES \"summaries\"(\"id\") ON DELETE CASCADE ON UPDATE CASCADE,CONSTRAINT \"fk_summaries_languages\" FOREIGN KEY (\"summary_id\") REFERENCES \"summaries\"(\"id\") ON DELETE CASCADE ON UPDATE CASCADE)"}]}],"\n",["$","span","span-1",{"data-line":"","children":["$","span","span-0",{"children":"2024-01-19T19:29:35.607826413+08:00 [ERROR] mssql: Could not create constraint or index. See previous errors."}]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"children":"panic: mssql: Could not create constraint or index. See previous errors."}]}]]}]}]}],"\n",["$","p","p-47",{"children":[["$","code","code-0",{"children":"Could not create constraint or index. See previous errors."}],"è¿™ä¸ªç­‰äºä»€ä¹ˆéƒ½æ²¡è¯´å˜›ï¼ŒåªçŸ¥é“åˆ›å»ºä¸€ä¸ªå¤–é”®çº¦æŸæˆ–è€…ç´¢å¼•çš„æ—¶å€™å¤±è´¥äº†ï¼Œè€Œå…¶ä»–çš„é”™è¯¯ä¿¡æ¯è¢«gormæˆ–è€…gormçš„sqlserver dialectorå¿½ç•¥äº†ã€‚è¿˜"]}],"\n",["$","p","p-48",{"children":"è¿˜å¥½æˆ‘èƒ½çœ‹åˆ°å…·ä½“æ‰§è¡Œçš„SQLè¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™æ®µSQLè¯­å¥æ‰‹åŠ¨è¾“å…¥åˆ°Azure Data Studioä¸­ï¼Œçœ‹çœ‹æ•°æ®åº“å¼•æ“åˆ°åº•æŠ¥äº†ä»€ä¹ˆé”™è¯¯ã€‚"}],"\n",["$","p","p-49",{"children":"$L2d"}],"\n",["$","blockquote","blockquote-0",{"children":["\n",["$","p","p-0",{"children":"Introducing FOREIGN KEY constraint 'fk_summaries_operating_systems' on table 'summary_items' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints."}],"\n"]}],"\n",["$","p","p-50",{"children":["çœ‹èµ·æ¥ï¼Œæ˜¯å› ä¸º",["$","code","code-0",{"children":"fk_summaries_operating_systems"}],"è¿™ä¸ªçº§è”çš„å¤–é”®ç´¢å¼•ä¼šé€ æˆçº§è”é€’å½’ï¼ˆcyclesï¼‰ã€‚å’Œå¤–é”®çº¦æŸæœ‰å…³ï¼Œè€Œå¤–é”®çº¦æŸæ˜¯é€šè¿‡gormå®šä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå»çœ‹çœ‹ä»£ç é‡Œæ¶‰åŠè¿™ä¸ªå¤–é”®çº¦æŸçš„ä¸¤ä¸ªè¡¨çš„å®šä¹‰ã€‚"]}],"\n",["$","figure","figure-19",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/fc483cc35cb06313da8231424d1d85b291655881/models/summary.go#L29"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" Summary"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" struct"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tProjects"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"         SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"projects\" gorm:\""}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"\"`"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tLanguages"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"        SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"languages\" gorm:\""}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"\"`"}]]}],"\n",["$","span","span-5",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tEditors"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"          SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"editors\" gorm:\""}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"\"`"}]]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tOperatingSystems"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"operating_systems\" gorm:\""}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"\"`"}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tMachines"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"         SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"machines\" gorm:\""}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"}]}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"\"`"}]]}],"\n",["$","span","span-8",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}],"\n",["$","span","span-9",{"data-line":"","children":" "}],"\n",["$","span","span-10",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" SummaryItems"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":" []"}],["$","span","span-3",{"style":{"color":"#C678DD"},"children":"*"}],["$","span","span-4",{"style":{"color":"#E5C07B"},"children":"SummaryItem"}]]}],"\n",["$","span","span-11",{"data-line":"","children":" "}],"\n",["$","span","span-12",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" SummaryItem"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" struct"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-13",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-14",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tSummary"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":"   *"}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"Summary"}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"      `json:\"-\" gorm:\"not null; "}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"style":{"color":"#98C379"},"children":"constraint:OnUpdate:CASCADE,OnDelete:CASCADE"}]}],["$","span","span-4",{"style":{"color":"#98C379"},"children":"\"`"}]]}],"\n",["$","span","span-15",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tSummaryID"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":" uint"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"          `json:\"-\" gorm:\"size:32\"`"}]]}],"\n",["$","span","span-16",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-51",{"children":["ä¹Ÿå°±æ˜¯è¯´ï¼Œ",["$","code","code-0",{"children":"Summary"}],"å’Œ",["$","code","code-1",{"children":"SummaryItem"}],"ä¸¤ä¸ªè¡¨æ˜¯1:mçš„å…³ç³»ï¼Œè¿™ä¸ªå…³ç³»æ˜ å°„åˆ°æ•°æ®åº“ä¸­ï¼Œä¹Ÿå°±æ˜¯",["$","code","code-2",{"children":"SummaryItem"}],"è¡¨ä¸­æœ‰åˆ°",["$","code","code-3",{"children":"Summary"}],"çš„IDçš„å¤–é”®",["$","code","code-4",{"children":"summary_id"}],"ï¼Œè€Œè¿™ä¸ªå¤–é”®çš„çº¦æŸåˆ™æ˜¯é€šè¿‡",["$","code","code-5",{"children":"Summary"}],"è¡¨ä¸­çš„tagå®šä¹‰çš„ã€‚"]}],"\n",["$","p","p-52",{"children":["è½¬å›å¤´å»çœ‹ç”Ÿæˆçš„SQLï¼Œç”Ÿæˆçš„SQLé‡Œæœ‰",["$","strong","strong-0",{"children":"5"}],"ä¸ªå®Œå…¨ç›¸åŒçš„å¤–é”®ï¼ˆ",["$","code","code-0",{"children":"fk_summaries_editors"}],", ",["$","code","code-1",{"children":"fk_summaries_operating_systems"}],"ï¼Œ",["$","code","code-2",{"children":"fk_summaries_machines"}],"ï¼Œ",["$","code","code-3",{"children":"fk_summaries_projects"}],"å’Œ",["$","code","code-4",{"children":"fk_summaries_languages"}],"ï¼‰ã€‚ç”±äºè¿™äº”ä¸ªå¤–é”®éƒ½æ˜¯çº§è”åˆ é™¤ï¼ˆ",["$","code","code-5",{"children":"ON DELETE CASCADE"}],"ï¼‰å’Œçº§è”æ›´æ–°ï¼ˆ",["$","code","code-6",{"children":"ON UPDATE CASCADE"}],"ï¼‰ï¼Œå®é™…ä¸Šç¡®å®æ˜¯ä¼šå­˜åœ¨ä¸€ä¸ªçº§è”é€’å½’ï¼šå½“ä¸€ä¸ª",["$","code","code-7",{"children":"SummaryItem"}],"è¢«åˆ é™¤ï¼Œä¼šé€ æˆå…¶å¯¹åº”çš„",["$","code","code-8",{"children":"Summary"}],"è¢«åˆ é™¤ï¼Œè€Œ",["$","code","code-9",{"children":"Summary"}],"è¢«åˆ é™¤å¯èƒ½ä¼šé€ æˆè¿™ä¸ª",["$","code","code-10",{"children":"SummaryItem"}],"ä¹Ÿè¢«åˆ é™¤ã€‚"]}],"\n",["$","p","p-53",{"children":["é‚£é—®é¢˜åˆæ¥äº†ï¼Œé‚£ä¸ºä»€ä¹ˆä¹‹å‰åœ¨MySQLã€PostgresSQLç­‰æ•°æ®åº“é‡Œå‡æ­£å¸¸å‘¢ï¼Ÿé€šè¿‡",["$","a","a-0",{"href":"https://stackoverflow.com/a/852047","children":"è¿™ç¯‡Stack Overflow"}],"çš„å›ç­”ï¼Œæˆ‘ä»¬çŸ¥é“äº†è¿™ç§é—®é¢˜åœ¨å…¶ä»–æ•°æ®åº“ä¸­å¹¶ä¸æ˜¯é—®é¢˜ï¼šå…¶ä»–æ•°æ®åº“ä¼šå°è¯•è§£å‡ºä¸€æ¡çº§è”è·¯å¾„å‡ºæ¥ã€‚è€ŒSQL Serverä¸ä¼šå»å°è¯•è§£ï¼Œå‘ç°äº†è¿™ç§å¾ªç¯ï¼Œå°±ä¼šç›´æ¥æŠ¥é”™ã€‚"]}],"\n",["$","p","p-54",{"children":["é‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæ ¹æ®å¤–é”®åå’Œ",["$","code","code-0",{"children":"Summary"}],"ä¸­çš„å±æ€§çš„å¯¹åº”å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æµ‹ï¼Œè¿™äº”ä¸ªå¤–é”®æ˜¯",["$","code","code-1",{"children":"Summary"}],"ä¸­äº”ä¸ªå¼•ç”¨ä¸€ä¸€å¯¹åº”è¿‡æ¥çš„ã€‚ç”±äºè¿™äº”ä¸ªå¤–é”®å®é™…ä¸Šæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªéœ€è¦ä¿ç•™ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œæœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåªä¿ç•™ä¸€ä¸ªå­—æ®µçš„å¤–é”®tagï¼Œå…¶ä»–å­—æ®µå…¨éƒ¨ç»™ä¸€ä¸ª",["$","code","code-2",{"children":"-"}],"çš„tagï¼Œè®©gormä¸è¦ä¸ºè¿™äº›å­—æ®µç”Ÿæˆå¤–é”®ã€‚"]}],"\n",["$","figure","figure-20",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/summary.go#L30"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" Summary"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" struct"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tProjects"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"projects\" gorm:\"constraint:OnUpdate:CASCADE,OnDelete:CASCADE\"`"}]]}],"\n",["$","span","span-3",{"data-line":"","children":" "}],"\n",["$","span","span-4",{"data-line":"","data-highlighted-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tLanguages"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"        SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"languages\" gorm:\"-\"`"}]]}],"\n",["$","span","span-5",{"data-line":"","data-highlighted-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tEditors"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"          SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"editors\" gorm:\"-\"`"}]]}],"\n",["$","span","span-6",{"data-line":"","data-highlighted-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tOperatingSystems"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"operating_systems\" gorm:\"-\"`"}]]}],"\n",["$","span","span-7",{"data-line":"","data-highlighted-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tMachines"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"         SummaryItems"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":" `json:\"machines\" gorm:\"-\"`"}]]}],"\n",["$","span","span-8",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","h2","h2-6",{"id":"è§„é¿gorm-sqlserverçš„bug","children":[["$","a","è§„é¿gorm-sqlserverçš„bug",{"href":"#è§„é¿gorm-sqlserverçš„bug","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$2e","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"è§„é¿gorm sqlserverçš„bug"]}],"\n",["$","p","p-55",{"children":["è‡³æ­¤ï¼Œç³»ç»Ÿç»ˆäºèƒ½å¯åŠ¨èµ·æ¥äº†ï¼Œå¹¶ä¸”å¤§å¤šæ•°åŠŸèƒ½å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚è€Œåœ¨ä»£ç å®¡æ ¸è¿‡ç¨‹ä¸­ï¼Œä½œè€…è¿˜",["$","a","a-0",{"href":"https://github.com/muety/wakapi/pull/592#issuecomment-1892627154","children":"å‘ç°äº†ä¸€ä¸ªé—®é¢˜"}],"ï¼šä»£ç ä¸­æœ‰ä¸€ä¸ª",["$","code","code-0",{"children":"Heartbeat"}],"è¡¨ï¼Œå®ƒå°±æ˜¯wakatimeçš„å®¢æˆ·ç«¯æ’ä»¶å®šæœŸç»™æœåŠ¡å™¨ç«¯å‘é€çš„æ•°æ®ï¼Œå…¶ä¸­åŒ…å«äº†æ­£åœ¨å·¥ä½œçš„é¡¹ç›®ã€ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ç­‰ä¿¡æ¯ã€‚è€Œè¿™ä¸ªè¡¨ä¸­æœ‰ä¸€ä¸ªå­—æ®µä¸º",["$","code","code-1",{"children":"Hash"}],"ï¼Œè¿™ä¸ªå­—æ®µçš„å€¼æ ¹æ®å…¶ä»–ä¿¡æ¯ç®—å‡ºæ¥ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ª",["$","code","code-2",{"children":"unique index"}],"ï¼Œé€šè¿‡è¿™ä¸ªå­—æ®µï¼Œå°±é¿å…ç»™",["$","code","code-3",{"children":"Heartbeat"}],"è¡¨æ’å…¥å¤šä¸ªé‡å¤çš„æ•°æ®ã€‚"]}],"\n",["$","figure","figure-21",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/models/heartbeat.go#L13"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"type"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" Heartbeat"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" struct"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-3",{"data-line":"","data-highlighted-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"\tHash"}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":"            string"}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"     `json:\"-\" gorm:\"type:varchar(17); uniqueIndex\"`"}]]}],"\n",["$","span","span-4",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // ..."}]}],"\n",["$","span","span-5",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","p","p-56",{"children":["åœ¨æ’å…¥çš„æ—¶å€™ï¼Œä½œè€…ä½¿ç”¨äº†",["$","code","code-0",{"children":"ON CONFLICT DO NOTHING"}],"çš„è¯­å¥ï¼Œè¿™ä¸ªè¯­å¥çš„ä½œç”¨å°±æ˜¯ï¼Œå¦‚æœå½“æ’å…¥ä¸€è¡Œçš„æ—¶å€™ï¼Œå‘ç°æœ‰äº›è¡Œè¿åäº†æŸä¸ª",["$","code","code-1",{"children":"unique index"}],"çš„è¦æ±‚ï¼Œåˆ™",["$","strong","strong-0",{"children":"å¿½ç•¥"}],"è¿™ä¸ªé—®é¢˜ï¼Œä¸æ’å…¥è¿™ä¸€è¡Œï¼Œä¹Ÿä¸æŠ¥é”™ã€‚è¿™åˆšå¥½éå¸¸é€‚åˆæ’å…¥æœ‰å¯èƒ½æœ‰é‡å¤çš„",["$","code","code-2",{"children":"Heartbeat"}],"çš„åœºæ™¯ã€‚"]}],"\n",["$","figure","figure-22",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/repositories/heartbeat.go#L52"}]}],"\n",["$","span","span-1",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// ä¸‹è¿°ä»£ç å°†ä¼šè¢«æ˜ å°„ä¸ºON CONFLICT DO NOTHING"}]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"if"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" err"}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":" :="}],["$","span","span-3",{"style":{"color":"#E06C75"},"children":" r"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":"db"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"."}]]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"  Clauses"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"clause"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#E5C07B"},"children":"OnConflict"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"{"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"    DoNothing"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":": "}],["$","span","span-2",{"style":{"color":"#D19A66"},"children":"true"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":","}]]}],"\n",["$","span","span-5",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"  })."}]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"  Create"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":"&"}],["$","span","span-3",{"style":{"color":"#E06C75"},"children":"heartbeats"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":")."}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":"Error"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"; "}],["$","span","span-7",{"style":{"color":"#E06C75"},"children":"err"}],["$","span","span-8",{"style":{"color":"#56B6C2"},"children":" !="}],["$","span","span-9",{"style":{"color":"#D19A66"},"children":" nil"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"  return"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" err"}]]}],"\n",["$","span","span-8",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}],"\n",["$","span","span-9",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"return"}],["$","span","span-1",{"style":{"color":"#D19A66"},"children":" nil"}]]}]]}]}]}],"\n",["$","p","p-57",{"children":["è¿™ç§è¡Œä¸ºè¢«ç§°ä¸º",["$","strong","strong-0",{"children":"æ’å…¥æˆ–è€…æ›´æ–°"}],"ï¼Œåˆè¢«ç§°ä¸º",["$","strong","strong-1",{"children":"Upsert"}],"ï¼ˆUpdate/Insertï¼‰ï¼Œå…¶è¡Œä¸ºæ˜¯ä¸€ä¸ªç®€å•çš„åˆ¤æ–­ï¼šå¦‚æœä¸€è¡Œå·²ç»å­˜åœ¨ï¼Œåˆ™æ›´æ–°è¿™ä¸€è¡Œçš„å†…å®¹ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥è¿™ä¸€è¡Œã€‚è€Œå¦‚ä½•åˆ¤æ–­",["$","strong","strong-2",{"children":"ä¸€è¡Œæ˜¯å¦å­˜åœ¨"}],"å‘¢ï¼Ÿåˆ™æ˜¯é€šè¿‡",["$","code","code-0",{"children":"unique index"}],"æ¥åˆ¤æ–­ã€‚"]}],"\n",["$","p","p-58",{"children":["å¯æ˜¯é—æ†¾çš„æ˜¯ï¼ŒSQL Serverä¸æ”¯æŒ",["$","code","code-0",{"children":"ON CONFLICT DO NOTHING"}],"ã€‚è¦æƒ³åœ¨SQL Serverä¸­æ¨¡æ‹Ÿupsertçš„è¡Œä¸ºï¼Œ",["$","a","a-0",{"href":"https://michaeljswart.com/2017/07/sql-server-upsert-patterns-and-antipatterns/","children":"æœ‰å¾ˆå¤šæ–¹å¼"}],"ï¼Œä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨",["$","code","code-1",{"children":"merge into"}],"è¯­å¥ã€‚å…·ä½“å¦‚ä½•ç¼–å†™æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±ä¸å†å…·ä½“è®²è§£ã€‚"]}],"\n",["$","p","p-59",{"children":["ç”±äºè¿™é‡Œæ˜¯ä½¿ç”¨çš„gormçš„APIï¼Œå¹¶ä¸æ˜¯ä½¿ç”¨åŸç”ŸSQLè¯­å¥ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ¥è¯´ï¼Œgormæ˜¯å¯ä»¥çŸ¥é“ç”¨æˆ·çš„æ„å›¾ï¼Œå¹¶æ ¹æ®ä¸åŒçš„æ•°æ®åº“ç”Ÿæˆè¡Œä¸ºç›¸åŒçš„ã€ä½†æ˜¯å…¼å®¹å¯¹åº”æ•°æ®åº“çš„SQLè¯­å¥çš„ã€‚æ ¹æ®",["$","a","a-0",{"href":"https://github.com/go-gorm/sqlserver/issues/47","children":"è¿™ä¸ªissue"}],"ï¼Œgormçš„SQL Serveråº“ç¡®å®åœ¨å¾ˆæ—©ä¹‹å‰å°±å°è¯•é€šè¿‡ç”Ÿæˆä¸€æ®µçš„SQL Serverå…¼å®¹çš„SQLè¯­å¥æ¥æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨gormçš„æ–‡æ¡£é‡Œä¹Ÿ",["$","a","a-1",{"href":"https://gorm.io/docs/create.html#Upsert-x2F-On-Conflict","children":"æåˆ°äº†"}],"ï¼Œ",["$","code","code-0",{"children":"clause.OnConflict"}],"ä¼šæ ¹æ®ä¸åŒçš„æ•°æ®åº“ç”Ÿæˆä¸åŒçš„è¯­å¥ï¼Œè€Œå¯¹äºSQL Serverï¼Œå…¶å¯¹åº”ç”Ÿæˆçš„æ­£å¥½å°±æ˜¯",["$","code","code-1",{"children":"MERGE INTO"}],"è¯­å¥ã€‚"]}],"\n",["$","p","p-60",{"children":["ä½†æ˜¯ï¼Œæ—¢ç„¶åº“éƒ½æ”¯æŒäº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜ä¼šé‡åˆ°è¿™ä¸ªé”™è¯¯å‘¢ï¼Ÿå†æ¬¡æ£€æŸ¥æ‰€å®é™…æ‰§è¡Œçš„SQLï¼Œå‘ç°è¿™ä¸€æ¬¡",["$","code","code-0",{"children":"Create"}],"å®é™…ä¸Šç”Ÿæˆçš„SQLè¯­å¥ä»ç„¶æ˜¯æœ€æ™®é€šçš„",["$","code","code-1",{"children":"INSERT INTO"}],"ï¼Œå¹¶æ²¡æœ‰ä¸æ˜¯æ­£ç¡®çš„",["$","code","code-2",{"children":"MERGE INTO"}],"ï¼Œã€‚"]}],"\n",["$","figure","figure-23",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"SQL","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"SQL","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"children":"024/01/19 20:10:23 /home/ddadaal/Code/wakapi/repositories/heartbeat.go:54 mssql: Cannot insert duplicate key row in object 'dbo.heartbeats' with unique index 'idx_heartbeats_hash'. The duplicate key value is (d926be93ebcc4b6f)."}]}],"\n",["$","span","span-1",{"data-line":"","children":" "}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"children":"[10.830ms] [rows:0] "}],["$","mark","mark-0",{"data-highlighted-chars":"","children":["$","span","span-0",{"children":"INSERT INTO"}]}],["$","span","span-1",{"children":" \"heartbeats\" (\"user_id\",\"entity\",\"type\",\"category\",\"project\",\"branch\",\"language\",\"is_write\",\"editor\",\"operating_system\",\"machine\",\"user_agent\",\"time\",\"hash\",\"origin\",\"origin_id\",\"created_at\") OUTPUT INSERTED.\"id\" VALUES ('ddadaal','/home/user1/dev/project1/main.go','file','','wakapi','','Go',1,'','','','curl/8.5.0','2024-01-16 02:16:18.954','d926be93ebcc4b6f','','','2024-01-19 20:10:23.378');"}]]}]]}]}]}],"\n",["$","p","p-61",{"children":["çœ‹æ¥ï¼Œè¦æƒ³å¼„æ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œå°±å¾—è¿›åˆ°",["$","code","code-0",{"children":"gorm"}],"çš„æºç é‡Œæ¥æŸ¥çœ‹é—®é¢˜å‡ºåœ¨å“ªé‡Œäº†ã€‚ä½¿ç”¨VSCodeå¯åŠ¨ä¸€ä¸ªè°ƒè¯•ç‰ˆæœ¬çš„ç¨‹åºï¼Œç»™ä¸Šé¢çš„ä»£ç çš„ä½ç½®æ‰“ä¸Šæ–­ç”µï¼Œä½¿ç”¨",["$","code","code-1",{"children":"curl"}],"è¿ç»­æ’å…¥ä¸¤æ¬¡åŒæ ·çš„",["$","code","code-2",{"children":"Heartbeat"}],"ï¼Œæ ¹æ®æ–­ç‚¹å¾€å†…æŸ¥æ‰¾ï¼Œå½“è¿›å…¥åˆ°gormçš„sqlserverçš„é€‚é…å™¨çš„æ—¶å€™çš„ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€äº›ç«¯å€ªï¼š"]}],"\n",["$","p","p-62",{"children":"$L2f"}],"\n",["$","p","p-63",{"children":["å½“å‰ï¼Œæˆ‘ä»¬æ­£åœ¨å›¾ä¸­çš„",["$","code","code-0",{"children":"if hasConflict"}],"çš„ä½ç½®ï¼Œä¸”",["$","code","code-1",{"children":"hasConflict"}],"å½“å‰ä¸ºtrueã€‚æ ¹æ®ä¸‹é¢çš„ä¸€æ®µä»£ç ï¼Œå¦‚æœ",["$","code","code-2",{"children":"hasConflict"}],"ä¸º",["$","code","code-3",{"children":"true"}],"çš„è¯ï¼Œå°†ä¼šè¿›å…¥",["$","code","code-4",{"children":"MergeCreate"}],"å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°å³æ˜¯ä¸€ä¸ªåœ¨MySQLå®ç°ç±»ä¼¼è¡Œä¸ºçš„SQLçš„è¯­å¥çš„ä»£ç ã€‚ä½†æ˜¯ï¼Œå®é™…åœ¨æ©™è‰²å—ç»“æŸåï¼Œ",["$","code","code-5",{"children":"hasConflict"}],["$","strong","strong-0",{"children":["è¢«æ”¹æˆäº†",["$","code","code-0",{"children":"false"}]]}],"ï¼Œæ‰€ä»¥æœ€ç»ˆå¹¶æ²¡æœ‰è¿›å…¥",["$","code","code-6",{"children":"MergeCreate"}],"ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„",["$","code","code-7",{"children":"INSERT INTO"}]," SQLã€‚é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ©™è‰²è¿™æ®µä»£ç å°±æ˜¯ç½ªé­ç¥¸é¦–ï¼"]}],"\n",["$","p","p-64",{"children":["è¿™æ®µä»£ç å¹²äº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œå®ƒä¼šæ£€æŸ¥è¦æ’å…¥çš„è¡Œä¸­çš„å„ä¸ªåˆ—ä¸­æœ‰æ²¡æœ‰åŒ…å«ä¸»é”®ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ä¸»é”®ï¼Œåˆ™å°†ä¼šæŠŠ",["$","code","code-0",{"children":"hasConflict"}],"æ”¹ä¸º",["$","code","code-1",{"children":"false"}],"ï¼›è€Œå¦‚ä½•è®¾ç½®äº†ä¸»é”®ï¼Œæ‰ä¼šè¿›å…¥",["$","code","code-2",{"children":"MERGE INTO"}],"æµç¨‹ã€‚å›æƒ³å‰é¢ï¼Œè¦æƒ³æ­£ç¡®ç”Ÿæˆupsertè¡Œä¸ºï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­",["$","strong","strong-0",{"children":"ä¸€è¡Œæ˜¯å¦å­˜åœ¨"}],"ã€‚è€Œå¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œçš„ä»£ç å°†",["$","strong","strong-1",{"children":"ä¸€è¡Œæ˜¯å¦å­˜åœ¨"}],"çš„åˆ¤æ–­æ ‡å‡†ç­‰ä»·ä¸ºäº†ä¸»é”®æ˜¯å¦å­˜åœ¨ï¼Œè€Œå¿½ç•¥äº†å…¶ä»–å…·æœ‰çš„",["$","code","code-3",{"children":"unique index"}],"çš„åˆ—ã€‚"]}],"\n",["$","p","p-65",{"children":["å½“ç„¶ï¼Œå…¶ä»–äººä¹Ÿå‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œgorm-sqlserverçš„ä»“åº“ä¸­ä¹Ÿæœ‰",["$","a","a-0",{"href":"https://github.com/go-gorm/sqlserver/issues/100","children":"å·²ç»åŠå¹´å‰æ‰“å¼€çš„issue"}],"æ­£å¥½å°±æ˜¯å…³äºè¿™ä¸ªé—®é¢˜ã€‚è€Œå¾ˆé—æ†¾ï¼Œè¿™ä¸ªé—®é¢˜è¿‡äº†åŠå¹´ä¾ç„¶æ²¡æœ‰ä¿®å¤ã€‚"]}],"\n",["$","p","p-66",{"children":["è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å¤šç§æ–¹æ³•ï¼Œè€Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†æœ€ç®€å•ç²—æš´çš„æ–¹æ³•ï¼šä¸ç®¡ï¼è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯åŒæ—¶æ’å…¥å¤šä¸ª",["$","code","code-0",{"children":"Heartbeatt"}],"ï¼Œé‚£æˆ‘ä»¬å°±æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªæ’å…¥ï¼Œå¦‚æœä¸€ä¸ªè¡Œæ’å…¥å¤±è´¥äº†ï¼Œæˆ‘ä»¬ç®€å•åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æœè¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºhashé‡å¤é€ æˆäº†ï¼Œé‚£æˆ‘ä»¬å°±ä¸ç®¡äº†ï¼æ£€æŸ¥äº†ä¸€ä¸‹ä»£ç ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„åœºæ™¯ï¼Œå…¶å®å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯åªæ’å…¥ä¸€è¡Œï¼Œæ‰€ä»¥è¿™æ ·å†™å¯¹æ€§èƒ½é€ æˆçš„å½±å“æ˜¯å¯ä»¥æ¥å—çš„ã€‚"]}],"\n",["$","figure","figure-24",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"go","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"go","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// https://github.com/muety/wakapi/blob/1ea64f0397e5ee109777b367e9bd907cfdd59bdb/repositories/heartbeat.go#L34"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"if"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" r"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#E06C75"},"children":"db"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":"Dialector"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-7",{"style":{"color":"#61AFEF"},"children":"Name"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":"() "}],["$","span","span-9",{"style":{"color":"#56B6C2"},"children":"=="}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":" ("}],["$","span","span-11",{"style":{"color":"#E5C07B"},"children":"sqlserver"}],["$","span","span-12",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-13",{"style":{"color":"#E5C07B"},"children":"Dialector"}],["$","span","span-14",{"style":{"color":"#ABB2BF"},"children":"{})."}],["$","span","span-15",{"style":{"color":"#61AFEF"},"children":"Name"}],["$","span","span-16",{"style":{"color":"#ABB2BF"},"children":"() {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"  for"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" _"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-3",{"style":{"color":"#E06C75"},"children":"h"}],["$","span","span-4",{"style":{"color":"#E5C07B"},"children":" :="}],["$","span","span-5",{"style":{"color":"#C678DD"},"children":" range"}],["$","span","span-6",{"style":{"color":"#E06C75"},"children":" heartbeats"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"    err"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" :="}],["$","span","span-2",{"style":{"color":"#E06C75"},"children":" r"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#E06C75"},"children":"db"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-6",{"style":{"color":"#61AFEF"},"children":"Create"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-8",{"style":{"color":"#E06C75"},"children":"h"}],["$","span","span-9",{"style":{"color":"#ABB2BF"},"children":")."}],["$","span","span-10",{"style":{"color":"#E06C75"},"children":"Error"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"    if"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" err"}],["$","span","span-2",{"style":{"color":"#56B6C2"},"children":" !="}],["$","span","span-3",{"style":{"color":"#D19A66"},"children":" nil"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-5",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"      if"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" strings"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#61AFEF"},"children":"Contains"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":"err"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-7",{"style":{"color":"#61AFEF"},"children":"Error"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":"(), "}],["$","span","span-9",{"style":{"color":"#98C379"},"children":"\"Cannot insert duplicate key row in object 'dbo.heartbeats' with unique index 'idx_heartbeats_hash'\""}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":") {"}]]}],"\n",["$","span","span-6",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"        // ignored"}]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"      } "}],["$","span","span-1",{"style":{"color":"#C678DD"},"children":"else"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-8",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"        return"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" err"}]]}],"\n",["$","span","span-9",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"      }"}]}],"\n",["$","span","span-10",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"    }"}]}],"\n",["$","span","span-11",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"  }"}]}],"\n",["$","span","span-12",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"  return"}],["$","span","span-1",{"style":{"color":"#D19A66"},"children":" nil"}]]}],"\n",["$","span","span-13",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","h1","h1-2",{"id":"æ€»ç®—è¿˜æ˜¯å®Œæˆäº†","children":[["$","a","æ€»ç®—è¿˜æ˜¯å®Œæˆäº†",{"href":"#æ€»ç®—è¿˜æ˜¯å®Œæˆäº†","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$30","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"æ€»ç®—è¿˜æ˜¯å®Œæˆäº†"]}],"\n",["$","p","p-67",{"children":"ç»ˆäºï¼Œç»è¿‡äº†ä¸€å‘¨çš„æ—¶é—´ï¼Œæœ¬æ¥ä»¥ä¸ºåªæ˜¯ä¸€ä¸ªç®€å•çš„è°ƒåº“ï¼Œç»“æœå´å‘ç°äº†è¿™ä¹ˆå¤šçš„é—®é¢˜ã€‚ç»è¿‡è¿™ä¸ªè¿‡ç¨‹ï¼Œä¹‹å‰è¿SQL Serverç”¨éƒ½æ²¡ç”¨è¿‡çš„æˆ‘ä¹ŸçŸ¥é“äº†å¾ˆå¤šSQL Serverçš„ç»†èŠ‚ï¼›ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡gormï¼Œç°åœ¨å´è¿æºä»£ç éƒ½å¥½å¥½ç¿»äº†ä¸€é€šã€‚"}],"\n",["$","p","p-68",{"children":["è€Œå…³äºgoï¼Œè™½ç„¶æˆ‘ä¸€ç›´ä¸å–œæ¬¢goçš„è¯­æ³•ï¼Œè§‰å¾—å®ƒå¤ªç®€å•ï¼Œç±»å‹ç³»ç»Ÿå¤ªå¼±ï¼Œå¾ˆå¤šä»£ç éƒ½èŠ±åœ¨å›ºå®šçš„æ¨¡æ¿ä»£ç ä¸Šï¼ˆæ¯”å¦‚",["$","code","code-0",{"children":"if err := nil"}],"ï¼‰ï¼Œä½†æ˜¯ä¸å¾—ä¸æ‰¿è®¤çš„ä¸€ç‚¹æ˜¯ï¼Œgoç¡®å®éå¸¸çš„",["$","strong","strong-0",{"children":"explicit"}],"ã€‚æ²¡é‚£ä¹ˆå¤šä¹±ä¸ƒå…«ç³Ÿçš„åå°„ã€è¿è¡Œæ—¶é»‘é­”æ³•ï¼Œæ§åˆ¶æµéå¸¸æ¸…æ™°ï¼Œæƒ³çŸ¥é“ä»€ä¹ˆä»£ç è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³•ï¼Œç›´æ¥",["$","code","code-1",{"children":"Shift+F12"}],"å°±å®Œäº‹äº†ï¼Œå‡ºæ¥çš„ç»“æœä¸ä¼šå¤šä¸ä¼šå°‘ï¼›è¦æƒ³æŸä¸ªé”™è¯¯æ˜¯åœ¨å“ªé‡Œå¤„ç†çš„ï¼Œè·Ÿç€ç¹ççš„é”™è¯¯å¤„ç†ä»£ç æ€»èƒ½æ‰¾åˆ°ã€‚å®ƒç¡®å®ç¼ºå°‘ä¸€äº›ç‰¹æ€§ï¼Œä½†æ˜¯å®ƒéå¸¸åœ°å·¥ä¸šåŒ–ã€‚"]}],"\n",["$","p","p-69",{"children":"è§£å†³è¿™äº›é—®é¢˜åï¼ŒPRé¡ºåˆ©åˆå¹¶è¿›äº†ä¸»åˆ†æ”¯ï¼Œæˆå°±æ„Ÿæ»¡æ»¡ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€ä¸ªæ²¡é‚£ä¹ˆç®€å•çš„å¼€æºé¡¹ç›®çš„è´¡çŒ®äº†ã€‚"}],"\n",["$","p","p-70",{"children":"$L31"}],"\n",["$","p","p-71",{"children":"å¯¹æˆ‘æ¥è¯´ï¼Œè®¾å®šä¸€ä¸ªç›®æ ‡æ˜¯å­¦ä¹ çš„æœ€å¥½çš„é€”å¾„ï¼Œåœ¨è¿™æ¬¡å®è·µé‡Œå†æ¬¡å¾—åˆ°äº†å°è¯ã€‚"}]]}]]}],["$","div",null,{"className":"hidden lg:block lg:w-[25%]","children":["$","$L32",null,{"toc":[{"depth":1,"value":"ä¸å°±æ˜¯è°ƒåº“å˜›â€¦â€¦","id":"ä¸å°±æ˜¯è°ƒåº“å˜›"},{"depth":1,"value":"é‡åˆ°å¹¶è§£å†³ä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªçš„é—®é¢˜","id":"é‡åˆ°å¹¶è§£å†³ä¸€ä¸ªä¸€ä¸ªä¸€ä¸ªçš„é—®é¢˜","children":[{"depth":2,"value":"SQLè¯­å¥","id":"sqlè¯­å¥"},{"depth":2,"value":"SQLè¯­å¥ç‰‡æ®µ","id":"sqlè¯­å¥ç‰‡æ®µ"},{"depth":2,"value":"é‡ç”¨Dialectorçš„é€»è¾‘ï¼Œä¸ºå…³é”®è¯åŠ ä¸Šå¼•å·","id":"é‡ç”¨dialectorçš„é€»è¾‘ä¸ºå…³é”®è¯åŠ ä¸Šå¼•å·"},{"depth":2,"value":"é‡å†™ä¸æ”¯æŒçš„åŠŸèƒ½","id":"é‡å†™ä¸æ”¯æŒçš„åŠŸèƒ½"},{"depth":2,"value":"æŠŠåŒä¸€ä¸ªgoç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—ç±»å‹","id":"æŠŠåŒä¸€ä¸ªgoç±»å‹åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­æ˜ å°„ä¸ºä¸åŒçš„åˆ—ç±»å‹"},{"depth":2,"value":"é¿å…åˆ›å»ºé€’å½’çš„çº§è”ä¿®æ”¹å¤–é”®çº¦æŸ","id":"é¿å…åˆ›å»ºé€’å½’çš„çº§è”ä¿®æ”¹å¤–é”®çº¦æŸ"},{"depth":2,"value":"è§„é¿gorm sqlserverçš„bug","id":"è§„é¿gorm-sqlserverçš„bug"}]},{"depth":1,"value":"æ€»ç®—è¿˜æ˜¯å®Œæˆäº†","id":"æ€»ç®—è¿˜æ˜¯å®Œæˆäº†"}],"hasSummary":true}]}]]}]
a:{"metadata":[["$","title","0",{"children":"ä»è°ƒåº“åˆ°ç¿»æºä»£ç ï¼šç»™wakapiå¢åŠ SQL Serveræ”¯æŒ - ddadaal.me"}],["$","meta","1",{"name":"description","content":"ddadaal's personal website"}],["$","link","2",{"rel":"manifest","href":"/site.webmanifest","crossOrigin":"$undefined"}],["$","link","3",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","link","4",{"rel":"icon","href":"/icon.svg?35be8e76be1c3618","type":"image/svg+xml","sizes":"any"}],["$","link","5",{"rel":"apple-touch-icon","href":"/apple-icon.png?5334a64f42000bb0","type":"image/png","sizes":"180x180"}]],"error":null,"digest":"$undefined"}
12:{"metadata":"$a:metadata","error":null,"digest":"$undefined"}
33:I[6340,["458","static/chunks/3f731c04-273ad2ee657c8337.js","452","static/chunks/c99dd624-c70eb7fd833cb238.js","478","static/chunks/b767c4c5-8c8b588264c8b54b.js","786","static/chunks/1b3e99d6-bd6014aeea18f102.js","234","static/chunks/234-c6103b572ad887ac.js","762","static/chunks/762-aa64ad1bdd524123.js","207","static/chunks/207-36fddfdfb38db117.js","798","static/chunks/798-4c46c2b09214eda1.js","63","static/chunks/63-e828322be2bebc54.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-b83f93f581d95258.js"],"ArticleImage"]
2d:["$","$L33","img-0",{"src":"/articles/asset/contents/20240117-support-sqlserver-in-wakapi/foreign-keys.png","imageSize":{"height":637,"width":1499},"imageProps":{"src":"./foreign-keys.png","alt":"é€šè¿‡Azure Data StudioæŸ¥çœ‹å…·ä½“çš„é”™è¯¯ä¿¡æ¯"}}]
2a:["$","$L33","img-0",{"src":"/articles/asset/contents/20240117-support-sqlserver-in-wakapi/copilot.png","imageSize":{"height":1540,"width":1056},"imageProps":{"src":"./copilot.png","alt":"copilotçš„ç»“æœ"}}]
2f:["$","$L33","img-0",{"src":"/articles/asset/contents/20240117-support-sqlserver-in-wakapi/sqlserver-adapter.png","imageSize":{"height":1025,"width":2252},"imageProps":{"src":"./sqlserver-adapter.png","alt":"æŸ¥æ‰¾åˆ°å¯èƒ½å‡ºç°bugçš„ä½ç½®"}}]
31:["$","$L33","img-0",{"src":"/articles/asset/contents/20240117-support-sqlserver-in-wakapi/pr-merged.png","imageSize":{"height":1882,"width":2429},"imageProps":{"src":"./pr-merged.png","alt":"https://github.com/muety/wakapi/pull/592"}}]
