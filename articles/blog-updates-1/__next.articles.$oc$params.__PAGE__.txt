1:"$Sreact.fragment"
2:I[28979,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"ArticleFrontmatter"]
c:I[21753,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"ArticleSummarization"]
d:I[79817,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"Gallery"]
50:I[23491,["/_next/static/chunks/2caa33a942c5f527.js","/_next/static/chunks/59983278a34fd25c.js"],"OutletBoundary"]
51:"$Sreact.suspense"
55:I[72053,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"ArticleImage"]
5c:I[14620,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"ArticleToc"]
5d:I[39182,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"RelatedArticles"]
5e:I[42449,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"CommentPanelWithCurrentLanguage"]
:HL["/_next/static/chunks/44d2e091595b3eca.css","style"]
:HL["/_next/static/chunks/5e55d74f3211c796.css","style"]
:HL["/_next/static/chunks/b59bad6ea4f112f2.css","style"]
3:T40cd,
# 前言

不知不觉，Gatsby博客已经上线了一年多。在这一年中，虽然从表面看起来博客变化不大，但是我一直在对博客做一些更新工作。特别是最近一个月，我对博客一些耽搁已久的问题进行了解决，使整个博客更加的完善了。这篇简单的文章就简地列举一下最近博客一些特别值得提到的更新，目前存在的问题，以及对博客的未来发展做一些展望和规划。

# 更新

## RSS恢复支持

博客的RSS源地址是：[https://ddadaal.me/rss.xml](https://ddadaal.me/rss.xml)。欢迎订阅！

其实博客从很早开始（具体来说，从去年10月的[e2e469](https://github.com/vicblog/VicBlog-Gatsby/commit/e2e469ae05646590c0a05755e4e23f384102120d#diff-b9e136416b90437fa1dac910280b45fc)开始）就已经加入了RSS支持，但是那时候的代码就是随便从网上抄了一段，没有对博客比较特殊的地方（例如说多语言的支持，存在不能显示在列表中的文章等）进行定制，后面对博客一些更新的时候也都直接放弃了RSS。这几天，我针对博客的RSS的功能进行了一些修复，包括：**修复文章中不合法的日期串**、**RSS项中的原文链接变成绝对地址而不是相对地址**，**重新修改序列化方法**等，使得博客的RSS功能基本上可以正常使用了。博客的RSS源地址也在[W3C的Feed Validation Service](https://validator.w3.org/feed/)中成功认证，对于大多数RSS阅读器来说已经可以正常使用了。

![有效性认证](rss-valid.png)

![文章列表（Newsflow UWP应用）](rss-list.png)

![文章内容（Newsflow UWP应用）](rss-content.png)

当然，根据认证服务的结果可以发现，博客的RSS还有一些问题，其中比较严重是**文章内容的图片地址是相对地址，而不是绝对地址**，这造成了包括Read（一个Android RSS应用，[Google Play](https://play.google.com/store/apps/details?id=com.read.app)）等一些工具不能正确显示图片。但是这些问题可能在短时间内无法被解决，因为我目前暂时没有找到有效的、可扩展的方法hook进入Gatsby构建时markdown的渲染流程，并根据我的需求进行修改。

详细地说，目前，将MD编译成HTML是由[remark](https://remark.js.org/)，以及很多周边插件（例如[Gatsby-transformer-remark](https://github.com/Gatsbyjs/Gatsby/tree/master/packages/Gatsby-transformer-remark)）共同完成的。这些插件都有一些默认行为（例如图片地址是相对地址）等。

这些默认行为在大多数情况下都是合理的，让开发者能够开箱即用。但是，**约定大于配置的反面就是配置常常不够完善，在遇到少见的需求的时候让开发者感到束手束脚。**

之前，为了一些特殊需求（例如在markdown里插入React组件（我使用过MDX个人不太好用），给code元素加入一些特殊元素（例如显示语言、行号、复制按钮等）），我多次尝试过hook进remark的编译过程，**在remark进行渲染的时候修改AST，使得进入Gatsby数据源中的htmlAst和html就是经过定制的**，但是一直没能找到合适的方法。

后来，这些功能都实现了，但是不够优雅：在代码中，从**Gatsby数据源**中获取remark渲染后的AST，修改AST后再重新使用[rehype-react](https://github.com/rehypejs/rehype-react)渲染（对这里感兴趣的同学可以查看代码的[ArticleContentDisplay](https://github.com/vicblog/VicBlog-Gatsby/blob/master/src/components/Article/ContentDisplay/index.tsx)组件）。

这样做虽然能够实现需求，但由于在**Gatsby的数据源**中，其htmlAst和html并没有经过定制（定制是在页面渲染的时候执行的），这也造成目前各个方法获得的HTML并不统一。

没有一个可靠的hook渲染过程的方法，也造成了我没有办法修改remark的默认行为，其中就包含图片地址为相对地址而不是绝对地址这个问题。

我正在努力想办法解决这个问题，但是看情况短时间内解决希望不大。

## 使用国内托管（腾讯云的[CODING个人版](https://dev.tencent.com/production)）

博客一直是托管在GitHub Pages上的。GitHub Pages很方便，零开销，在国外用的很广，网络上的教程也到处都是。但是它的问题是在**国内速度非常慢，且非常不稳定**。即使我的博客的相关文件已经比较小了，但是GitHub Pages在国内的速度也极大地影响了网站的用户体验。要是当某篇文章有图片，那体验就更糟了。

多亏了我的博客是静态博客，解决这个问题，本质上只需要把文件托管到某个国内访问速度快的类Pages服务上即可解决问题（点[关于博客](/about/project)查看博客工作原理介绍）。我把目标投向了17年参加南京四校Hack.Christmas时赞助商提供的CODING.NET一年免费VIP账号。虽然那时候VIP基本已经过期，但是当时体验还行，并且也发现了它也提供类似GitHub Pages的功能（也叫Pages服务）。于是，我进行了以下操作：

- 在CODING.NET上开启一个repo，存放博客的文件
- 给这个repo开启Pages服务
- 修改[CI脚本](https://github.com/vicblog/VicBlog-Gatsby/blob/master/.travis.yml)，构建后向GitHub和CODING.NET的repo都推送一次

经过测试，CODING.NET的体验还是非常良好的，在国内的速度也非常不错，于是：
- 修改DNS，将根记录（ddadaal.me）指向了CODING.NET，二级域名（pages.ddadaal.me）指向原有GitHub Pages repo
- 在GitHub和CODING.NET平台上修改域名设置

这样，我的根域名就被解析到CODING.NET提供的Pages服务上。经过测试，网站的速度提高了非常多，国内用户的体验得到了很大的提高。

![[站长工具](http://tool.chinaz.com/speedcom/ddadaal.me-pages.ddadaal.me)](speed-comparison.png)

## 多语言环境下文章地址改进

之前，为了支持多语言，本网站的所有文章的地址末尾都增加了语言（cn/en）为了表示这个文章的语言是什么，例如[关于我](/about/me)就有两个版本，`/about/me/cn`（中文）和`/about/me/en`（英文），另外对`/about/me`这种根路径增加了**客户端的跳转**（即在浏览器执行了JS进行跳转，而不是通过服务器发送301（Moved Permanently）的响应。对于静态博客，服务器发送301是不可能的，因为服务器端不能执行这么“复杂”的逻辑）到**本文章的所有版本的第一种语言版本**（知道你对第一种语言版本感到疑惑，继续往下看）。

这样做有2个问题：
1. 对于所有文章，包括占大多数的只有一种语言版本的文章，其地址栏最后都有语言字符串，造成路径不必要的太长；
2. 这个“第一种语言版本”的结果每次执行可能是不相同的，有可能造成根路径在每次更新后都出现变化（没有验证过，只是存在这种可能）。

我在最近也重新设计了路径的计算方法，较好的解决了这个问题。以id为`an-article`的、有两种语言版本（`cn`和`en`）文章来举例子：
1. 首先，对一篇文章的所有语言版本，**根据lang的字典序进行排序**，使得每次所有版本的顺序都是相同的，解决了第二个问题
     - 例子中，顺序为`[cn, en]`；
2. 选取中文版本（`cn`）的文章，或者如果中文版本不存在的话，选择第一个版本（由于所有版本的顺序是相同的，第一个版本也总是相同的），生成根路径`/articles/${articleId}`的页面
     - 例子中，选择了中文（`cn`）版本生成`/article/an-article`的页面；
3. 生成`/articles/${articleId}/${上一步生成的版本的语言}`到`/articles/${articleId}`的客户端跳转
     - 例子中，生成了`/articles/an-article/cn`到`/articles/an-article`的跳转
4. 对其他所有语言，生成`/articles/${articleId}/${语言}`的页面。

通过这样，可以保证博客中大多数单语言的文章都生成在**根路径**，不再有碍眼的多余的语言字符串，同时也保证了多语言功能和向前兼容性。

举几个例子：

| 文章 | 语言 | 之前的路径 | 现在的路径 |
| -- | -- | -- | -- |
| 关于我 | cn | `/about/me/cn` | `/about/me` |
| 关于我 | en | `/about/me/en` | `/about/me/en` |
| 2018年总结 | cn | `/articles/summary-for-2018/cn` | `/articles/summary-for-2018` |
| Simstate and Why | en | `/articles/simstate-and-why/en` | `/articles/simstate-and-why` |

最后提一下，一般来说，网站要支持多种语言，目前大家通常使用以下的两种方法实现，但是由于他们都需要特别的处理，也为了能够**热切换语言**，最后采用了以上这个比较简单的方法（即在路径最后增加语言表示）实现：

| 方法 | 解释 | 例子 | 问题 |
| -- | -- | -- | -- |
| 二级域名 | 每个语言的子网站都有自己的二级域名 | 淘宝 | 本质上是两个网站，当一种语言的页面不存在时，需要做跳转，懒得维护 |
| 子页面 | 每个语言采用类似`https://domain.com/{zh-CN, en-US}/path/to/page`的方法，通过路径的第一个部分区分不同语言 | 微软官网（[切换语言的页面](https://www.microsoft.com/en-us/locale.aspx?absoluteReturnUrl=https%3a%2f%2fwww.microsoft.com%2fzh-cn)） | 处理路径时（例如导航栏高亮），需要单独切分掉`pathname`的第一部分；当一种语言的页面不存在时，需要做跳转 |


## 使用自己开发的[simstate](https://github.com/ddadaal/simstate)进行状态管理

博客一开始是使用[unstated](https://github.com/jamiebuilds/unstated)进行状态管理的。这个库非常的简单易用，很符合react的理念，于是当时我非常喜爱这个库。但是随着后来hooks的推广和unstated迟迟没有跟进hooks等原因（其实已经跟进了只是当时我的不知道……），我认为是时候写一个自己的状态管理库了。这之后故事可以查看[Simstate and Why](/articles/simstate-and-why)文章，这里就不说了。

在v3.0时，我重构了simstate，完全抛弃了class的概念，完全使用React原生的hook就可以完成状态管理。而博客就是第一个完全采用simstate v3.0的项目。

![使用simstate设计Store（左）和使用Store（右）](simstate-in-action.png)

在使用新版本的时候，我也积累了一些在项目中正确使用此项目的经验，例如说：

- Store取名最好是**大写字母**开头，因为在使用的时候经常出现`const aStore = useStore(AStore);{:ts}`的代码，若使用小写字母开头，这代码会编译失败。这也可以帮助同时使用多个Store的情况时，区分不同的Store实例；
- 如何写一个专门的Store（例如博客项目的[LocationStore](https://github.com/vicblog/VicBlog-Gatsby/blob/master/src/stores/LocationStore.tsx)）来管理浏览器history
- 在把Store和自己的hook（例如`useCallback`等）进行组合的时候，需要把Store实例加为hook的一个依赖，因为Store实例是**不可变的**

这些常见问题也写到了[simstate项目的README](https://github.com/ddadaal/simstate)中，也是给未来自己（和其他人，如果有人在用的话）带来方便，帮助解决这种常见问题。

## 其他值得提到的近期的修正（太远的我也记不住了……）

- 修正了错误的授权协议（`BY CC-SA 4.0` => `CC BY-SA 4.0`）
- 最后更新时间和文章发表时间正确支持了多时区（时间将会以用户的本地时区进行显示）
    - 在CI上构建时，机器给出的时间是UTC时间，如果不经过处理就显示会让人产生误解
- 修正了一些没有正确使用的HTML元素的属性造成可访问性（accessibility）问题
    - 例如，在文章列表界面中用鼠标点击文章标题，可以进入文章内容。但是使用vimium等工具在文章列表界面导航时，会发现文章项的标题的链接不能点击。
    - 这是因为在实现时，点击标题进入文章是通过绑定`onClick`事件跳转实现，不符合HTML标准使用`a`标签的`href`属性进行跳转。
    - 修改后，vimium恢复了正常。

# 问题和后续计划

去年[Gatsby博客上线](/articles/gatsby-powered-vicblog-online)的时候提到：

> 博客的大厦已经基本建好，接下来只需要小修小补即可。

其实这一年中博客的发展和变化还是比较大的，已有的功能继续完善，没有或者缺乏的功能也正在加入。在接下来，我会在以下几个方面继续完善我的博客：

1. 文章数量和质量

毕竟博客的本职工作的写文章（而不是像我这样大多数时间在写网站本身……），以后我会带来尽可能多尽可能高质量的原创文章。

1. 重构样式和完善UI设计

目前博客是使用大名鼎鼎的[bootstrap](https://getbootstrap.com/)的组件库进行设计的。虽然很方便，bootstrap也还算比较耐看，但是，由于要将使用SCSS编写的bootstrap和我偏好的CSS-in-JS方案（例如[styled-components](https://www.styled-components.com/)）组合起来使用，造成了一些问题：

- 目前我的博客的样式有`CSS`，bootstrap带来的`SCSS`和分散在各个组件里的`styled-components`组件，非常的混乱，不容易维护（例如说某个共用颜色，必须要在多个地方定义多次）；
- 由于上个原因，没有一个中心化的配置，很难实现**黑暗模式**
- 基于传统的CSS/SCSS的**全局的样式解决方案**和**组件化**的React和CSS-in-JS是两种不一样的思维方式，让开发者有一种**思维分裂**的感觉
    - 例如：对于重用一个样式的需求，
        - 使用CSS/SCSS的思维方式是写一个类（使用BEM命名规范规避类型冲突），然后通过组件的`className`组合样式；
        - 而`styled-components`的思维方式，是在一个已有的样式的组件上，通过``styled(Component)` /** styles **/ ` ``进行扩展。
        - 这个[`ListGroupHeader`](https://github.com/vicblog/VicBlog-Gatsby/blob/master/src/components/UI/ListGroup/ListGroupHeader.tsx)组件就是强行使用组件化的方式重用CSS的样式，这种模板代码非常的浪费时间和不灵活。
- bootstrap看厌了，想看点新鲜的 ::smile::

5月份的时候，我尝试在[`styled-system`](https://styled-system.com/)的支持下写自己的UI库[vicui](https://github.com/ddadaal/vicui)。组件基本都完成了，但是在使用的时候遇到了[很奇怪的问题](https://github.com/ddadaal/vicui/issues/1)，造成我完全无法在其他项目中使用。

同时，我在项目中采用了将[Rebass](https://rebassjs.org/theming/)这样的`primitive UI components`和`CSS`混用的方式，使得不仅在保证在React中使用方便和可扩展性，同时在以后迁移到React生态圈之外时，已有的CSS的可以重用，但是在`无法避免全局样式类名`、`对用户公开多大自定义样式的能力`等问题上也存在一些问题。

对于样式，这个前端”永远的难题“，我还需要更多的学习和实践。

3. 补充功能

静态博客无法单独实现**所有依赖于服务器的功能**，包括访客统计、评论、点赞等功能。我已经使用[gitalk](https://github.com/gitalk/gitalk)解决了评论问题，解决地还算满意；使用[CNZZ](https://www.cnzz.com)解决访客统计功能，虽说是能统计，但是它甚至没有提供API，不能编程实现网站访客的显示，更别提分文章的统计了；至于点赞，这还是算了吧……

要解决这个问题，可以自己写后端，将这个博客变成一个SPA。目前使用场景非常适合微服务，即每个功能之间是的独立的。例如，对访客统计写一个服务，对点赞写一个服务，各个服务之间相互独立，独立开发、渐进部署。我也正在学习这个方面的技术，期待早日能有一个可靠的、可扩展的、博客专用的基础设施和服务能够上线。

4. 一些其他问题：例如中文字数统计不正确、之上提到的自定义MD渲染过程等

# 感谢！

博客已经走过一年了。在这一年中感谢所有支持我的博客的读者和网友，感谢你们对我文章的支持！我也会在之后继续完善博客的内容、设计和功能，让博客更加地完善、丰富和易用！

0:{"buildId":"ESk97D31DA-I63AA80yMz","rsc":["$","$1","c",{"children":[["$","article",null,{"children":[["$","div",null,{"className":"bg-neutral px-4 py-8","children":["$","div",null,{"className":"max-w-7xl mx-auto min-h-[256px] flex justify-center text-center text-neutral-content","children":["$","div",null,{"className":"flex flex-col justify-center animate-slide-up","children":[["$","h1",null,{"className":"text-4xl my-2","children":"博客的发展一：RSS，国内托管……"}],["$","$L2",null,{"className":"justify-center","articleId":"blog-updates-1","info":{"content":"$3","title":"博客的发展一：RSS，国内托管……","date":"2019-09-26 21:46","id":"blog-updates-1","lang":"cn","tags":["blog"],"related":["gatsby-powered-vicblog-online","simstate-and-why"],"wordCount":4119,"readingTime":20.595,"filePath":"contents/20190926-blog-updates-1/cn.md","summary":{"articleId":"blog-updates-1","lang":"cn","hash":"a9ed0455a1f876c7278012b2c2074a7c5de1c8ebaf2a12953a7eda7136bda0b4","summaries":[{"metadata":{"summarizer":"azure-ai","model":"DeepSeek-R1"},"summaries":["作者总结了一年来对Gatsby博客的优化：修复RSS订阅功能，解决图片路径问题；迁移至国内CODING平台提升访问速度；重构多语言文章路径逻辑，精简单语种URL；改用自研状态库simstate提升代码质量；修正授权协议、时区显示等问题。未来计划聚焦内容创作、样式重构、访客统计等功能扩展，并解决中文字数统计等技术难题。博客将持续完善功能与用户体验，感谢读者支持。"],"startTime":"2025-02-14T13:31:18.517Z","endTime":"2025-02-14T13:31:36.291Z"},{"metadata":{"summarizer":"ollama","model":"deepseek-r1:8b"},"summaries":["你的博客已经取得了不错的进展，特别是在技术文章和个人项目分享方面。以下是一些具体的建议，可能会帮助你进一步提升博客的内容质量和功能：\n\n1. **内容创作**：继续写出高质量的原创文章。可以尝试不同类型的文章，比如教程、总结、案例分析等，这样能够吸引更多专业人士的关注。\n\n2. **UI/UX设计**：\n   - **选择工具**：你可以考虑使用`Radix UI`或者`Chakra UI`这样的开源组件库，它们支持Styled Components，并且提供了一系列可定制化的组件，减少样式冲突。\n   - **CSS-in-JS优化**：试着用` styled-system `来管理全局样式，这样可以在保持灵活性的同时，实现更高效的样式管理。\n\n3. **功能扩展**：\n   - **评论系统**：除了Gitalk，你还可以考虑使用` Commento `或者自己搭建一个简单的评论接口。\n   - **统计工具**：虽然CNZZ没有API，但你可以通过第三方服务（如` Google Analytics `）来获取更详细的数据，并结合` gtag `这样的工具实现。\n   - **点赞功能**：可以使用` react-icons `和一个简单的本地数据库存储点赞次数。\n\n4. **技术深度**：\n   - 在写技术文章时，可以增加更多具体的代码示例和操作步骤，这样读者更容易理解和应用。\n   - 如果你有时间，也可以尝试写一些工具和库的使用体验分享，这样的内容通常会吸引技术爱好者的兴趣。\n\n5. **个人品牌**：\n   - 保持一致的风格和语气，逐步建立自己的博客风格IP。比如，你对前端开发、系统设计或者其他领域有专深，可以在文章中多展示你的见解和独特视角。\n   \n6. **社区互动**：\n   - 在评论区与读者更积极地交流，回答技术问题，甚至开始一些小项目的讨论，这样可以增加读者的参与感和粘性。\n\n总之，你已经做得不错了，但随着时间的推移，逐步优化内容质量、功能完善以及用户体验会让你的博客更加出色。如果有具体需求，可以告诉我，我会尽力提供更详细的建议！"]}]}},"langVersions":["cn"]}]]}]}]}],"$L4"]}],["$L5","$L6","$L7","$L8","$L9","$La"],"$Lb"]}],"loading":null,"isPartial":false}
e:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z4:["$","div",null,{"className":"animate-slide-up","children":[["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","div",null,{"className":"flex flex-row space-x-4","children":[["$","div",null,{"className":"prose max-w-full lg:w-[75%]","children":[["$","$Lc",null,{"summaries":[{"metadata":{"summarizer":"azure-ai","model":"DeepSeek-R1"},"children":[["$","p","p-0",{"children":"作者总结了一年来对Gatsby博客的优化：修复RSS订阅功能，解决图片路径问题；迁移至国内CODING平台提升访问速度；重构多语言文章路径逻辑，精简单语种URL；改用自研状态库simstate提升代码质量；修正授权协议、时区显示等问题。未来计划聚焦内容创作、样式重构、访客统计等功能扩展，并解决中文字数统计等技术难题。博客将持续完善功能与用户体验，感谢读者支持。"}]]},{"metadata":{"summarizer":"ollama","model":"deepseek-r1:8b"},"children":[["$","p","p-0",{"children":"你的博客已经取得了不错的进展，特别是在技术文章和个人项目分享方面。以下是一些具体的建议，可能会帮助你进一步提升博客的内容质量和功能："}],"\n",["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"内容创作"}],"：继续写出高质量的原创文章。可以尝试不同类型的文章，比如教程、总结、案例分析等，这样能够吸引更多专业人士的关注。"]}],"\n"]}],"\n",["$","li","li-1",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"UI/UX设计"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":[["$","strong","strong-0",{"children":"选择工具"}],"：你可以考虑使用",["$","code","code-0",{"children":"Radix UI"}],"或者",["$","code","code-1",{"children":"Chakra UI"}],"这样的开源组件库，它们支持Styled Components，并且提供了一系列可定制化的组件，减少样式冲突。"]}],"\n",["$","li","li-1",{"children":[["$","strong","strong-0",{"children":"CSS-in-JS优化"}],"：试着用",["$","code","code-0",{"children":"styled-system"}],"来管理全局样式，这样可以在保持灵活性的同时，实现更高效的样式管理。"]}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"功能扩展"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":[["$","strong","strong-0",{"children":"评论系统"}],"：除了Gitalk，你还可以考虑使用",["$","code","code-0",{"children":"Commento"}],"或者自己搭建一个简单的评论接口。"]}],"\n",["$","li","li-1",{"children":[["$","strong","strong-0",{"children":"统计工具"}],"：虽然CNZZ没有API，但你可以通过第三方服务（如",["$","code","code-0",{"children":"Google Analytics"}],"）来获取更详细的数据，并结合",["$","code","code-1",{"children":"gtag"}],"这样的工具实现。"]}],"\n",["$","li","li-2",{"children":[["$","strong","strong-0",{"children":"点赞功能"}],"：可以使用",["$","code","code-0",{"children":"react-icons"}],"和一个简单的本地数据库存储点赞次数。"]}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"技术深度"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"在写技术文章时，可以增加更多具体的代码示例和操作步骤，这样读者更容易理解和应用。"}],"\n",["$","li","li-1",{"children":"如果你有时间，也可以尝试写一些工具和库的使用体验分享，这样的内容通常会吸引技术爱好者的兴趣。"}],"\n"]}],"\n"]}],"\n",["$","li","li-4",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"个人品牌"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"保持一致的风格和语气，逐步建立自己的博客风格IP。比如，你对前端开发、系统设计或者其他领域有专深，可以在文章中多展示你的见解和独特视角。"}],"\n"]}],"\n"]}],"\n",["$","li","li-5",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"社区互动"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"在评论区与读者更积极地交流，回答技术问题，甚至开始一些小项目的讨论，这样可以增加读者的参与感和粘性。"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","p","p-1",{"children":"总之，你已经做得不错了，但随着时间的推移，逐步优化内容质量、功能完善以及用户体验会让你的博客更加出色。如果有具体需求，可以告诉我，我会尽力提供更详细的建议！"}]]}]}],["$","$Ld",null,{"withCaption":true,"id":"blog-updates-1","children":[["$","h1","h1-0",{"id":"前言","children":[["$","a","前言",{"href":"#前言","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$e","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"前言"]}],"\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","$L2f","\n","$L30","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c"]}]]}],"$L4d"]}]}],"$L4e","$L4f"]}]
5:["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/44d2e091595b3eca.css","precedence":"next"}]
6:["$","link","1",{"rel":"stylesheet","href":"/_next/static/chunks/5e55d74f3211c796.css","precedence":"next"}]
7:["$","link","2",{"rel":"stylesheet","href":"/_next/static/chunks/b59bad6ea4f112f2.css","precedence":"next"}]
8:["$","script","script-0",{"src":"/_next/static/chunks/0a1497ca0a1721ad.js","async":true}]
9:["$","script","script-1",{"src":"/_next/static/chunks/4ec1bf7a32b70f87.js","async":true}]
a:["$","script","script-2",{"src":"/_next/static/chunks/276b22541034e0ea.js","async":true}]
b:["$","$L50",null,{"children":["$","$51",null,{"name":"Next.MetadataOutlet","children":"$@52"}]}]
f:["$","p","p-0",{"children":"不知不觉，Gatsby博客已经上线了一年多。在这一年中，虽然从表面看起来博客变化不大，但是我一直在对博客做一些更新工作。特别是最近一个月，我对博客一些耽搁已久的问题进行了解决，使整个博客更加的完善了。这篇简单的文章就简地列举一下最近博客一些特别值得提到的更新，目前存在的问题，以及对博客的未来发展做一些展望和规划。"}]
53:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z10:["$","h1","h1-1",{"id":"更新","children":[["$","a","更新",{"href":"#更新","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$53","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"更新"]}]
54:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z11:["$","h2","h2-0",{"id":"rss恢复支持","children":[["$","a","rss恢复支持",{"href":"#rss恢复支持","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$54","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"RSS恢复支持"]}]
12:["$","p","p-1",{"children":["博客的RSS源地址是：",["$","a","a-0",{"href":"https://ddadaal.me/rss.xml","children":"https://ddadaal.me/rss.xml"}],"。欢迎订阅！"]}]
13:["$","p","p-2",{"children":["其实博客从很早开始（具体来说，从去年10月的",["$","a","a-0",{"href":"https://github.com/vicblog/VicBlog-Gatsby/commit/e2e469ae05646590c0a05755e4e23f384102120d#diff-b9e136416b90437fa1dac910280b45fc","children":"e2e469"}],"开始）就已经加入了RSS支持，但是那时候的代码就是随便从网上抄了一段，没有对博客比较特殊的地方（例如说多语言的支持，存在不能显示在列表中的文章等）进行定制，后面对博客一些更新的时候也都直接放弃了RSS。这几天，我针对博客的RSS的功能进行了一些修复，包括：",["$","strong","strong-0",{"children":"修复文章中不合法的日期串"}],"、",["$","strong","strong-1",{"children":"RSS项中的原文链接变成绝对地址而不是相对地址"}],"，",["$","strong","strong-2",{"children":"重新修改序列化方法"}],"等，使得博客的RSS功能基本上可以正常使用了。博客的RSS源地址也在",["$","a","a-1",{"href":"https://validator.w3.org/feed/","children":"W3C的Feed Validation Service"}],"中成功认证，对于大多数RSS阅读器来说已经可以正常使用了。"]}]
14:["$","p","p-3",{"children":["$","$L55","img-0",{"src":"/articles/asset/contents/20190926-blog-updates-1/rss-valid.png","imageSize":{"height":345,"width":1055},"imageProps":{"src":"rss-valid.png","alt":"有效性认证"}}]}]
15:["$","p","p-4",{"children":["$","$L55","img-0",{"src":"/articles/asset/contents/20190926-blog-updates-1/rss-list.png","imageSize":{"height":941,"width":1216},"imageProps":{"src":"rss-list.png","alt":"文章列表（Newsflow UWP应用）"}}]}]
16:["$","p","p-5",{"children":["$","$L55","img-0",{"src":"/articles/asset/contents/20190926-blog-updates-1/rss-content.png","imageSize":{"height":941,"width":1216},"imageProps":{"src":"rss-content.png","alt":"文章内容（Newsflow UWP应用）"}}]}]
17:["$","p","p-6",{"children":["当然，根据认证服务的结果可以发现，博客的RSS还有一些问题，其中比较严重是",["$","strong","strong-0",{"children":"文章内容的图片地址是相对地址，而不是绝对地址"}],"，这造成了包括Read（一个Android RSS应用，",["$","a","a-0",{"href":"https://play.google.com/store/apps/details?id=com.read.app","children":"Google Play"}],"）等一些工具不能正确显示图片。但是这些问题可能在短时间内无法被解决，因为我目前暂时没有找到有效的、可扩展的方法hook进入Gatsby构建时markdown的渲染流程，并根据我的需求进行修改。"]}]
18:["$","p","p-7",{"children":["详细地说，目前，将MD编译成HTML是由",["$","a","a-0",{"href":"https://remark.js.org/","children":"remark"}],"，以及很多周边插件（例如",["$","a","a-1",{"href":"https://github.com/Gatsbyjs/Gatsby/tree/master/packages/Gatsby-transformer-remark","children":"Gatsby-transformer-remark"}],"）共同完成的。这些插件都有一些默认行为（例如图片地址是相对地址）等。"]}]
19:["$","p","p-8",{"children":["这些默认行为在大多数情况下都是合理的，让开发者能够开箱即用。但是，",["$","strong","strong-0",{"children":"约定大于配置的反面就是配置常常不够完善，在遇到少见的需求的时候让开发者感到束手束脚。"}]]}]
1a:["$","p","p-9",{"children":["之前，为了一些特殊需求（例如在markdown里插入React组件（我使用过MDX个人不太好用），给code元素加入一些特殊元素（例如显示语言、行号、复制按钮等）），我多次尝试过hook进remark的编译过程，",["$","strong","strong-0",{"children":"在remark进行渲染的时候修改AST，使得进入Gatsby数据源中的htmlAst和html就是经过定制的"}],"，但是一直没能找到合适的方法。"]}]
1b:["$","p","p-10",{"children":["后来，这些功能都实现了，但是不够优雅：在代码中，从",["$","strong","strong-0",{"children":"Gatsby数据源"}],"中获取remark渲染后的AST，修改AST后再重新使用",["$","a","a-0",{"href":"https://github.com/rehypejs/rehype-react","children":"rehype-react"}],"渲染（对这里感兴趣的同学可以查看代码的",["$","a","a-1",{"href":"https://github.com/vicblog/VicBlog-Gatsby/blob/master/src/components/Article/ContentDisplay/index.tsx","children":"ArticleContentDisplay"}],"组件）。"]}]
1c:["$","p","p-11",{"children":["这样做虽然能够实现需求，但由于在",["$","strong","strong-0",{"children":"Gatsby的数据源"}],"中，其htmlAst和html并没有经过定制（定制是在页面渲染的时候执行的），这也造成目前各个方法获得的HTML并不统一。"]}]
1d:["$","p","p-12",{"children":"没有一个可靠的hook渲染过程的方法，也造成了我没有办法修改remark的默认行为，其中就包含图片地址为相对地址而不是绝对地址这个问题。"}]
1e:["$","p","p-13",{"children":"我正在努力想办法解决这个问题，但是看情况短时间内解决希望不大。"}]
56:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z1f:["$","h2","h2-1",{"id":"使用国内托管腾讯云的coding个人版","children":[["$","a","使用国内托管腾讯云的coding个人版",{"href":"#使用国内托管腾讯云的coding个人版","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$56","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],["使用国内托管（腾讯云的",["$","a","a-0",{"href":"https://dev.tencent.com/production","children":"CODING个人版"}],"）"]]}]
20:["$","p","p-14",{"children":["博客一直是托管在GitHub Pages上的。GitHub Pages很方便，零开销，在国外用的很广，网络上的教程也到处都是。但是它的问题是在",["$","strong","strong-0",{"children":"国内速度非常慢，且非常不稳定"}],"。即使我的博客的相关文件已经比较小了，但是GitHub Pages在国内的速度也极大地影响了网站的用户体验。要是当某篇文章有图片，那体验就更糟了。"]}]
21:["$","p","p-15",{"children":["多亏了我的博客是静态博客，解决这个问题，本质上只需要把文件托管到某个国内访问速度快的类Pages服务上即可解决问题（点",["$","a","a-0",{"href":"/about/project","children":"关于博客"}],"查看博客工作原理介绍）。我把目标投向了17年参加南京四校Hack.Christmas时赞助商提供的CODING.NET一年免费VIP账号。虽然那时候VIP基本已经过期，但是当时体验还行，并且也发现了它也提供类似GitHub Pages的功能（也叫Pages服务）。于是，我进行了以下操作："]}]
22:["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"在CODING.NET上开启一个repo，存放博客的文件"}],"\n",["$","li","li-1",{"children":"给这个repo开启Pages服务"}],"\n",["$","li","li-2",{"children":["修改",["$","a","a-0",{"href":"https://github.com/vicblog/VicBlog-Gatsby/blob/master/.travis.yml","children":"CI脚本"}],"，构建后向GitHub和CODING.NET的repo都推送一次"]}],"\n"]}]
23:["$","p","p-16",{"children":"经过测试，CODING.NET的体验还是非常良好的，在国内的速度也非常不错，于是："}]
24:["$","ul","ul-1",{"children":["\n",["$","li","li-0",{"children":"修改DNS，将根记录（ddadaal.me）指向了CODING.NET，二级域名（pages.ddadaal.me）指向原有GitHub Pages repo"}],"\n",["$","li","li-1",{"children":"在GitHub和CODING.NET平台上修改域名设置"}],"\n"]}]
25:["$","p","p-17",{"children":"这样，我的根域名就被解析到CODING.NET提供的Pages服务上。经过测试，网站的速度提高了非常多，国内用户的体验得到了很大的提高。"}]
26:["$","p","p-18",{"children":["$","$L55","img-0",{"src":"/articles/asset/contents/20190926-blog-updates-1/speed-comparison.png","imageSize":{"height":557,"width":1220},"imageProps":{"src":"speed-comparison.png","alt":"站长工具"}}]}]
57:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z27:["$","h2","h2-2",{"id":"多语言环境下文章地址改进","children":[["$","a","多语言环境下文章地址改进",{"href":"#多语言环境下文章地址改进","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$57","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"多语言环境下文章地址改进"]}]
28:["$","p","p-19",{"children":["之前，为了支持多语言，本网站的所有文章的地址末尾都增加了语言（cn/en）为了表示这个文章的语言是什么，例如",["$","a","a-0",{"href":"/about/me","children":"关于我"}],"就有两个版本，",["$","code","code-0",{"children":"/about/me/cn"}],"（中文）和",["$","code","code-1",{"children":"/about/me/en"}],"（英文），另外对",["$","code","code-2",{"children":"/about/me"}],"这种根路径增加了",["$","strong","strong-0",{"children":"客户端的跳转"}],"（即在浏览器执行了JS进行跳转，而不是通过服务器发送301（Moved Permanently）的响应。对于静态博客，服务器发送301是不可能的，因为服务器端不能执行这么“复杂”的逻辑）到",["$","strong","strong-1",{"children":"本文章的所有版本的第一种语言版本"}],"（知道你对第一种语言版本感到疑惑，继续往下看）。"]}]
29:["$","p","p-20",{"children":"这样做有2个问题："}]
2a:["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":"对于所有文章，包括占大多数的只有一种语言版本的文章，其地址栏最后都有语言字符串，造成路径不必要的太长；"}],"\n",["$","li","li-1",{"children":"这个“第一种语言版本”的结果每次执行可能是不相同的，有可能造成根路径在每次更新后都出现变化（没有验证过，只是存在这种可能）。"}],"\n"]}]
2b:["$","p","p-21",{"children":["我在最近也重新设计了路径的计算方法，较好的解决了这个问题。以id为",["$","code","code-0",{"children":"an-article"}],"的、有两种语言版本（",["$","code","code-1",{"children":"cn"}],"和",["$","code","code-2",{"children":"en"}],"）文章来举例子："]}]
2c:["$","ol","ol-1",{"children":["\n",["$","li","li-0",{"children":["首先，对一篇文章的所有语言版本，",["$","strong","strong-0",{"children":"根据lang的字典序进行排序"}],"，使得每次所有版本的顺序都是相同的，解决了第二个问题\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["例子中，顺序为",["$","code","code-0",{"children":"[cn, en]"}],"；"]}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["选取中文版本（",["$","code","code-0",{"children":"cn"}],"）的文章，或者如果中文版本不存在的话，选择第一个版本（由于所有版本的顺序是相同的，第一个版本也总是相同的），生成根路径",["$","code","code-1",{"children":"/articles/${articleId}"}],"的页面\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["例子中，选择了中文（",["$","code","code-0",{"children":"cn"}],"）版本生成",["$","code","code-1",{"children":"/article/an-article"}],"的页面；"]}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["生成",["$","code","code-0",{"children":"/articles/${articleId}/${上一步生成的版本的语言}"}],"到",["$","code","code-1",{"children":"/articles/${articleId}"}],"的客户端跳转\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["例子中，生成了",["$","code","code-0",{"children":"/articles/an-article/cn"}],"到",["$","code","code-1",{"children":"/articles/an-article"}],"的跳转"]}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":["对其他所有语言，生成",["$","code","code-0",{"children":"/articles/${articleId}/${语言}"}],"的页面。"]}],"\n"]}]
2d:["$","p","p-22",{"children":["通过这样，可以保证博客中大多数单语言的文章都生成在",["$","strong","strong-0",{"children":"根路径"}],"，不再有碍眼的多余的语言字符串，同时也保证了多语言功能和向前兼容性。"]}]
2e:["$","p","p-23",{"children":"举几个例子："}]
2f:["$","table","table-0",{"children":[["$","thead","thead-0",{"children":["$","tr","tr-0",{"children":[["$","th","th-0",{"children":"文章"}],["$","th","th-1",{"children":"语言"}],["$","th","th-2",{"children":"之前的路径"}],["$","th","th-3",{"children":"现在的路径"}]]}]}],["$","tbody","tbody-0",{"children":[["$","tr","tr-0",{"children":[["$","td","td-0",{"children":"关于我"}],["$","td","td-1",{"children":"cn"}],["$","td","td-2",{"children":["$","code","code-0",{"children":"/about/me/cn"}]}],["$","td","td-3",{"children":["$","code","code-0",{"children":"/about/me"}]}]]}],["$","tr","tr-1",{"children":[["$","td","td-0",{"children":"关于我"}],["$","td","td-1",{"children":"en"}],["$","td","td-2",{"children":["$","code","code-0",{"children":"/about/me/en"}]}],["$","td","td-3",{"children":["$","code","code-0",{"children":"/about/me/en"}]}]]}],["$","tr","tr-2",{"children":[["$","td","td-0",{"children":"2018年总结"}],["$","td","td-1",{"children":"cn"}],["$","td","td-2",{"children":["$","code","code-0",{"children":"/articles/summary-for-2018/cn"}]}],["$","td","td-3",{"children":["$","code","code-0",{"children":"/articles/summary-for-2018"}]}]]}],["$","tr","tr-3",{"children":[["$","td","td-0",{"children":"Simstate and Why"}],["$","td","td-1",{"children":"en"}],["$","td","td-2",{"children":["$","code","code-0",{"children":"/articles/simstate-and-why/en"}]}],["$","td","td-3",{"children":["$","code","code-0",{"children":"/articles/simstate-and-why"}]}]]}]]}]]}]
30:["$","p","p-24",{"children":["最后提一下，一般来说，网站要支持多种语言，目前大家通常使用以下的两种方法实现，但是由于他们都需要特别的处理，也为了能够",["$","strong","strong-0",{"children":"热切换语言"}],"，最后采用了以上这个比较简单的方法（即在路径最后增加语言表示）实现："]}]
31:["$","table","table-1",{"children":[["$","thead","thead-0",{"children":["$","tr","tr-0",{"children":[["$","th","th-0",{"children":"方法"}],["$","th","th-1",{"children":"解释"}],["$","th","th-2",{"children":"例子"}],["$","th","th-3",{"children":"问题"}]]}]}],["$","tbody","tbody-0",{"children":[["$","tr","tr-0",{"children":[["$","td","td-0",{"children":"二级域名"}],["$","td","td-1",{"children":"每个语言的子网站都有自己的二级域名"}],["$","td","td-2",{"children":"淘宝"}],["$","td","td-3",{"children":"本质上是两个网站，当一种语言的页面不存在时，需要做跳转，懒得维护"}]]}],["$","tr","tr-1",{"children":[["$","td","td-0",{"children":"子页面"}],["$","td","td-1",{"children":["每个语言采用类似",["$","code","code-0",{"children":"https://domain.com/{zh-CN, en-US}/path/to/page"}],"的方法，通过路径的第一个部分区分不同语言"]}],["$","td","td-2",{"children":["微软官网（",["$","a","a-0",{"href":"https://www.microsoft.com/en-us/locale.aspx?absoluteReturnUrl=https%3a%2f%2fwww.microsoft.com%2fzh-cn","children":"切换语言的页面"}],"）"]}],["$","td","td-3",{"children":["处理路径时（例如导航栏高亮），需要单独切分掉",["$","code","code-0",{"children":"pathname"}],"的第一部分；当一种语言的页面不存在时，需要做跳转"]}]]}]]}]]}]
58:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z32:["$","h2","h2-3",{"id":"使用自己开发的simstate进行状态管理","children":[["$","a","使用自己开发的simstate进行状态管理",{"href":"#使用自己开发的simstate进行状态管理","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$58","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],["使用自己开发的",["$","a","a-0",{"href":"https://github.com/ddadaal/simstate","children":"simstate"}],"进行状态管理"]]}]
33:["$","p","p-25",{"children":["博客一开始是使用",["$","a","a-0",{"href":"https://github.com/jamiebuilds/unstated","children":"unstated"}],"进行状态管理的。这个库非常的简单易用，很符合react的理念，于是当时我非常喜爱这个库。但是随着后来hooks的推广和unstated迟迟没有跟进hooks等原因（其实已经跟进了只是当时我的不知道……），我认为是时候写一个自己的状态管理库了。这之后故事可以查看",["$","a","a-1",{"href":"/articles/simstate-and-why","children":"Simstate and Why"}],"文章，这里就不说了。"]}]
34:["$","p","p-26",{"children":"在v3.0时，我重构了simstate，完全抛弃了class的概念，完全使用React原生的hook就可以完成状态管理。而博客就是第一个完全采用simstate v3.0的项目。"}]
35:["$","p","p-27",{"children":["$","$L55","img-0",{"src":"/articles/asset/contents/20190926-blog-updates-1/simstate-in-action.png","imageSize":{"height":859,"width":1687},"imageProps":{"src":"simstate-in-action.png","alt":"使用simstate设计Store（左）和使用Store（右）"}}]}]
36:["$","p","p-28",{"children":"在使用新版本的时候，我也积累了一些在项目中正确使用此项目的经验，例如说："}]
37:["$","ul","ul-2",{"children":["\n",["$","li","li-0",{"children":["Store取名最好是",["$","strong","strong-0",{"children":"大写字母"}],"开头，因为在使用的时候经常出现",["$","span","span-0",{"data-rehype-pretty-code-figure":"","children":["$","code","code-0",{"data-language":"ts","data-theme":"one-dark-pro","style":{"backgroundColor":"#282c34","color":"#abb2bf"},"children":["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"const"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" aStore"}],["$","span","span-2",{"style":{"color":"#56B6C2"},"children":" ="}],["$","span","span-3",{"style":{"color":"#61AFEF"},"children":" useStore"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":"AStore"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":");"}]]}]}]}],"的代码，若使用小写字母开头，这代码会编译失败。这也可以帮助同时使用多个Store的情况时，区分不同的Store实例；"]}],"\n",["$","li","li-1",{"children":["如何写一个专门的Store（例如博客项目的",["$","a","a-0",{"href":"https://github.com/vicblog/VicBlog-Gatsby/blob/master/src/stores/LocationStore.tsx","children":"LocationStore"}],"）来管理浏览器history"]}],"\n",["$","li","li-2",{"children":["在把Store和自己的hook（例如",["$","code","code-0",{"children":"useCallback"}],"等）进行组合的时候，需要把Store实例加为hook的一个依赖，因为Store实例是",["$","strong","strong-0",{"children":"不可变的"}]]}],"\n"]}]
38:["$","p","p-29",{"children":["这些常见问题也写到了",["$","a","a-0",{"href":"https://github.com/ddadaal/simstate","children":"simstate项目的README"}],"中，也是给未来自己（和其他人，如果有人在用的话）带来方便，帮助解决这种常见问题。"]}]
59:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z39:["$","h2","h2-4",{"id":"其他值得提到的近期的修正太远的我也记不住了","children":[["$","a","其他值得提到的近期的修正太远的我也记不住了",{"href":"#其他值得提到的近期的修正太远的我也记不住了","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$59","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"其他值得提到的近期的修正（太远的我也记不住了……）"]}]
3a:["$","ul","ul-3",{"children":["\n",["$","li","li-0",{"children":["修正了错误的授权协议（",["$","code","code-0",{"children":"BY CC-SA 4.0"}]," => ",["$","code","code-1",{"children":"CC BY-SA 4.0"}],"）"]}],"\n",["$","li","li-1",{"children":["最后更新时间和文章发表时间正确支持了多时区（时间将会以用户的本地时区进行显示）\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"在CI上构建时，机器给出的时间是UTC时间，如果不经过处理就显示会让人产生误解"}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["修正了一些没有正确使用的HTML元素的属性造成可访问性（accessibility）问题\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"例如，在文章列表界面中用鼠标点击文章标题，可以进入文章内容。但是使用vimium等工具在文章列表界面导航时，会发现文章项的标题的链接不能点击。"}],"\n",["$","li","li-1",{"children":["这是因为在实现时，点击标题进入文章是通过绑定",["$","code","code-0",{"children":"onClick"}],"事件跳转实现，不符合HTML标准使用",["$","code","code-1",{"children":"a"}],"标签的",["$","code","code-2",{"children":"href"}],"属性进行跳转。"]}],"\n",["$","li","li-2",{"children":"修改后，vimium恢复了正常。"}],"\n"]}],"\n"]}],"\n"]}]
5a:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z3b:["$","h1","h1-2",{"id":"问题和后续计划","children":[["$","a","问题和后续计划",{"href":"#问题和后续计划","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$5a","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"问题和后续计划"]}]
3c:["$","p","p-30",{"children":["去年",["$","a","a-0",{"href":"/articles/gatsby-powered-vicblog-online","children":"Gatsby博客上线"}],"的时候提到："]}]
3d:["$","blockquote","blockquote-0",{"children":["\n",["$","p","p-0",{"children":"博客的大厦已经基本建好，接下来只需要小修小补即可。"}],"\n"]}]
3e:["$","p","p-31",{"children":"其实这一年中博客的发展和变化还是比较大的，已有的功能继续完善，没有或者缺乏的功能也正在加入。在接下来，我会在以下几个方面继续完善我的博客："}]
3f:["$","ol","ol-2",{"children":["\n",["$","li","li-0",{"children":"文章数量和质量"}],"\n"]}]
40:["$","p","p-32",{"children":"毕竟博客的本职工作的写文章（而不是像我这样大多数时间在写网站本身……），以后我会带来尽可能多尽可能高质量的原创文章。"}]
41:["$","ol","ol-3",{"children":["\n",["$","li","li-0",{"children":"重构样式和完善UI设计"}],"\n"]}]
42:["$","p","p-33",{"children":["目前博客是使用大名鼎鼎的",["$","a","a-0",{"href":"https://getbootstrap.com/","children":"bootstrap"}],"的组件库进行设计的。虽然很方便，bootstrap也还算比较耐看，但是，由于要将使用SCSS编写的bootstrap和我偏好的CSS-in-JS方案（例如",["$","a","a-1",{"href":"https://www.styled-components.com/","children":"styled-components"}],"）组合起来使用，造成了一些问题："]}]
43:["$","ul","ul-4",{"children":["\n",["$","li","li-0",{"children":["目前我的博客的样式有",["$","code","code-0",{"children":"CSS"}],"，bootstrap带来的",["$","code","code-1",{"children":"SCSS"}],"和分散在各个组件里的",["$","code","code-2",{"children":"styled-components"}],"组件，非常的混乱，不容易维护（例如说某个共用颜色，必须要在多个地方定义多次）；"]}],"\n",["$","li","li-1",{"children":["由于上个原因，没有一个中心化的配置，很难实现",["$","strong","strong-0",{"children":"黑暗模式"}]]}],"\n",["$","li","li-2",{"children":["基于传统的CSS/SCSS的",["$","strong","strong-0",{"children":"全局的样式解决方案"}],"和",["$","strong","strong-1",{"children":"组件化"}],"的React和CSS-in-JS是两种不一样的思维方式，让开发者有一种",["$","strong","strong-2",{"children":"思维分裂"}],"的感觉\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["例如：对于重用一个样式的需求，\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["使用CSS/SCSS的思维方式是写一个类（使用BEM命名规范规避类型冲突），然后通过组件的",["$","code","code-0",{"children":"className"}],"组合样式；"]}],"\n",["$","li","li-1",{"children":["而",["$","code","code-0",{"children":"styled-components"}],"的思维方式，是在一个已有的样式的组件上，通过",["$","code","code-1",{"children":"styled(Component)` /** styles **/ ` "}],"进行扩展。"]}],"\n",["$","li","li-2",{"children":["这个",["$","a","a-0",{"href":"https://github.com/vicblog/VicBlog-Gatsby/blob/master/src/components/UI/ListGroup/ListGroupHeader.tsx","children":["$","code","code-0",{"children":"ListGroupHeader"}]}],"组件就是强行使用组件化的方式重用CSS的样式，这种模板代码非常的浪费时间和不灵活。"]}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":"bootstrap看厌了，想看点新鲜的 ::smile::"}],"\n"]}]
44:["$","p","p-34",{"children":["5月份的时候，我尝试在",["$","a","a-0",{"href":"https://styled-system.com/","children":["$","code","code-0",{"children":"styled-system"}]}],"的支持下写自己的UI库",["$","a","a-1",{"href":"https://github.com/ddadaal/vicui","children":"vicui"}],"。组件基本都完成了，但是在使用的时候遇到了",["$","a","a-2",{"href":"https://github.com/ddadaal/vicui/issues/1","children":"很奇怪的问题"}],"，造成我完全无法在其他项目中使用。"]}]
45:["$","p","p-35",{"children":["同时，我在项目中采用了将",["$","a","a-0",{"href":"https://rebassjs.org/theming/","children":"Rebass"}],"这样的",["$","code","code-0",{"children":"primitive UI components"}],"和",["$","code","code-1",{"children":"CSS"}],"混用的方式，使得不仅在保证在React中使用方便和可扩展性，同时在以后迁移到React生态圈之外时，已有的CSS的可以重用，但是在",["$","code","code-2",{"children":"无法避免全局样式类名"}],"、",["$","code","code-3",{"children":"对用户公开多大自定义样式的能力"}],"等问题上也存在一些问题。"]}]
46:["$","p","p-36",{"children":"对于样式，这个前端”永远的难题“，我还需要更多的学习和实践。"}]
47:["$","ol","ol-4",{"start":3,"children":["\n",["$","li","li-0",{"children":"补充功能"}],"\n"]}]
48:["$","p","p-37",{"children":["静态博客无法单独实现",["$","strong","strong-0",{"children":"所有依赖于服务器的功能"}],"，包括访客统计、评论、点赞等功能。我已经使用",["$","a","a-0",{"href":"https://github.com/gitalk/gitalk","children":"gitalk"}],"解决了评论问题，解决地还算满意；使用",["$","a","a-1",{"href":"https://www.cnzz.com","children":"CNZZ"}],"解决访客统计功能，虽说是能统计，但是它甚至没有提供API，不能编程实现网站访客的显示，更别提分文章的统计了；至于点赞，这还是算了吧……"]}]
49:["$","p","p-38",{"children":"要解决这个问题，可以自己写后端，将这个博客变成一个SPA。目前使用场景非常适合微服务，即每个功能之间是的独立的。例如，对访客统计写一个服务，对点赞写一个服务，各个服务之间相互独立，独立开发、渐进部署。我也正在学习这个方面的技术，期待早日能有一个可靠的、可扩展的、博客专用的基础设施和服务能够上线。"}]
4a:["$","ol","ol-5",{"start":4,"children":["\n",["$","li","li-0",{"children":"一些其他问题：例如中文字数统计不正确、之上提到的自定义MD渲染过程等"}],"\n"]}]
5b:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z4b:["$","h1","h1-3",{"id":"感谢","children":[["$","a","感谢",{"href":"#感谢","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$5b","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"感谢！"]}]
4c:["$","p","p-39",{"children":"博客已经走过一年了。在这一年中感谢所有支持我的博客的读者和网友，感谢你们对我文章的支持！我也会在之后继续完善博客的内容、设计和功能，让博客更加地完善、丰富和易用！"}]
4d:["$","div",null,{"className":"hidden lg:block lg:w-[25%]","children":["$","$L5c",null,{"toc":[{"depth":1,"value":"前言","id":"前言"},{"depth":1,"value":"更新","id":"更新","children":[{"depth":2,"value":"RSS恢复支持","id":"rss恢复支持"},{"depth":2,"value":"使用国内托管（腾讯云的CODING个人版）","id":"使用国内托管腾讯云的coding个人版"},{"depth":2,"value":"多语言环境下文章地址改进","id":"多语言环境下文章地址改进"},{"depth":2,"value":"使用自己开发的simstate进行状态管理","id":"使用自己开发的simstate进行状态管理"},{"depth":2,"value":"其他值得提到的近期的修正（太远的我也记不住了……）","id":"其他值得提到的近期的修正太远的我也记不住了"}]},{"depth":1,"value":"问题和后续计划","id":"问题和后续计划"},{"depth":1,"value":"感谢！","id":"感谢"}],"hasSummary":true}]}]
4e:["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","$L5d",null,{"relatedArticles":[{"id":"simstate-and-why","langVersions":[{"excerpt":"\n# What is it?\n\n[![npm](https://img.shields.io/npm/v/simstate.svg?style=flat-square)](https://www.np","lang":"en","time":"2019-02-14 23:50:00 UTC+8","title":"Simstate and Why"}]},{"id":"gatsby-powered-vicblog-online","langVersions":[{"excerpt":"\n# 为什么又换了？？\n\n相信大家看到这个文章，第一反应如标题：**为什么又换了？？**\n\n上个寒假花了20天，用React+ASP.NET Core完整撸了一套博客网站出来。本以为就这样就可以了，结","lang":"cn","time":"2018-11-17 14:51:00 UTC+8","title":"新博客正式上线"}]}]}]}]
4f:["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","$L5e",null,{"articleId":"blog-updates-1","articleTitle":"博客的发展一：RSS，国内托管……"}]}]
52:null
