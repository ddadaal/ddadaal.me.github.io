1:"$Sreact.fragment"
2:I[28979,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"ArticleFrontmatter"]
c:I[21753,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"ArticleSummarization"]
d:I[79817,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"Gallery"]
5a:I[23491,["/_next/static/chunks/2caa33a942c5f527.js","/_next/static/chunks/59983278a34fd25c.js"],"OutletBoundary"]
5b:"$Sreact.suspense"
5d:I[72053,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"ArticleImage"]
69:I[14620,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"ArticleToc"]
6a:I[39182,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"RelatedArticles"]
6b:I[42449,["/_next/static/chunks/8d29a04bcfe27c24.js","/_next/static/chunks/3dff3d4c63cf346e.js","/_next/static/chunks/b3af52d5d180873a.js","/_next/static/chunks/86b442c1397f7351.js","/_next/static/chunks/0a1497ca0a1721ad.js","/_next/static/chunks/4ec1bf7a32b70f87.js","/_next/static/chunks/276b22541034e0ea.js"],"CommentPanelWithCurrentLanguage"]
:HL["/_next/static/chunks/44d2e091595b3eca.css","style"]
:HL["/_next/static/chunks/5e55d74f3211c796.css","style"]
:HL["/_next/static/chunks/b59bad6ea4f112f2.css","style"]
3:T1fe5,
# WSL 2使用GUI

众所周知，WSL 2开始使用真正的Linux内核，所以理论上来说，我们已经可以在WSL 2运行几乎所有的Linux程序，包括带有GUI的Linux程序。但是目前来说，由于第一方X11 Server的缺失，WSL 2主要还是在命令行中使用。

Build 2020上，微软已经宣称[开始做WSL 2的GUI支持](https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/#wsl-gui)，并已经给出了宣传图。

![Build 2020上WSL 2的GUI支持图片（来源：https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/#wsl-gui）](build-2020-wsl-2-gui.png)

但是，事实上，借助X11 Forwarding，我们现在已经可以做到类似的效果了。

如果你之前折腾过在WSL上跑GNOME等各种桌面环境，则这篇文章的原理和那些文章是一致的，但是由于不需要启动桌面环境，其使用更加方便，各种Linux程序窗口和Windows的集成更加无缝，个人认为实用性比启动一个Linux桌面环境再在里面启动程序更强。

下图为跑在WSL 2上的IDEA、通过IDEA启动的JavaFX程序与Windows计算器共存的截图，注意看到状态栏上的窗口图标的IDEA图标，完美与Windows进行兼容。

![效果图](idea-javafx-calc.png)

# X11 Forwarding

X Window是目前Linux上使用得最为广泛的窗口系统。虽然它有各种各样的问题（包括不支持多个显示器不同DPI的硬伤），我在使用Linux桌面的时候也经常推荐Wayland作为代替，但是其**X11 Forwarding**的特性是相当的有用。

下图是X11的架构。

![X11架构（来源：https://en.wikipedia.org/wiki/X_Window_System_protocols_and_architecture）](x11-architecture.png)

在X11系统中，显示GUI的程序（Client，包括各种浏览器、IDE等的程序）和用于真正负责显示、以及捕捉键盘、鼠标等输入的服务器（Server）是分离的，且二者之间通过网络通信的。

对于普通的Linux系统，其Server和Client是跑在一台机器上的。但是，由于二者之间是通过网络进行通信的，所以X11窗口系统不需要Server和Client运行在同一台机器上。

所以，我们可以在其他电脑（甚至不需要是Linux）上跑一个X Server，然后通过配置DISPLAY环境变量，让X Client和位于网络上的X Server相连，就能让在一台电脑上运行的程序的GUI显示在另一台电脑上。

这就是X11 Forwarding，将一台电脑的程序的GUI Forward到另一台电脑上去显示。

# 配置

X11 Forwarding的原理很简单，配置其实也很简单。其分为两个大部分：Windows端（Server端）和WSL端（Client端）。

## Windows端

在Windows端需要安装一个X Server。

X Server有多个，我比较建议[vcxsrv](https://github.com/ArcticaProject/vcxsrv)（名字记忆：vc x server），因为其功能和操作比较简单。

可以从上面给的github链接进行安装，也可以通过scoop进行安装，scoop安装命令如下：

```
scoop install vcxsrv
```

安装成功后，在开始菜单或者其他启动器启动新安装的XLaunch，会弹出一个向导以配置X Server的属性。在一步选择Multiple windows，第三步选择Disable access control，其他不变。

![第一步：选择Multiple windows](xlauncher-1.png)

![第二步：什么都不选](xlauncher-2.png)

![第三步：勾选Disable access control](xlauncher-3.png)

![第四步：确定以启动](xlauncher-4.png)

最后在状态栏可以看到一个新的图标，鼠标悬浮上去可以看到其地址，其格式是`{电脑的hostname}:{地址}`，记住后面这个地址。例如说，下图中，其地址为`0.0`。

![状态栏图标和地址](xlaunch-icon.png)

## WSL端

WSL端需要做两个工作：

- 设置DISPLAY变量
- 配置字体等GUI相关的设置

### 设置DISPLAY

DISPLAY环境变量用来指定X Server的地址。由于WSL 2使用虚拟机，其IP和Windows不同，所以需要进行一些特殊方法来访问Windows上的X Server。

在.bashrc或者.zshrc里加入以下代码，然后重新进入WSL。

```bash
# 若安装了Docker for Windows，且启动了WSL 2后端
export WINDOWS_HOST="host.docker.internal"

# 若没有安装Docker for Windows，则可以从/etc/resolv.conf中读取Windows的IP
# 这个IP有可能会变，所以不能直接一劳永逸。
# export WINDOWS_HOST=$(grep nameserver /etc/resolv.conf | awk '{print $2}')

# 可以尝试使用Windows的hostname，未尝试过
# 但是我在Hyper-V虚拟机中使用hostname访问Windows有时候会遇到奇怪的卡住的问题，不推荐
# export WINDOWS_HOST={你的Windows的hostname}

# 下面的"地址"替换为之前记住的Windows上的X Server的地址，一般（以及上面的例子）是0:0
export DISPLAY="$WINDOWS_HOSRT:地址"
```

### 配置字体

由于WSL的distro一般都比较简单，可能没有安装字体以及对应的配置，所以需要自己手动安装字体。

这里以`noto-sans-cjk`举例，你可以自己安装自己想要的字体。

字体安装后不能直接启动GUI程序，现在直接启动会遇到奇怪的报错问题（忘记截图了，可以自己试试）。

可以安装一个简单的X程序来初始化，并验证X11环境是否已经配置成功：如xclock：

```bash
sudo pacman -S xorg-xclock
```

### 使用xclock测试是否能够正常使用

安装之后，确认DISPLAY变量已经设置后，输入

```bash
xclock
```

若弹出一个时钟窗口，则配置成功。

![xclock](xclock.png)

## 效果

现在你可以开始在命令行里启动各种程序了：

Intellij IDEA在WSL 2上启动IDEA比Windows上快多了，我正在考虑将整个Java环境迁移到WSL 2中。

![Intellij IDEA](intellij-idea.png)

VSCode也可以以Linux窗口来启动，其启动速度也比Windows快多了：

![VSCode](vscode.png)

在设置中设置以下后VSCode可以隐藏标题栏，但是这样之后无法拖动窗口，最大化窗口后也无法还原，所以不建议。

```json
{
  "window.titleBarStyle": "custom"
}
```

![VSCode隐藏标题栏](vscode-custom-titlebar.png)

一些其他细节：

- 这些X Window的剪贴板和Windows剪贴板也是同步的，可以自由地双向复制粘贴
- vcxsrv适配了高DPI，在高分屏上使用完全没有问题

## 限制

这样的解决方案虽然看上去很完美，但是有一些限制，但是可用性也非常高了：

- 无法隐藏丑陋的标题栏
- 无法直接调用Windows的输入法，需要在Linux下重新配置输入法
- 有可能仍然遇到字体问题（如在现在的情况下编译JavaFX程序），安装完一整套字体、正确设置`/etc/locale.gen`之后即可修复。

## 后续启动

以后重启电脑后，只需要重新启动XLauncher，然后在WSL中启动GUI程序即可使用。

# 延伸和总结

这套配置也不仅限WSL，任何虚拟机和远端电脑上的Linux应用程序均可以使用SSH和X11 Forwarding进行连接。

使用SSH和X11 Forwarding可以解决很多远程桌面相关的问题。

我们很多时候使用虚拟机安装Linux系统，其实并不是要使用Linux的桌面环境，而是使用Linux的命令行和一些GUI程序。

对于命令行程序，使用SSH完全可以解决；

而对于GUI程序，我们也可以通过这篇文章介绍的X11 Forwarding来解决。

和正常的连接到Linux再进行操作相比，SSH和X11 Forwarding的优势其实很明显：

- 避免进入Linux的GUI环境，而可以在我们熟悉的Windows/macOS环境下使用Linux的各种功能
- 避免配置Virtualbox Guest软件、Hyper-V的Enhanced Session等虚拟机的增强软件
- 由于避开了图形界面的模拟，SSH和X11 Forwarding也通常有更好的性能

对于WSL来说，目前的解决方案仍然有一些限制，但是我们可以发现在Build 2020上的效果图已经没有的标题栏，说明微软也正在解决一些X11和Windows集成的问题。相信当微软的X11集成正式发布时，我们在Windows上使用Linux程序的体验，可能比在Linux上使用Linux程序更好了。
0:{"buildId":"7dQlY40Cm-uDMIit5S5Jz","rsc":["$","$1","c",{"children":[["$","article",null,{"children":[["$","div",null,{"className":"bg-neutral px-4 py-8","children":["$","div",null,{"className":"max-w-7xl mx-auto min-h-[256px] flex justify-center text-center text-neutral-content","children":["$","div",null,{"className":"flex flex-col justify-center animate-slide-up","children":[["$","h1",null,{"className":"text-4xl my-2","children":"使用X11 Forwarding在WSL 2中运行GUI程序"}],["$","$L2",null,{"className":"justify-center","articleId":"run-gui-on-wsl2-with-x11-forwarding","info":{"content":"$3","title":"使用X11 Forwarding在WSL 2中运行GUI程序","date":"2020-06-04 16:15","id":"run-gui-on-wsl2-with-x11-forwarding","lang":"cn","tags":["Linux","WSL"],"related":["from-vscode-to-vim-to-both","playing-with-linux-from-machine-to-win10"],"wordCount":2044,"readingTime":10.22,"filePath":"contents/20200604-run-gui-on-wsl2-with-x11-forwarding/cn.md","summary":{"articleId":"run-gui-on-wsl2-with-x11-forwarding","lang":"cn","hash":"38d9475ccc54d2587efcee3c221858513e3fe9659c8af683b92d03bfd6330c8b","summaries":[{"metadata":{"summarizer":"azure-ai","model":"DeepSeek-R1"},"summaries":["微软在WSL 2中通过X11转发实现Linux GUI程序支持，用户需在Windows安装X Server（如vcxsrv），配置DISPLAY环境变量并设置字体。GUI应用窗口与Windows无缝集成，支持剪贴板同步和高DPI显示，但存在标题栏无法隐藏、输入法需独立配置等限制。微软已在Build 2020宣布将优化原生GUI支持，未来有望提升体验。当前方案适用于远程或虚拟机环境，通过X11转发及SSH实现高效跨平台操作，避免图形界面性能损耗。"],"startTime":"2025-02-14T13:37:03.254Z","endTime":"2025-02-14T13:37:28.655Z"},{"metadata":{"summarizer":"ollama","model":"deepseek-r1:8b"},"summaries":["要在Windows上使用Linux程序并且避免进入图形界面，可以使用SSH和X11 Forwarding进行配置。\n\n1. **安装必要工具**：\n   - 在Windows上安装`cygwin`或`WSL`，这两种工具可以帮助你运行Linux命令。\n   \n2. **设置SSH和X11 Forwarding**：\n   - 打开你的终端，输入以下命令以启用X11转发：\n     ```bash\n     eval $(ssh-agent) && ssh-add ~/.ssh/id_rsa\n     ```\n   - 保存一个临时的`~/.ssh/config`文件，以指示哪些主机可以进行X11转发：\n     ```bash\n     echo 'Host *' > ~/.ssh/config\n     echo '    ForwardX11 yes' >> ~/.ssh/config\n     echo '    X11Forwarding yes' >> ~/.ssh/config\n     ```\n\n3. **连接到Linux服务器**：\n   - 使用SSH命令连接到你的Linux服务器时，附加-X选项来启用图形界面转发：\n     ```bash\n     ssh -X yourusername@linux-server\n     ```\n   \n4. **运行Linux程序**：\n   - 在终端中使用`xdmesktop`启动桌面环境。\n   - 运行你想要的Linux程序，例如：\n     ```bash\n     /path/to/your/linux/program\n     ```\n\n5. **关闭X11转发**：\n   - 完成后按下`Ctrl + d`断开会话。\n   \n6. **确保安全性**：\n   - 确保你只允许特定的用户或IP进行X11转发，以防止未经授权的访问。\n\n通过以上步骤，你可以在Windows上运行Linux程序，而无需进入传统的图形界面环境。这种方法特别适合需要使用命令行工具或简单图形应用程序的情况。"]}]}},"langVersions":["cn"]}]]}]}]}],"$L4"]}],["$L5","$L6","$L7","$L8","$L9","$La"],"$Lb"]}],"loading":null,"isPartial":false}
e:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z4:["$","div",null,{"className":"animate-slide-up","children":[["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","div",null,{"className":"flex flex-row space-x-4","children":[["$","div",null,{"className":"prose max-w-full lg:w-[75%]","children":[["$","$Lc",null,{"summaries":[{"metadata":{"summarizer":"azure-ai","model":"DeepSeek-R1"},"children":[["$","p","p-0",{"children":"微软在WSL 2中通过X11转发实现Linux GUI程序支持，用户需在Windows安装X Server（如vcxsrv），配置DISPLAY环境变量并设置字体。GUI应用窗口与Windows无缝集成，支持剪贴板同步和高DPI显示，但存在标题栏无法隐藏、输入法需独立配置等限制。微软已在Build 2020宣布将优化原生GUI支持，未来有望提升体验。当前方案适用于远程或虚拟机环境，通过X11转发及SSH实现高效跨平台操作，避免图形界面性能损耗。"}]]},{"metadata":{"summarizer":"ollama","model":"deepseek-r1:8b"},"children":[["$","p","p-0",{"children":"要在Windows上使用Linux程序并且避免进入图形界面，可以使用SSH和X11 Forwarding进行配置。"}],"\n",["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"安装必要工具"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["在Windows上安装",["$","code","code-0",{"children":"cygwin"}],"或",["$","code","code-1",{"children":"WSL"}],"，这两种工具可以帮助你运行Linux命令。"]}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"设置SSH和X11 Forwarding"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["打开你的终端，输入以下命令以启用X11转发：","\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"language-bash","children":"eval $(ssh-agent) && ssh-add ~/.ssh/id_rsa\n"}]}],"\n"]}],"\n",["$","li","li-1",{"children":["保存一个临时的",["$","code","code-0",{"children":"~/.ssh/config"}],"文件，以指示哪些主机可以进行X11转发：","\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"language-bash","children":"echo 'Host *' > ~/.ssh/config\necho '    ForwardX11 yes' >> ~/.ssh/config\necho '    X11Forwarding yes' >> ~/.ssh/config\n"}]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","li","li-2",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"连接到Linux服务器"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["使用SSH命令连接到你的Linux服务器时，附加-X选项来启用图形界面转发：","\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"language-bash","children":"ssh -X yourusername@linux-server\n"}]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","li","li-3",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"运行Linux程序"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["在终端中使用",["$","code","code-0",{"children":"xdmesktop"}],"启动桌面环境。"]}],"\n",["$","li","li-1",{"children":["运行你想要的Linux程序，例如：","\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"language-bash","children":"/path/to/your/linux/program\n"}]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","li","li-4",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"关闭X11转发"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["完成后按下",["$","code","code-0",{"children":"Ctrl + d"}],"断开会话。"]}],"\n"]}],"\n"]}],"\n",["$","li","li-5",{"children":["\n",["$","p","p-0",{"children":[["$","strong","strong-0",{"children":"确保安全性"}],"："]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"确保你只允许特定的用户或IP进行X11转发，以防止未经授权的访问。"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","p","p-1",{"children":"通过以上步骤，你可以在Windows上运行Linux程序，而无需进入传统的图形界面环境。这种方法特别适合需要使用命令行工具或简单图形应用程序的情况。"}]]}]}],["$","$Ld",null,{"withCaption":true,"id":"run-gui-on-wsl2-with-x11-forwarding","children":[["$","h1","h1-0",{"id":"wsl-2使用gui","children":[["$","a","wsl-2使用gui",{"href":"#wsl-2使用gui","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$e","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"WSL 2使用GUI"]}],"\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56"]}]]}],"$L57"]}]}],"$L58","$L59"]}]
5:["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/44d2e091595b3eca.css","precedence":"next"}]
6:["$","link","1",{"rel":"stylesheet","href":"/_next/static/chunks/5e55d74f3211c796.css","precedence":"next"}]
7:["$","link","2",{"rel":"stylesheet","href":"/_next/static/chunks/b59bad6ea4f112f2.css","precedence":"next"}]
8:["$","script","script-0",{"src":"/_next/static/chunks/0a1497ca0a1721ad.js","async":true}]
9:["$","script","script-1",{"src":"/_next/static/chunks/4ec1bf7a32b70f87.js","async":true}]
a:["$","script","script-2",{"src":"/_next/static/chunks/276b22541034e0ea.js","async":true}]
b:["$","$L5a",null,{"children":["$","$5b",null,{"name":"Next.MetadataOutlet","children":"$@5c"}]}]
f:["$","p","p-0",{"children":"众所周知，WSL 2开始使用真正的Linux内核，所以理论上来说，我们已经可以在WSL 2运行几乎所有的Linux程序，包括带有GUI的Linux程序。但是目前来说，由于第一方X11 Server的缺失，WSL 2主要还是在命令行中使用。"}]
10:["$","p","p-1",{"children":["Build 2020上，微软已经宣称",["$","a","a-0",{"href":"https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/#wsl-gui","children":"开始做WSL 2的GUI支持"}],"，并已经给出了宣传图。"]}]
11:["$","p","p-2",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/build-2020-wsl-2-gui.png","imageSize":{"height":1080,"width":1920},"imageProps":{"src":"build-2020-wsl-2-gui.png","alt":"Build 2020上WSL 2的GUI支持图片（来源：https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/#wsl-gui）"}}]}]
12:["$","p","p-3",{"children":"但是，事实上，借助X11 Forwarding，我们现在已经可以做到类似的效果了。"}]
13:["$","p","p-4",{"children":"如果你之前折腾过在WSL上跑GNOME等各种桌面环境，则这篇文章的原理和那些文章是一致的，但是由于不需要启动桌面环境，其使用更加方便，各种Linux程序窗口和Windows的集成更加无缝，个人认为实用性比启动一个Linux桌面环境再在里面启动程序更强。"}]
14:["$","p","p-5",{"children":"下图为跑在WSL 2上的IDEA、通过IDEA启动的JavaFX程序与Windows计算器共存的截图，注意看到状态栏上的窗口图标的IDEA图标，完美与Windows进行兼容。"}]
15:["$","p","p-6",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/idea-javafx-calc.png","imageSize":{"height":1078,"width":1384},"imageProps":{"src":"idea-javafx-calc.png","alt":"效果图"}}]}]
5e:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z16:["$","h1","h1-1",{"id":"x11-forwarding","children":[["$","a","x11-forwarding",{"href":"#x11-forwarding","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$5e","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"X11 Forwarding"]}]
17:["$","p","p-7",{"children":["X Window是目前Linux上使用得最为广泛的窗口系统。虽然它有各种各样的问题（包括不支持多个显示器不同DPI的硬伤），我在使用Linux桌面的时候也经常推荐Wayland作为代替，但是其",["$","strong","strong-0",{"children":"X11 Forwarding"}],"的特性是相当的有用。"]}]
18:["$","p","p-8",{"children":"下图是X11的架构。"}]
19:["$","p","p-9",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/x11-architecture.png","imageSize":{"height":422,"width":250},"imageProps":{"src":"x11-architecture.png","alt":"X11架构（来源：https://en.wikipedia.org/wiki/X_Window_System_protocols_and_architecture）"}}]}]
1a:["$","p","p-10",{"children":"在X11系统中，显示GUI的程序（Client，包括各种浏览器、IDE等的程序）和用于真正负责显示、以及捕捉键盘、鼠标等输入的服务器（Server）是分离的，且二者之间通过网络通信的。"}]
1b:["$","p","p-11",{"children":"对于普通的Linux系统，其Server和Client是跑在一台机器上的。但是，由于二者之间是通过网络进行通信的，所以X11窗口系统不需要Server和Client运行在同一台机器上。"}]
1c:["$","p","p-12",{"children":"所以，我们可以在其他电脑（甚至不需要是Linux）上跑一个X Server，然后通过配置DISPLAY环境变量，让X Client和位于网络上的X Server相连，就能让在一台电脑上运行的程序的GUI显示在另一台电脑上。"}]
1d:["$","p","p-13",{"children":"这就是X11 Forwarding，将一台电脑的程序的GUI Forward到另一台电脑上去显示。"}]
5f:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z1e:["$","h1","h1-2",{"id":"配置","children":[["$","a","配置",{"href":"#配置","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$5f","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"配置"]}]
1f:["$","p","p-14",{"children":"X11 Forwarding的原理很简单，配置其实也很简单。其分为两个大部分：Windows端（Server端）和WSL端（Client端）。"}]
60:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z20:["$","h2","h2-0",{"id":"windows端","children":[["$","a","windows端",{"href":"#windows端","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$60","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Windows端"]}]
21:["$","p","p-15",{"children":"在Windows端需要安装一个X Server。"}]
22:["$","p","p-16",{"children":["X Server有多个，我比较建议",["$","a","a-0",{"href":"https://github.com/ArcticaProject/vcxsrv","children":"vcxsrv"}],"（名字记忆：vc x server），因为其功能和操作比较简单。"]}]
23:["$","p","p-17",{"children":"可以从上面给的github链接进行安装，也可以通过scoop进行安装，scoop安装命令如下："}]
24:["$","pre","pre-0",{"children":["$","code","code-0",{"children":"scoop install vcxsrv\n"}]}]
25:["$","p","p-18",{"children":"安装成功后，在开始菜单或者其他启动器启动新安装的XLaunch，会弹出一个向导以配置X Server的属性。在一步选择Multiple windows，第三步选择Disable access control，其他不变。"}]
26:["$","p","p-19",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/xlauncher-1.png","imageSize":{"height":421,"width":524},"imageProps":{"src":"xlauncher-1.png","alt":"第一步：选择Multiple windows"}}]}]
27:["$","p","p-20",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/xlauncher-2.png","imageSize":{"height":421,"width":524},"imageProps":{"src":"xlauncher-2.png","alt":"第二步：什么都不选"}}]}]
28:["$","p","p-21",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/xlauncher-3.png","imageSize":{"height":421,"width":524},"imageProps":{"src":"xlauncher-3.png","alt":"第三步：勾选Disable access control"}}]}]
29:["$","p","p-22",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/xlauncher-4.png","imageSize":{"height":421,"width":524},"imageProps":{"src":"xlauncher-4.png","alt":"第四步：确定以启动"}}]}]
2a:["$","p","p-23",{"children":["最后在状态栏可以看到一个新的图标，鼠标悬浮上去可以看到其地址，其格式是",["$","code","code-0",{"children":"{电脑的hostname}:{地址}"}],"，记住后面这个地址。例如说，下图中，其地址为",["$","code","code-1",{"children":"0.0"}],"。"]}]
2b:["$","p","p-24",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/xlaunch-icon.png","imageSize":{"height":63,"width":198},"imageProps":{"src":"xlaunch-icon.png","alt":"状态栏图标和地址"}}]}]
61:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z2c:["$","h2","h2-1",{"id":"wsl端","children":[["$","a","wsl端",{"href":"#wsl端","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$61","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"WSL端"]}]
2d:["$","p","p-25",{"children":"WSL端需要做两个工作："}]
2e:["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"设置DISPLAY变量"}],"\n",["$","li","li-1",{"children":"配置字体等GUI相关的设置"}],"\n"]}]
62:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z2f:["$","h3","h3-0",{"id":"设置display","children":[["$","a","设置display",{"href":"#设置display","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$62","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"设置DISPLAY"]}]
30:["$","p","p-26",{"children":"DISPLAY环境变量用来指定X Server的地址。由于WSL 2使用虚拟机，其IP和Windows不同，所以需要进行一些特殊方法来访问Windows上的X Server。"}]
31:["$","p","p-27",{"children":"在.bashrc或者.zshrc里加入以下代码，然后重新进入WSL。"}]
32:["$","figure","figure-0",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"bash","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"bash","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"# 若安装了Docker for Windows，且启动了WSL 2后端"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"export"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" WINDOWS_HOST"}],["$","span","span-2",{"style":{"color":"#56B6C2"},"children":"="}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"\"host.docker.internal\""}]]}],"\n",["$","span","span-2",{"data-line":"","children":" "}],"\n",["$","span","span-3",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"# 若没有安装Docker for Windows，则可以从/etc/resolv.conf中读取Windows的IP"}]}],"\n",["$","span","span-4",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"# 这个IP有可能会变，所以不能直接一劳永逸。"}]}],"\n",["$","span","span-5",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"# export WINDOWS_HOST=$(grep nameserver /etc/resolv.conf | awk '{print $2}')"}]}],"\n",["$","span","span-6",{"data-line":"","children":" "}],"\n",["$","span","span-7",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"# 可以尝试使用Windows的hostname，未尝试过"}]}],"\n",["$","span","span-8",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"# 但是我在Hyper-V虚拟机中使用hostname访问Windows有时候会遇到奇怪的卡住的问题，不推荐"}]}],"\n",["$","span","span-9",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"# export WINDOWS_HOST={你的Windows的hostname}"}]}],"\n",["$","span","span-10",{"data-line":"","children":" "}],"\n",["$","span","span-11",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"# 下面的\"地址\"替换为之前记住的Windows上的X Server的地址，一般（以及上面的例子）是0:0"}]}],"\n",["$","span","span-12",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"export"}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":" DISPLAY"}],["$","span","span-2",{"style":{"color":"#56B6C2"},"children":"="}],["$","span","span-3",{"style":{"color":"#98C379"},"children":"\""}],["$","span","span-4",{"style":{"color":"#E06C75"},"children":"$$WINDOWS_HOSRT"}],["$","span","span-5",{"style":{"color":"#98C379"},"children":":地址\""}]]}]]}]}]}]
63:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z33:["$","h3","h3-1",{"id":"配置字体","children":[["$","a","配置字体",{"href":"#配置字体","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$63","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"配置字体"]}]
34:["$","p","p-28",{"children":"由于WSL的distro一般都比较简单，可能没有安装字体以及对应的配置，所以需要自己手动安装字体。"}]
35:["$","p","p-29",{"children":["这里以",["$","code","code-0",{"children":"noto-sans-cjk"}],"举例，你可以自己安装自己想要的字体。"]}]
36:["$","p","p-30",{"children":"字体安装后不能直接启动GUI程序，现在直接启动会遇到奇怪的报错问题（忘记截图了，可以自己试试）。"}]
37:["$","p","p-31",{"children":"可以安装一个简单的X程序来初始化，并验证X11环境是否已经配置成功：如xclock："}]
38:["$","figure","figure-1",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"bash","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"bash","data-theme":"one-dark-pro","style":{"display":"grid"},"children":["$","span","span-0",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"sudo"}],["$","span","span-1",{"style":{"color":"#98C379"},"children":" pacman"}],["$","span","span-2",{"style":{"color":"#D19A66"},"children":" -S"}],["$","span","span-3",{"style":{"color":"#98C379"},"children":" xorg-xclock"}]]}]}]}]}]
64:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z39:["$","h3","h3-2",{"id":"使用xclock测试是否能够正常使用","children":[["$","a","使用xclock测试是否能够正常使用",{"href":"#使用xclock测试是否能够正常使用","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$64","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"使用xclock测试是否能够正常使用"]}]
3a:["$","p","p-32",{"children":"安装之后，确认DISPLAY变量已经设置后，输入"}]
3b:["$","figure","figure-2",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"bash","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"bash","data-theme":"one-dark-pro","style":{"display":"grid"},"children":["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"xclock"}]}]}]}]}]
3c:["$","p","p-33",{"children":"若弹出一个时钟窗口，则配置成功。"}]
3d:["$","p","p-34",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/xclock.png","imageSize":{"height":257,"width":215},"imageProps":{"src":"xclock.png","alt":"xclock"}}]}]
65:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z3e:["$","h2","h2-2",{"id":"效果","children":[["$","a","效果",{"href":"#效果","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$65","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"效果"]}]
3f:["$","p","p-35",{"children":"现在你可以开始在命令行里启动各种程序了："}]
40:["$","p","p-36",{"children":"Intellij IDEA在WSL 2上启动IDEA比Windows上快多了，我正在考虑将整个Java环境迁移到WSL 2中。"}]
41:["$","p","p-37",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/intellij-idea.png","imageSize":{"height":499,"width":682},"imageProps":{"src":"intellij-idea.png","alt":"Intellij IDEA"}}]}]
42:["$","p","p-38",{"children":"VSCode也可以以Linux窗口来启动，其启动速度也比Windows快多了："}]
43:["$","p","p-39",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/vscode.png","imageSize":{"height":896,"width":1181},"imageProps":{"src":"vscode.png","alt":"VSCode"}}]}]
44:["$","p","p-40",{"children":"在设置中设置以下后VSCode可以隐藏标题栏，但是这样之后无法拖动窗口，最大化窗口后也无法还原，所以不建议。"}]
45:["$","figure","figure-3",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"json","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"json","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"{"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"  \"window.titleBarStyle\""}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":": "}],["$","span","span-2",{"style":{"color":"#98C379"},"children":"\"custom\""}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}]
46:["$","p","p-41",{"children":["$","$L5d","img-0",{"src":"/articles/asset/contents/20200604-run-gui-on-wsl2-with-x11-forwarding/vscode-custom-titlebar.png","imageSize":{"height":768,"width":1024},"imageProps":{"src":"vscode-custom-titlebar.png","alt":"VSCode隐藏标题栏"}}]}]
47:["$","p","p-42",{"children":"一些其他细节："}]
48:["$","ul","ul-1",{"children":["\n",["$","li","li-0",{"children":"这些X Window的剪贴板和Windows剪贴板也是同步的，可以自由地双向复制粘贴"}],"\n",["$","li","li-1",{"children":"vcxsrv适配了高DPI，在高分屏上使用完全没有问题"}],"\n"]}]
66:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z49:["$","h2","h2-3",{"id":"限制","children":[["$","a","限制",{"href":"#限制","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$66","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"限制"]}]
4a:["$","p","p-43",{"children":"这样的解决方案虽然看上去很完美，但是有一些限制，但是可用性也非常高了："}]
4b:["$","ul","ul-2",{"children":["\n",["$","li","li-0",{"children":"无法隐藏丑陋的标题栏"}],"\n",["$","li","li-1",{"children":"无法直接调用Windows的输入法，需要在Linux下重新配置输入法"}],"\n",["$","li","li-2",{"children":["有可能仍然遇到字体问题（如在现在的情况下编译JavaFX程序），安装完一整套字体、正确设置",["$","code","code-0",{"children":"/etc/locale.gen"}],"之后即可修复。"]}],"\n"]}]
67:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z4c:["$","h2","h2-4",{"id":"后续启动","children":[["$","a","后续启动",{"href":"#后续启动","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$67","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"后续启动"]}]
4d:["$","p","p-44",{"children":"以后重启电脑后，只需要重新启动XLauncher，然后在WSL中启动GUI程序即可使用。"}]
68:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z4e:["$","h1","h1-3",{"id":"延伸和总结","children":[["$","a","延伸和总结",{"href":"#延伸和总结","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$68","children":[]}]]],"style":{},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"延伸和总结"]}]
4f:["$","p","p-45",{"children":"这套配置也不仅限WSL，任何虚拟机和远端电脑上的Linux应用程序均可以使用SSH和X11 Forwarding进行连接。"}]
50:["$","p","p-46",{"children":"使用SSH和X11 Forwarding可以解决很多远程桌面相关的问题。"}]
51:["$","p","p-47",{"children":"我们很多时候使用虚拟机安装Linux系统，其实并不是要使用Linux的桌面环境，而是使用Linux的命令行和一些GUI程序。"}]
52:["$","p","p-48",{"children":"对于命令行程序，使用SSH完全可以解决；"}]
53:["$","p","p-49",{"children":"而对于GUI程序，我们也可以通过这篇文章介绍的X11 Forwarding来解决。"}]
54:["$","p","p-50",{"children":"和正常的连接到Linux再进行操作相比，SSH和X11 Forwarding的优势其实很明显："}]
55:["$","ul","ul-3",{"children":["\n",["$","li","li-0",{"children":"避免进入Linux的GUI环境，而可以在我们熟悉的Windows/macOS环境下使用Linux的各种功能"}],"\n",["$","li","li-1",{"children":"避免配置Virtualbox Guest软件、Hyper-V的Enhanced Session等虚拟机的增强软件"}],"\n",["$","li","li-2",{"children":"由于避开了图形界面的模拟，SSH和X11 Forwarding也通常有更好的性能"}],"\n"]}]
56:["$","p","p-51",{"children":"对于WSL来说，目前的解决方案仍然有一些限制，但是我们可以发现在Build 2020上的效果图已经没有的标题栏，说明微软也正在解决一些X11和Windows集成的问题。相信当微软的X11集成正式发布时，我们在Windows上使用Linux程序的体验，可能比在Linux上使用Linux程序更好了。"}]
57:["$","div",null,{"className":"hidden lg:block lg:w-[25%]","children":["$","$L69",null,{"toc":[{"depth":1,"value":"WSL 2使用GUI","id":"wsl-2使用gui"},{"depth":1,"value":"X11 Forwarding","id":"x11-forwarding"},{"depth":1,"value":"配置","id":"配置","children":[{"depth":2,"value":"Windows端","id":"windows端"},{"depth":2,"value":"WSL端","id":"wsl端","children":[{"depth":3,"value":"设置DISPLAY","id":"设置display"},{"depth":3,"value":"配置字体","id":"配置字体"},{"depth":3,"value":"使用xclock测试是否能够正常使用","id":"使用xclock测试是否能够正常使用"}]},{"depth":2,"value":"效果","id":"效果"},{"depth":2,"value":"限制","id":"限制"},{"depth":2,"value":"后续启动","id":"后续启动"}]},{"depth":1,"value":"延伸和总结","id":"延伸和总结"}],"hasSummary":true}]}]
58:["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","$L6a",null,{"relatedArticles":[{"id":"from-vscode-to-vim-to-both","langVersions":[{"excerpt":"\r\n# 题外话\r\n\r\n最近3个月博客都没更新，不是因为我弃坑了，而是因为这几个月一直在忙着搞毕设。本以为毕设只是个j2ee，没想到朝9晚9搞了2个多月。现在终于搞完了，博客也（应该？）开始恢复正常更新","lang":"cn","time":"2020-04-04 22:00:00 UTC+8","title":"从VSCode到Vim到……两个都用？"}]},{"id":"playing-with-linux-from-machine-to-win10","langVersions":[{"excerpt":"\n# 从三年前Xubuntu开始\n\n想当年大一的时候，由于当时所有预算都投入到游戏本上了（这仍然是我目前最后悔的一个决定，要是当时能直接上台式机，性能能提升很大一个层次），所以外出只能带一台三代i3的","lang":"cn","time":"2019-11-02 20:20:00 UTC+8","title":"折腾Linux: 从实体机到Win10"}]}]}]}]
59:["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","$L6b",null,{"articleId":"run-gui-on-wsl2-with-x11-forwarding","articleTitle":"使用X11 Forwarding在WSL 2中运行GUI程序"}]}]
5c:null
