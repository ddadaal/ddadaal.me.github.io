1:"$Sreact.fragment"
3:I[3266,[],""]
4:I[5648,[],""]
6:I[7915,[],"OutletBoundary"]
8:I[7915,[],"MetadataBoundary"]
a:I[7915,[],"ViewportBoundary"]
c:I[7429,[],""]
:HL["/_next/static/css/e48d77ae119094c4.css","style"]
:HL["/_next/static/css/fe1e54f11bde7158.css","style"]
:HL["/_next/static/css/0e452e629ebb050b.css","style"]
:HL["/_next/static/css/550cc6711c036586.css","style"]
:HL["/_next/static/css/84af3e6cc7365e2a.css","style"]
0:{"P":null,"b":"Dn08WV4W4IdM_4X82Hw0R","p":"","c":["","articles","a-react-form-comp-pref-optimization-with-profiler","en"],"i":false,"f":[[["",{"children":["articles",{"children":[["params","a-react-form-comp-pref-optimization-with-profiler/en","oc"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/e48d77ae119094c4.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],"$L2"]}],{"children":["articles",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","articles","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["params","a-react-form-comp-pref-optimization-with-profiler/en","oc"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","articles","children","$0:f:0:1:2:children:2:children:0","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/fe1e54f11bde7158.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/0e452e629ebb050b.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/550cc6711c036586.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","3",{"rel":"stylesheet","href":"/_next/static/css/84af3e6cc7365e2a.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L6",null,{"children":"$L7"}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","PcUg9yyIXBBssD2nsR2Gr",{"children":[["$","$L8",null,{"children":"$L9"}],["$","$La",null,{"children":"$Lb"}],null]}]]}],false]],"m":"$undefined","G":["$c","$undefined"],"s":false,"S":true}
d:I[9610,["116","static/chunks/c556396d-dfd2538679eda761.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","989","static/chunks/989-a23f9a6e683ac133.js","177","static/chunks/app/layout-7c4e5255ad768c3f.js"],"RootLayout"]
e:I[5862,["116","static/chunks/c556396d-dfd2538679eda761.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","989","static/chunks/989-a23f9a6e683ac133.js","177","static/chunks/app/layout-7c4e5255ad768c3f.js"],""]
f:I[1343,["116","static/chunks/c556396d-dfd2538679eda761.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","989","static/chunks/989-a23f9a6e683ac133.js","177","static/chunks/app/layout-7c4e5255ad768c3f.js"],"Header"]
10:I[1571,["116","static/chunks/c556396d-dfd2538679eda761.js","405","static/chunks/95e35d7b-290f00d92d8e6653.js","994","static/chunks/c4aeae87-c7e6deaa563962ae.js","786","static/chunks/1b3e99d6-bfba8e6e655fb217.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","812","static/chunks/812-091af8ddb387a519.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-650f0205a429bbcc.js"],"Localized"]
11:I[2201,["861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","974","static/chunks/app/page-cc0b4d4b2c878bad.js"],"LocalizedArticleLink"]
12:I[5065,["116","static/chunks/c556396d-dfd2538679eda761.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","989","static/chunks/989-a23f9a6e683ac133.js","177","static/chunks/app/layout-7c4e5255ad768c3f.js"],"RunningTime"]
13:I[453,["861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","974","static/chunks/app/page-cc0b4d4b2c878bad.js"],"LastUpdateTime"]
16:I[3305,["116","static/chunks/c556396d-dfd2538679eda761.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","989","static/chunks/989-a23f9a6e683ac133.js","177","static/chunks/app/layout-7c4e5255ad768c3f.js"],"ToTop"]
14:T518,M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z15:T5b8,M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z2:["$","$Ld",null,{"children":[["$","$Le",null,{"data-host":"https://services.ddadaal.me","data-dnt":"false","src":"https://services.ddadaal.me/monitor/script.js","id":"ZwSg9rf6GA","async":true,"defer":true}],["$","$Lf",null,{"resumeLangs":["cn","en"]}],["$","div",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"bg-base-200 text-base-content","children":["$","div",null,{"className":"footer py-6 max-w-7xl mx-auto px-4","children":[["$","div",null,{"className":"space-y-1","children":[["$","p",null,{"children":["ðŸ‘¨ðŸ¼â€ðŸ’»Â ",["$","$L10",null,{"id":"footer.codeBy","args":[["$","$L11","about/me",{"className":"link link-hover","basePath":"/about/me","children":"ddadaal"}]]}]]}],["$","p",null,{"children":["ðŸ“",["$","$L10",null,{"id":"footer.license","args":[["$","a","license",{"rel":"licene noreferrer","target":"_blank","className":"link","href":"https://creativecommons.org/licenses/by-sa/4.0/","children":"CC BY-SA 4.0"}]]}]]}],["$","$L12",null,{"serverStartTime":"2024-12-14T14:51:22.463+00:00"}],["$","$L13",null,{"time":"2024-12-14T14:51:22.463+00:00"}],["$","div",null,{"children":[["$","p",null,{"children":["ðŸ“²"," ",["$","$L10",null,{"id":"footer.contacts"}]]}],["$","div",null,{"className":"flex py-2 gap-2","children":[["$","span","http://wpa.qq.com/msgrd?v=3&uin=540232834&site=qq&menu=yes",{"children":["$","a",null,{"href":"http://wpa.qq.com/msgrd?v=3&uin=540232834&site=qq&menu=yes","title":"QQ: 540232834","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 448 512","children":["$undefined",[["$","path","0",{"d":"M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","mailto://ddadaal.me@outlook.com",{"children":["$","a",null,{"href":"mailto://ddadaal.me@outlook.com","title":"E-mail: ddadaal@outlook.com","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 576 512","children":["$undefined",[["$","path","0",{"d":"M160 448c-25.6 0-51.2-22.4-64-32-64-44.8-83.2-60.8-96-70.4V480c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V345.6c-12.8 9.6-32 25.6-96 70.4-12.8 9.6-38.4 32-64 32zm128-192H32c-17.67 0-32 14.33-32 32v16c25.6 19.2 22.4 19.2 115.2 86.4 9.6 6.4 28.8 25.6 44.8 25.6s35.2-19.2 44.8-22.4c92.8-67.2 89.6-67.2 115.2-86.4V288c0-17.67-14.33-32-32-32zm256-96H224c-17.67 0-32 14.33-32 32v32h96c33.21 0 60.59 25.42 63.71 57.82l.29-.22V416h192c17.67 0 32-14.33 32-32V192c0-17.67-14.33-32-32-32zm-32 128h-64v-64h64v64zm-352-96c0-35.29 28.71-64 64-64h224V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v192h96v-32z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://www.linkedin.com/in/chenjunda/",{"children":["$","a",null,{"href":"https://www.linkedin.com/in/chenjunda/","title":"LinkedIn: é™ˆä¿Šè¾¾","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 448 512","children":["$undefined",[["$","path","0",{"d":"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://github.com/ddadaal",{"children":["$","a",null,{"href":"https://github.com/ddadaal","title":"GitHub: ddadaal","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 496 512","children":["$undefined",[["$","path","0",{"d":"$14","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://steamcommunity.com/profiles/76561198104889782",{"children":["$","a",null,{"href":"https://steamcommunity.com/profiles/76561198104889782","title":"Steam: Victor Crubs","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 496 512","children":["$undefined",[["$","path","0",{"d":"M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://zhihu.com/people/VicCrubs",{"children":["$","a",null,{"href":"https://zhihu.com/people/VicCrubs","title":"çŸ¥ä¹Žï¼šé™ˆä¿Šè¾¾","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 640 512","children":["$undefined",[["$","path","0",{"d":"$15","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}],["$","span","https://www.douban.com/people/183064260/",{"children":["$","a",null,{"href":"https://www.douban.com/people/183064260/","title":"è±†ç“£: ddadaal","target":"_blank","className":"block transition hover:scale-125","rel":"noreferrer","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","role":"img","viewBox":"0 0 24 24","children":["$undefined",[["$","path","0",{"d":"M.51 3.06h22.98V.755H.51V3.06Zm20.976 2.537v9.608h-2.137l-1.669 5.76H24v2.28H0v-2.28h6.32l-1.67-5.76H2.515V5.597h18.972Zm-5.066 9.608H7.58l1.67 5.76h5.501l1.67-5.76ZM18.367 7.9H5.634v5.025h12.733V7.9Z","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":22.400000000000002,"width":22.400000000000002,"xmlns":"http://www.w3.org/2000/svg"}]}]}]]}]]}],["$","p",null,{"className":"text-center","children":["Â©"," ",2024," ","|"," ",["$","$L10",null,{"id":"footer.madeWithLove"}]]}]]}],["$","div",null,{"children":[["$","span",null,{"className":"footer-title","children":["ðŸš€"," ",["$","$L10",null,{"id":"footer.poweredBy"}]]}],[["$","a","React",{"className":"link link-hover","target":"_blank","href":"https://reactjs.org/","rel":"noreferrer","children":"React"}],["$","a","Next.js",{"className":"link link-hover","target":"_blank","href":"https://nextjs.org/","rel":"noreferrer","children":"Next.js"}],["$","a","GitHub Pages",{"className":"link link-hover","target":"_blank","href":"https://pages.github.com/","rel":"noreferrer","children":"GitHub Pages"}],["$","a","TypeScript",{"className":"link link-hover","target":"_blank","href":"https://www.typescriptlang.org/","rel":"noreferrer","children":"TypeScript"}]]]}],["$","div",null,{"children":[["$","span",null,{"className":"footer-title","children":["ðŸŽ¨"," ",["$","$L10",null,{"id":"footer.themedWith"}]]}],[["$","a","daisyui",{"className":"link link-hover","target":"_blank","href":"https://daisyui.com/","rel":"noreferrer","children":"daisyui"}],["$","a","tailwind",{"className":"link link-hover","target":"_blank","href":"https://tailwindcss.com/","rel":"noreferrer","children":"tailwind"}]]]}],["$","div",null,{"children":[["$","span",null,{"className":"footer-title","children":["ðŸŽ“"," ",["$","$L10",null,{"id":"footer.contacts"}]]}],[["$","a","idealclover - ç¿ ç¿ é…±çš„ä¸ªäººç½‘ç«™",{"className":"link link-hover","target":"_blank","href":"https://idealclover.top","rel":"noreferrer","children":"idealclover - ç¿ ç¿ é…±çš„ä¸ªäººç½‘ç«™"}],["$","a","Sephidator - Sephidatorçš„ä¸ªäººåšå®¢",{"className":"link link-hover","target":"_blank","href":"https://sephidator.xyz","rel":"noreferrer","children":"Sephidator - Sephidatorçš„ä¸ªäººåšå®¢"}],["$","a","iznauy - ä¸ªäººåšå®¢",{"className":"link link-hover","target":"_blank","href":"https://iznauy.github.io/","rel":"noreferrer","children":"iznauy - ä¸ªäººåšå®¢"}],["$","a","Aironoria - é™ˆä¿Šå®‡çš„ä¸ªäººåšå®¢",{"className":"link link-hover","target":"_blank","href":"https://aironoria.github.io","rel":"noreferrer","children":"Aironoria - é™ˆä¿Šå®‡çš„ä¸ªäººåšå®¢"}],["$","a","forewing - ä¸ªäººä¸»é¡µ",{"className":"link link-hover","target":"_blank","href":"https://jbesu.com/","rel":"noreferrer","children":"forewing - ä¸ªäººä¸»é¡µ"}],["$","a","Weiser - ä¸ªäººä¸»é¡µ",{"className":"link link-hover","target":"_blank","href":"https://weiser.fun","rel":"noreferrer","children":"Weiser - ä¸ªäººä¸»é¡µ"}]]]}]]}]}],["$","$L16",null,{}]]}]
17:I[7566,["116","static/chunks/c556396d-dfd2538679eda761.js","405","static/chunks/95e35d7b-290f00d92d8e6653.js","994","static/chunks/c4aeae87-c7e6deaa563962ae.js","786","static/chunks/1b3e99d6-bfba8e6e655fb217.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","812","static/chunks/812-091af8ddb387a519.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-650f0205a429bbcc.js"],"ArticleFrontmatter"]
1a:I[4406,["116","static/chunks/c556396d-dfd2538679eda761.js","405","static/chunks/95e35d7b-290f00d92d8e6653.js","994","static/chunks/c4aeae87-c7e6deaa563962ae.js","786","static/chunks/1b3e99d6-bfba8e6e655fb217.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","812","static/chunks/812-091af8ddb387a519.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-650f0205a429bbcc.js"],"RelatedArticles"]
1b:I[6257,["116","static/chunks/c556396d-dfd2538679eda761.js","405","static/chunks/95e35d7b-290f00d92d8e6653.js","994","static/chunks/c4aeae87-c7e6deaa563962ae.js","786","static/chunks/1b3e99d6-bfba8e6e655fb217.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","812","static/chunks/812-091af8ddb387a519.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-650f0205a429bbcc.js"],"CommentPanelWithCurrentLanguage"]
18:T2a7c,
> Note: This code is from an internal project. Measurements apply to protect confidential information, but the problem and methods mentioned in the article are universal and not limited to specific projects.

# The Problem

I was working on a form that had very poor performance. To be specific, at every key stroke, the form responded pretty slowly. What's worse, the component and the whole website became completely unresponsive for **seconds** if several keys were stroked sequentially (like input a long number), which was, unfortunately, the normal use case for this field.

![bad performance, especially for the first input field](bad-pref.gif)

# Investigation

## Validations?

From the gif provided above, you may find some details that are worth taking notice of:

- The first field had the **worse performance**,
- The first field had some kinds of input validation (loading indicator when the first inputs were registered),
- The field below the first field had better performance than the first one, and it had no validation.

Hmm...It looks like **the validation** might be the cause.

However, the validation process was merely some format check, and a request which would be cancelled if next key stroke had come before it completed. It did increase the delay of input, but should not be so significant.

## Re-renders of the Whole Form?

### The Challenge of Forms in React

The **re-render of the whole form at every input** might be the problem as well.

React has been known as *not good at implementing forms* because of its famous **unidirectional data flow**.

![Source: https://gist.github.com/alexmingoia/4db967e5aeb31d84847c. See this page to get yourself familiarized if you haven't already.](unidirectiona-data-flow.png)

Unidirectional data flow simplifies the data flow and fits seeminglessly with the concept of React. However, since **each update to the state will trigger the component to re-render**, it might impact the performance of the app.

Form is one of such cases, because a form consists of multiple input fields, and **each input to any one of them** would update the state, and re-render the whole form and every other fields. Therefore, writing forms in React has always a challenge.

### Complicated Form

Looking at the code, the form was implemented in a very React way: the form contained all the fields, and handled every `onChange` event for each input fields.

![part of fields](fields.png)

The form was complicated with dozens of fields, several **sync/async and cross-field validations**, **dynamic placeholders** and some unnecessary **duplicate calculations** (which could be improved with constants and cache).

It seemed pretty evident that the **re-renders** and **the complicated calculations** during the render were the cause to the problem.

### No Easy Solutions

Having found the reason, what's left was to find a solution. However, the reason that form implementation is called a *challenge* in React is that it can not be solved easily. There are lots of React form library from the community (like [react-form](https://github.com/tannerlinsley/react-form), [formik](https://github.com/jaredpalmer/formik)) trying to solve the form as a whole by providing a complete solution to some common form challenges, including input management, async validations, and submission. They may be viable for many users and should be considered if you are having trouble building a form in your project, but I couldn't adopt them in this project because:

- hiding complexities usually means introducing other complexities
    - for example, when using the libraries, more problems are introduced, like **less flexibilities**, **less understandable code**, **interop with UI libraries** and **the cost of learning and adopting a new set of APIs**.
- The code is involved with several internal concepts and conventions, which I am not familiar enough. As a result, I don't have the confidence to rewrite the logic correctly in a short time;
- introducing a new library into this project is hard, for it is a internal project that has over 200K lines of TypeScript code, hundreds of authors and users, so the review for this project is strict.

## Maybe Not Re-renders?

Besides, my experiences told me that it was possibly not the **re-renders** that was to blame, since the updates of the form should not be so costly that would result in such a significant delay.

I have encountered situations where even **a whole page** re-rendered at every interaction, but React and modern JavaScript engines is more than capable to drive it smoothly without even a stutter. This form had several fields to be re-rendered at every input, but when taking the whole page into consideration, the number of re-renders inside this page was negligible.

## Profiling, Profiling, Profiling

After wasting days on *brainstorming* the source of problem, I decided to diagnose the issue in a scientific way -- **profiling**.

[React's official devtool of Chrome](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi) has a built-in profiling tool. By recoding a sequence of user interactions, profiler can provide performance metrics on each commit during the record, like what components are re-rendered, how many time they take to re-render, with which the developer can locate the components that have biggest impact to the performance, and optimize them accordingly.

Start the recoding, repeat the operations of the gif above, and I had the following result:

![Ranked chart](profiling.png)
![Flamegraph chart](profiling-2.png)

The first chart (ranked chart) showed the time to re-render for each component that had re-rendered on this commit. The second chart (flamegraph chart) shoed the re-rendered components **hierarchically**: that is, the time to render the component itself, and each of its children.

As you could see, a **Dropdown** component took a significant time to re-render. In fact, all the graphes on all the last 10 commits had led me to the same component. By following the hierarchy provided by the flamegraph, it didn't take long to locate the component, which was the dropdown **on the right side** of the first field with slow responsiveness, and implemented as follows:

![The dropdown](dropdown.png)

It looked like a normal dropdown with the exception of a **duplicate calculations**: generating an options array at every render. **Providing different instances at every render** is a common source of performance problem in React, because it signals React that the props have changed and a re-render is required, even the objects between renders are **deep equal**. The solution is straightforward: instead of generating a different instance each time, provide a constant or a class field that only changes when it is modified.

But unfortunately, in this case, after replacing the call to `this.generateDropdown` to a constant, the problem persisted.

## Large Quantity of Options

The source of options of the dropdown came from a network request that was initiated when the page loaded. Another clue that I found during investigation was that when network errors happened, the input became very **responsive**, at which time **the dropdown had no option**. And after several intentional experiments, I found the correspondance between options and performance to be true (no option -> good performance, had options -> bad performace).

I was just a maintainer of the component, not the original authors, so I didn't take notice of the contents of dropdown during my previous investigation. Now, according to the correspondance, I checked out the options of the dropdown, only to find it had over 400 options.

![>400 options](large-number-of-options.png)

Rendering **so many options** at each render would definitely impact performance pretty hard, unless the component had thought of it and selectively re-rendered only the changed part.

This project used [React Wrapper of Semantic-UI](https://react.semantic-ui.com/) which was a famous component library and open source. By diving into the source code, I found that the dropdown did re-render every options every time without any memoing or caching.

https://github.com/Semantic-Org/Semantic-UI-React/blob/master/src/modules/Dropdown/Dropdown.js#L1275

```jsx
// omitted
renderOptions = () => {
  // omitted
  return _.map(options, (opt, i) =>
    DropdownItem.create({
      active: isActive(opt.value),
      onClick: this.handleItemClick,
      selected: selectedIndex === i,
      ...opt,
      key: getKeyOrValue(opt.key, opt.value),
      // Needed for handling click events on disabled items
      style: { ...opt.style, pointerEvents: 'all' },
    }),
  )
}

renderMenu = () => {
  // omitted
  return (
    <DropdownMenu {...ariaOptions} direction={direction} open={open}>
      {DropdownHeader.create(header, { autoGenerateKey: false })}
      {this.renderOptions()}
    </DropdownMenu>
  )
}

render() {
  // omitted
  return (
    // omitted
    {this.renderMenu()}
    // omitted
  )
}
```

# Solution

In this case, the options didn't update anymore after the request had completed. Therefore, there was no need to update and re-render the options every time the component had changed.

To stop the re-render, I extracted the dropdown out into a separate component, passed the options as a prop, and most importantly, made it a `PureComponent` which only re-rendered itself when the props had changed.

The dropdown was used in a **uncontrolled** way -- that is, not managing its `value` by the DOM instead of as a state of React component by not passing value to the `input` DOM field. I had to admit it was not the React way, but here, not passing value to it meant that the component would **never update**, which was exactly what I wanted.

![Optimized code](optimized-code.png)

The optimization worked like a charm: the render time of the whole form for each input had reduced from **~400ms** to **~22ms**, and there was no any unresponsiveness and delay at every key stroke.

![After](after.png)

# Verdict

Form is React is indeed a challenge. Without careful designing and implementation, problems may occur at any time, anywhere.

The issue here was ultimately the re-renders, but not the form I originally thought of, but the dropdown with large number of options. It is important to app performance to **understand React update strategy** and **control the component update** with lifecycle functions, property hook usage, memoing and caching, especially when the the number of component to render is too large.

The **profiler** was the key to finding the component to blame by providing the data of time to re-render for each component. Therefore, when a performance issue is detected, stop wasting guessing which compoenent causes it, and let profiler take you straight to it.
5:["$","article",null,{"children":[["$","div",null,{"className":"bg-neutral px-4 py-8","children":["$","div",null,{"className":"max-w-7xl mx-auto min-h-[256px] flex justify-center text-center text-neutral-content","children":["$","div",null,{"className":"flex flex-col justify-center animate-slide-up","children":[["$","h1",null,{"className":"text-4xl my-2","children":"A React Form Component Performance Optimization with Profiler"}],["$","$L17",null,{"className":"justify-center","articleId":"a-react-form-comp-pref-optimization-with-profiler","info":{"content":"$18","title":"A React Form Component Performance Optimization with Profiler","date":"2019-10-13 11:14","id":"a-react-form-comp-pref-optimization-with-profiler","lang":"en","tags":["problem-investigation","web-frontend","React"],"related":"$undefined","ignored_in_list":"$undefined","hide_heading":"$undefined","no_toc":"$undefined","absolute_path":"$undefined","last_updated":"$undefined","wordCount":1628,"readingTime":8.14,"filePath":"contents/20191012-a-react-form-comp-pref-optimization-with-profiler/en.md","summaries":["The article discusses a performance issue with a form in a React application. The form responded slowly to key strokes, and the component and website became unresponsive when several keys were typed sequentially. The author suspects that the problem might be due to the validation process, the re-render of the whole form at every input, and the complicated form with dozens of fields, multiple validations, dynamic placeholders, and unnecessary duplicate calculations. The issue was identified through profiling, and the problem was traced back to a large quantity of options in the dropdown component. The author resolved the issue by extracting the dropdown into a separate component and making it a ' PureComponent', which only re-rendered itself when the props had changed."]},"langVersions":["en"]}]]}]}]}],["$","div",null,{"className":"animate-slide-up","children":[["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":"$L19"}],["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","$L1a",null,{"relatedArticles":[]}]}],["$","div",null,{"className":"max-w-7xl mx-auto p-4","children":["$","$L1b",null,{"articleId":"a-react-form-comp-pref-optimization-with-profiler","articleTitle":"A React Form Component Performance Optimization with Profiler"}]}]]}]]}]
1d:I[5751,["116","static/chunks/c556396d-dfd2538679eda761.js","405","static/chunks/95e35d7b-290f00d92d8e6653.js","994","static/chunks/c4aeae87-c7e6deaa563962ae.js","786","static/chunks/1b3e99d6-bfba8e6e655fb217.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","812","static/chunks/812-091af8ddb387a519.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-650f0205a429bbcc.js"],""]
1e:I[2400,["116","static/chunks/c556396d-dfd2538679eda761.js","405","static/chunks/95e35d7b-290f00d92d8e6653.js","994","static/chunks/c4aeae87-c7e6deaa563962ae.js","786","static/chunks/1b3e99d6-bfba8e6e655fb217.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","812","static/chunks/812-091af8ddb387a519.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-650f0205a429bbcc.js"],"Gallery"]
34:I[4538,["116","static/chunks/c556396d-dfd2538679eda761.js","405","static/chunks/95e35d7b-290f00d92d8e6653.js","994","static/chunks/c4aeae87-c7e6deaa563962ae.js","786","static/chunks/1b3e99d6-bfba8e6e655fb217.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","812","static/chunks/812-091af8ddb387a519.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-650f0205a429bbcc.js"],"ArticleToc"]
1c:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z1f:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z21:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z22:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z23:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z24:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z26:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z28:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z29:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z2a:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z2e:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z30:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z33:T4df,M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z19:["$","div",null,{"className":"flex flex-row space-x-4","children":[["$","div",null,{"className":"prose max-w-full lg:w-[75%]","children":[["$","div",null,{"className":"p-4 my-4 bg-neutral rounded shadow","children":[["$","h1",null,{"id":"summary","className":"text-neutral-content","children":[["$","a","summary",{"href":"#summary","className":"mr-1 text-neutral-content","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$1c","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],["$","$L10","summaryTitle",{"id":"articlePage.summary.title"}]]}],[["$","p","0",{"className":"text-neutral-content","children":"The article discusses a performance issue with a form in a React application. The form responded slowly to key strokes, and the component and website became unresponsive when several keys were typed sequentially. The author suspects that the problem might be due to the validation process, the re-render of the whole form at every input, and the complicated form with dozens of fields, multiple validations, dynamic placeholders, and unnecessary duplicate calculations. The issue was identified through profiling, and the problem was traced back to a large quantity of options in the dropdown component. The author resolved the issue by extracting the dropdown into a separate component and making it a ' PureComponent', which only re-rendered itself when the props had changed."}]],["$","p",null,{"className":"text-sm justify-end flex text-neutral-content","children":["$","$L10",null,{"id":"articlePage.summary.poweredBy","args":[["$","$L1d","docUrl",{"target":"_blank","className":"text-neutral-content","href":"https://learn.microsoft.com/en-us/azure/ai-services/language-service/summarization/overview?tabs=document-summarization","children":"Azure AI Language Service"}]]}]}]]}],["$","$L1e",null,{"withCaption":true,"id":"a-react-form-comp-pref-optimization-with-profiler","children":[["$","blockquote","blockquote-0",{"children":["\n",["$","p","p-0",{"children":"Note: This code is from an internal project. Measurements apply to protect confidential information, but the problem and methods mentioned in the article are universal and not limited to specific projects."}],"\n"]}],"\n",["$","h1","h1-0",{"id":"the-problem","children":[["$","a","the-problem",{"href":"#the-problem","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$1f","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"The Problem"]}],"\n",["$","p","p-0",{"children":["I was working on a form that had very poor performance. To be specific, at every key stroke, the form responded pretty slowly. What's worse, the component and the whole website became completely unresponsive for ",["$","strong","strong-0",{"children":"seconds"}]," if several keys were stroked sequentially (like input a long number), which was, unfortunately, the normal use case for this field."]}],"\n",["$","p","p-1",{"children":"$L20"}],"\n",["$","h1","h1-1",{"id":"investigation","children":[["$","a","investigation",{"href":"#investigation","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$21","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Investigation"]}],"\n",["$","h2","h2-0",{"id":"validations","children":[["$","a","validations",{"href":"#validations","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$22","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Validations?"]}],"\n",["$","p","p-2",{"children":"From the gif provided above, you may find some details that are worth taking notice of:"}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["The first field had the ",["$","strong","strong-0",{"children":"worse performance"}],","]}],"\n",["$","li","li-1",{"children":"The first field had some kinds of input validation (loading indicator when the first inputs were registered),"}],"\n",["$","li","li-2",{"children":"The field below the first field had better performance than the first one, and it had no validation."}],"\n"]}],"\n",["$","p","p-3",{"children":["Hmm...It looks like ",["$","strong","strong-0",{"children":"the validation"}]," might be the cause."]}],"\n",["$","p","p-4",{"children":"However, the validation process was merely some format check, and a request which would be cancelled if next key stroke had come before it completed. It did increase the delay of input, but should not be so significant."}],"\n",["$","h2","h2-1",{"id":"re-renders-of-the-whole-form","children":[["$","a","re-renders-of-the-whole-form",{"href":"#re-renders-of-the-whole-form","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$23","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Re-renders of the Whole Form?"]}],"\n",["$","h3","h3-0",{"id":"the-challenge-of-forms-in-react","children":[["$","a","the-challenge-of-forms-in-react",{"href":"#the-challenge-of-forms-in-react","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$24","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"The Challenge of Forms in React"]}],"\n",["$","p","p-5",{"children":["The ",["$","strong","strong-0",{"children":"re-render of the whole form at every input"}]," might be the problem as well."]}],"\n",["$","p","p-6",{"children":["React has been known as ",["$","em","em-0",{"children":"not good at implementing forms"}]," because of its famous ",["$","strong","strong-0",{"children":"unidirectional data flow"}],"."]}],"\n",["$","p","p-7",{"children":"$L25"}],"\n",["$","p","p-8",{"children":["Unidirectional data flow simplifies the data flow and fits seeminglessly with the concept of React. However, since ",["$","strong","strong-0",{"children":"each update to the state will trigger the component to re-render"}],", it might impact the performance of the app."]}],"\n",["$","p","p-9",{"children":["Form is one of such cases, because a form consists of multiple input fields, and ",["$","strong","strong-0",{"children":"each input to any one of them"}]," would update the state, and re-render the whole form and every other fields. Therefore, writing forms in React has always a challenge."]}],"\n",["$","h3","h3-1",{"id":"complicated-form","children":[["$","a","complicated-form",{"href":"#complicated-form","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$26","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Complicated Form"]}],"\n",["$","p","p-10",{"children":["Looking at the code, the form was implemented in a very React way: the form contained all the fields, and handled every ",["$","code","code-0",{"children":"onChange"}]," event for each input fields."]}],"\n",["$","p","p-11",{"children":"$L27"}],"\n",["$","p","p-12",{"children":["The form was complicated with dozens of fields, several ",["$","strong","strong-0",{"children":"sync/async and cross-field validations"}],", ",["$","strong","strong-1",{"children":"dynamic placeholders"}]," and some unnecessary ",["$","strong","strong-2",{"children":"duplicate calculations"}]," (which could be improved with constants and cache)."]}],"\n",["$","p","p-13",{"children":["It seemed pretty evident that the ",["$","strong","strong-0",{"children":"re-renders"}]," and ",["$","strong","strong-1",{"children":"the complicated calculations"}]," during the render were the cause to the problem."]}],"\n",["$","h3","h3-2",{"id":"no-easy-solutions","children":[["$","a","no-easy-solutions",{"href":"#no-easy-solutions","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$28","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"No Easy Solutions"]}],"\n",["$","p","p-14",{"children":["Having found the reason, what's left was to find a solution. However, the reason that form implementation is called a ",["$","em","em-0",{"children":"challenge"}]," in React is that it can not be solved easily. There are lots of React form library from the community (like ",["$","a","a-0",{"href":"https://github.com/tannerlinsley/react-form","children":"react-form"}],", ",["$","a","a-1",{"href":"https://github.com/jaredpalmer/formik","children":"formik"}],") trying to solve the form as a whole by providing a complete solution to some common form challenges, including input management, async validations, and submission. They may be viable for many users and should be considered if you are having trouble building a form in your project, but I couldn't adopt them in this project because:"]}],"\n",["$","ul","ul-1",{"children":["\n",["$","li","li-0",{"children":["hiding complexities usually means introducing other complexities\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":["for example, when using the libraries, more problems are introduced, like ",["$","strong","strong-0",{"children":"less flexibilities"}],", ",["$","strong","strong-1",{"children":"less understandable code"}],", ",["$","strong","strong-2",{"children":"interop with UI libraries"}]," and ",["$","strong","strong-3",{"children":"the cost of learning and adopting a new set of APIs"}],"."]}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"children":"The code is involved with several internal concepts and conventions, which I am not familiar enough. As a result, I don't have the confidence to rewrite the logic correctly in a short time;"}],"\n",["$","li","li-2",{"children":"introducing a new library into this project is hard, for it is a internal project that has over 200K lines of TypeScript code, hundreds of authors and users, so the review for this project is strict."}],"\n"]}],"\n",["$","h2","h2-2",{"id":"maybe-not-re-renders","children":[["$","a","maybe-not-re-renders",{"href":"#maybe-not-re-renders","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$29","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Maybe Not Re-renders?"]}],"\n",["$","p","p-15",{"children":["Besides, my experiences told me that it was possibly not the ",["$","strong","strong-0",{"children":"re-renders"}]," that was to blame, since the updates of the form should not be so costly that would result in such a significant delay."]}],"\n",["$","p","p-16",{"children":["I have encountered situations where even ",["$","strong","strong-0",{"children":"a whole page"}]," re-rendered at every interaction, but React and modern JavaScript engines is more than capable to drive it smoothly without even a stutter. This form had several fields to be re-rendered at every input, but when taking the whole page into consideration, the number of re-renders inside this page was negligible."]}],"\n",["$","h2","h2-3",{"id":"profiling-profiling-profiling","children":[["$","a","profiling-profiling-profiling",{"href":"#profiling-profiling-profiling","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$2a","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Profiling, Profiling, Profiling"]}],"\n",["$","p","p-17",{"children":["After wasting days on ",["$","em","em-0",{"children":"brainstorming"}]," the source of problem, I decided to diagnose the issue in a scientific way -- ",["$","strong","strong-0",{"children":"profiling"}],"."]}],"\n",["$","p","p-18",{"children":[["$","a","a-0",{"href":"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi","children":"React's official devtool of Chrome"}]," has a built-in profiling tool. By recoding a sequence of user interactions, profiler can provide performance metrics on each commit during the record, like what components are re-rendered, how many time they take to re-render, with which the developer can locate the components that have biggest impact to the performance, and optimize them accordingly."]}],"\n",["$","p","p-19",{"children":"Start the recoding, repeat the operations of the gif above, and I had the following result:"}],"\n",["$","p","p-20",{"children":["$L2b","\n","$L2c"]}],"\n",["$","p","p-21",{"children":["The first chart (ranked chart) showed the time to re-render for each component that had re-rendered on this commit. The second chart (flamegraph chart) shoed the re-rendered components ",["$","strong","strong-0",{"children":"hierarchically"}],": that is, the time to render the component itself, and each of its children."]}],"\n",["$","p","p-22",{"children":["As you could see, a ",["$","strong","strong-0",{"children":"Dropdown"}]," component took a significant time to re-render. In fact, all the graphes on all the last 10 commits had led me to the same component. By following the hierarchy provided by the flamegraph, it didn't take long to locate the component, which was the dropdown ",["$","strong","strong-1",{"children":"on the right side"}]," of the first field with slow responsiveness, and implemented as follows:"]}],"\n",["$","p","p-23",{"children":"$L2d"}],"\n",["$","p","p-24",{"children":["It looked like a normal dropdown with the exception of a ",["$","strong","strong-0",{"children":"duplicate calculations"}],": generating an options array at every render. ",["$","strong","strong-1",{"children":"Providing different instances at every render"}]," is a common source of performance problem in React, because it signals React that the props have changed and a re-render is required, even the objects between renders are ",["$","strong","strong-2",{"children":"deep equal"}],". The solution is straightforward: instead of generating a different instance each time, provide a constant or a class field that only changes when it is modified."]}],"\n",["$","p","p-25",{"children":["But unfortunately, in this case, after replacing the call to ",["$","code","code-0",{"children":"this.generateDropdown"}]," to a constant, the problem persisted."]}],"\n",["$","h2","h2-4",{"id":"large-quantity-of-options","children":[["$","a","large-quantity-of-options",{"href":"#large-quantity-of-options","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$2e","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Large Quantity of Options"]}],"\n",["$","p","p-26",{"children":["The source of options of the dropdown came from a network request that was initiated when the page loaded. Another clue that I found during investigation was that when network errors happened, the input became very ",["$","strong","strong-0",{"children":"responsive"}],", at which time ",["$","strong","strong-1",{"children":"the dropdown had no option"}],". And after several intentional experiments, I found the correspondance between options and performance to be true (no option -> good performance, had options -> bad performace)."]}],"\n",["$","p","p-27",{"children":"I was just a maintainer of the component, not the original authors, so I didn't take notice of the contents of dropdown during my previous investigation. Now, according to the correspondance, I checked out the options of the dropdown, only to find it had over 400 options."}],"\n",["$","p","p-28",{"children":"$L2f"}],"\n",["$","p","p-29",{"children":["Rendering ",["$","strong","strong-0",{"children":"so many options"}]," at each render would definitely impact performance pretty hard, unless the component had thought of it and selectively re-rendered only the changed part."]}],"\n",["$","p","p-30",{"children":["This project used ",["$","a","a-0",{"href":"https://react.semantic-ui.com/","children":"React Wrapper of Semantic-UI"}]," which was a famous component library and open source. By diving into the source code, I found that the dropdown did re-render every options every time without any memoing or caching."]}],"\n",["$","p","p-31",{"children":["$","a","a-0",{"href":"https://github.com/Semantic-Org/Semantic-UI-React/blob/master/src/modules/Dropdown/Dropdown.js#L1275","children":"https://github.com/Semantic-Org/Semantic-UI-React/blob/master/src/modules/Dropdown/Dropdown.js#L1275"}]}],"\n",["$","figure","figure-0",{"data-rehype-pretty-code-figure":"","children":["$","pre","pre-0",{"style":{"backgroundColor":"#282c34","color":"#abb2bf"},"tabIndex":0,"data-language":"jsx","data-theme":"one-dark-pro","children":["$","code","code-0",{"data-language":"jsx","data-theme":"one-dark-pro","style":{"display":"grid"},"children":[["$","span","span-0",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"// omitted"}]}],"\n",["$","span","span-1",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"renderOptions"}],["$","span","span-1",{"style":{"color":"#56B6C2"},"children":" ="}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":" () "}],["$","span","span-3",{"style":{"color":"#C678DD"},"children":"=>"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-2",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // omitted"}]}],"\n",["$","span","span-3",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"  return"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":" _"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#61AFEF"},"children":"map"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":"options"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":", ("}],["$","span","span-7",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"opt"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-9",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"i"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":") "}],["$","span","span-11",{"style":{"color":"#C678DD"},"children":"=>"}]]}],"\n",["$","span","span-4",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E5C07B"},"children":"    DropdownItem"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-2",{"style":{"color":"#61AFEF"},"children":"create"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"({"}]]}],"\n",["$","span","span-5",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"      active"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":": "}],["$","span","span-2",{"style":{"color":"#61AFEF"},"children":"isActive"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-4",{"style":{"color":"#E5C07B"},"children":"opt"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-6",{"style":{"color":"#E06C75"},"children":"value"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":"),"}]]}],"\n",["$","span","span-6",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"      onClick"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":": "}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"this"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#E06C75"},"children":"handleItemClick"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":","}]]}],"\n",["$","span","span-7",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"      selected"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":": "}],["$","span","span-2",{"style":{"color":"#E06C75"},"children":"selectedIndex"}],["$","span","span-3",{"style":{"color":"#56B6C2"},"children":" ==="}],["$","span","span-4",{"style":{"color":"#E06C75"},"children":" i"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":","}]]}],"\n",["$","span","span-8",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"      ..."}],["$","span","span-1",{"style":{"color":"#E06C75"},"children":"opt"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":","}]]}],"\n",["$","span","span-9",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"      key"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":": "}],["$","span","span-2",{"style":{"color":"#61AFEF"},"children":"getKeyOrValue"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-4",{"style":{"color":"#E5C07B"},"children":"opt"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-6",{"style":{"color":"#E06C75"},"children":"key"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-8",{"style":{"color":"#E5C07B"},"children":"opt"}],["$","span","span-9",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-10",{"style":{"color":"#E06C75"},"children":"value"}],["$","span","span-11",{"style":{"color":"#ABB2BF"},"children":"),"}]]}],"\n",["$","span","span-10",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"      // Needed for handling click events on disabled items"}]}],"\n",["$","span","span-11",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#E06C75"},"children":"      style"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":": { ..."}],["$","span","span-2",{"style":{"color":"#E5C07B"},"children":"opt"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-4",{"style":{"color":"#E06C75"},"children":"style"}],["$","span","span-5",{"style":{"color":"#ABB2BF"},"children":", "}],["$","span","span-6",{"style":{"color":"#E06C75"},"children":"pointerEvents"}],["$","span","span-7",{"style":{"color":"#ABB2BF"},"children":": "}],["$","span","span-8",{"style":{"color":"#98C379"},"children":"'all'"}],["$","span","span-9",{"style":{"color":"#ABB2BF"},"children":" },"}]]}],"\n",["$","span","span-12",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"    }),"}]}],"\n",["$","span","span-13",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"  )"}]}],"\n",["$","span","span-14",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}],"\n",["$","span","span-15",{"data-line":"","children":" "}],"\n",["$","span","span-16",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"renderMenu"}],["$","span","span-1",{"style":{"color":"#56B6C2"},"children":" ="}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":" () "}],["$","span","span-3",{"style":{"color":"#C678DD"},"children":"=>"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":" {"}]]}],"\n",["$","span","span-17",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // omitted"}]}],"\n",["$","span","span-18",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"  return"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" ("}]]}],"\n",["$","span","span-19",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"    <"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"DropdownMenu"}],["$","span","span-2",{"style":{"color":"#C678DD"},"children":" {"}],["$","span","span-3",{"style":{"color":"#ABB2BF"},"children":"..."}],["$","span","span-4",{"style":{"color":"#E06C75"},"children":"ariaOptions"}],["$","span","span-5",{"style":{"color":"#C678DD"},"children":"}"}],["$","span","span-6",{"style":{"color":"#D19A66","fontStyle":"italic"},"children":" direction"}],["$","span","span-7",{"style":{"color":"#56B6C2"},"children":"="}],["$","span","span-8",{"style":{"color":"#C678DD"},"children":"{"}],["$","span","span-9",{"style":{"color":"#E06C75"},"children":"direction"}],["$","span","span-10",{"style":{"color":"#C678DD"},"children":"}"}],["$","span","span-11",{"style":{"color":"#D19A66","fontStyle":"italic"},"children":" open"}],["$","span","span-12",{"style":{"color":"#56B6C2"},"children":"="}],["$","span","span-13",{"style":{"color":"#C678DD"},"children":"{"}],["$","span","span-14",{"style":{"color":"#E06C75"},"children":"open"}],["$","span","span-15",{"style":{"color":"#C678DD"},"children":"}"}],["$","span","span-16",{"style":{"color":"#ABB2BF"},"children":">"}]]}],"\n",["$","span","span-20",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"      {"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"DropdownHeader"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#61AFEF"},"children":"create"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"("}],["$","span","span-5",{"style":{"color":"#E06C75"},"children":"header"}],["$","span","span-6",{"style":{"color":"#ABB2BF"},"children":", { "}],["$","span","span-7",{"style":{"color":"#E06C75"},"children":"autoGenerateKey"}],["$","span","span-8",{"style":{"color":"#ABB2BF"},"children":": "}],["$","span","span-9",{"style":{"color":"#D19A66"},"children":"false"}],["$","span","span-10",{"style":{"color":"#ABB2BF"},"children":" })"}],["$","span","span-11",{"style":{"color":"#C678DD"},"children":"}"}]]}],"\n",["$","span","span-21",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"      {"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"this"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#61AFEF"},"children":"renderOptions"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"()"}],["$","span","span-5",{"style":{"color":"#C678DD"},"children":"}"}]]}],"\n",["$","span","span-22",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"    </"}],["$","span","span-1",{"style":{"color":"#E5C07B"},"children":"DropdownMenu"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":">"}]]}],"\n",["$","span","span-23",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"  )"}]}],"\n",["$","span","span-24",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}],"\n",["$","span","span-25",{"data-line":"","children":" "}],"\n",["$","span","span-26",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#61AFEF"},"children":"render"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":"() {"}]]}],"\n",["$","span","span-27",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"  // omitted"}]}],"\n",["$","span","span-28",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#C678DD"},"children":"  return"}],["$","span","span-1",{"style":{"color":"#ABB2BF"},"children":" ("}]]}],"\n",["$","span","span-29",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"    // omitted"}]}],"\n",["$","span","span-30",{"data-line":"","children":[["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"    {"}],["$","span","span-1",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"this"}],["$","span","span-2",{"style":{"color":"#ABB2BF"},"children":"."}],["$","span","span-3",{"style":{"color":"#E06C75","fontStyle":"italic"},"children":"renderMenu"}],["$","span","span-4",{"style":{"color":"#ABB2BF"},"children":"()}"}]]}],"\n",["$","span","span-31",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#7F848E","fontStyle":"italic"},"children":"    // omitted"}]}],"\n",["$","span","span-32",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"  )"}]}],"\n",["$","span","span-33",{"data-line":"","children":["$","span","span-0",{"style":{"color":"#ABB2BF"},"children":"}"}]}]]}]}]}],"\n",["$","h1","h1-2",{"id":"solution","children":[["$","a","solution",{"href":"#solution","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$30","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Solution"]}],"\n",["$","p","p-32",{"children":"In this case, the options didn't update anymore after the request had completed. Therefore, there was no need to update and re-render the options every time the component had changed."}],"\n",["$","p","p-33",{"children":["To stop the re-render, I extracted the dropdown out into a separate component, passed the options as a prop, and most importantly, made it a ",["$","code","code-0",{"children":"PureComponent"}]," which only re-rendered itself when the props had changed."]}],"\n",["$","p","p-34",{"children":["The dropdown was used in a ",["$","strong","strong-0",{"children":"uncontrolled"}]," way -- that is, not managing its ",["$","code","code-0",{"children":"value"}]," by the DOM instead of as a state of React component by not passing value to the ",["$","code","code-1",{"children":"input"}]," DOM field. I had to admit it was not the React way, but here, not passing value to it meant that the component would ",["$","strong","strong-1",{"children":"never update"}],", which was exactly what I wanted."]}],"\n",["$","p","p-35",{"children":"$L31"}],"\n",["$","p","p-36",{"children":["The optimization worked like a charm: the render time of the whole form for each input had reduced from ",["$","strong","strong-0",{"children":"~400ms"}]," to ",["$","strong","strong-1",{"children":"~22ms"}],", and there was no any unresponsiveness and delay at every key stroke."]}],"\n",["$","p","p-37",{"children":"$L32"}],"\n",["$","h1","h1-3",{"id":"verdict","children":[["$","a","verdict",{"href":"#verdict","className":"mr-1","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"inline-block opacity-20 hover:opacity-60","children":["$undefined",[["$","path","0",{"d":"$33","children":[]}]]],"style":{"color":"$undefined"},"height":16,"width":16,"xmlns":"http://www.w3.org/2000/svg"}]}],"Verdict"]}],"\n",["$","p","p-38",{"children":"Form is React is indeed a challenge. Without careful designing and implementation, problems may occur at any time, anywhere."}],"\n",["$","p","p-39",{"children":["The issue here was ultimately the re-renders, but not the form I originally thought of, but the dropdown with large number of options. It is important to app performance to ",["$","strong","strong-0",{"children":"understand React update strategy"}]," and ",["$","strong","strong-1",{"children":"control the component update"}]," with lifecycle functions, property hook usage, memoing and caching, especially when the the number of component to render is too large."]}],"\n",["$","p","p-40",{"children":["The ",["$","strong","strong-0",{"children":"profiler"}]," was the key to finding the component to blame by providing the data of time to re-render for each component. Therefore, when a performance issue is detected, stop wasting guessing which compoenent causes it, and let profiler take you straight to it."]}]]}]]}],["$","div",null,{"className":"hidden lg:block lg:w-[25%]","children":["$","$L34",null,{"toc":[{"depth":1,"value":"The Problem","id":"the-problem"},{"depth":1,"value":"Investigation","id":"investigation","children":[{"depth":2,"value":"Validations?","id":"validations"},{"depth":2,"value":"Re-renders of the Whole Form?","id":"re-renders-of-the-whole-form","children":[{"depth":3,"value":"The Challenge of Forms in React","id":"the-challenge-of-forms-in-react"},{"depth":3,"value":"Complicated Form","id":"complicated-form"},{"depth":3,"value":"No Easy Solutions","id":"no-easy-solutions"}]},{"depth":2,"value":"Maybe Not Re-renders?","id":"maybe-not-re-renders"},{"depth":2,"value":"Profiling, Profiling, Profiling","id":"profiling-profiling-profiling"},{"depth":2,"value":"Large Quantity of Options","id":"large-quantity-of-options"}]},{"depth":1,"value":"Solution","id":"solution"},{"depth":1,"value":"Verdict","id":"verdict"}],"hasSummary":true}]}]]}]
b:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
9:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"A React Form Component Performance Optimization with Profiler - ddadaal.me"}],["$","meta","2",{"name":"description","content":"ddadaal's personal website"}],["$","link","3",{"rel":"manifest","href":"/site.webmanifest","crossOrigin":"$undefined"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","link","5",{"rel":"icon","href":"/icon.svg?35be8e76be1c3618","type":"image/svg+xml","sizes":"any"}],["$","link","6",{"rel":"apple-touch-icon","href":"/apple-icon.png?5334a64f42000bb0","type":"image/png","sizes":"180x180"}]]
7:null
35:I[7791,["116","static/chunks/c556396d-dfd2538679eda761.js","405","static/chunks/95e35d7b-290f00d92d8e6653.js","994","static/chunks/c4aeae87-c7e6deaa563962ae.js","786","static/chunks/1b3e99d6-bfba8e6e655fb217.js","861","static/chunks/861-659d0f6aa4ad8630.js","688","static/chunks/688-c10a663a947915d2.js","812","static/chunks/812-091af8ddb387a519.js","971","static/chunks/app/articles/%5B%5B...params%5D%5D/page-650f0205a429bbcc.js"],"ArticleImage"]
20:["$","$L35","img-0",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/bad-pref.gif","imageSize":{"height":123,"width":534},"imageProps":{"src":"bad-pref.gif","alt":"bad performance, especially for the first input field"}}]
25:["$","$L35","img-0",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/unidirectiona-data-flow.png","imageSize":{"height":720,"width":960},"imageProps":{"src":"unidirectiona-data-flow.png","alt":"Source: https://gist.github.com/alexmingoia/4db967e5aeb31d84847c. See this page to get yourself familiarized if you haven't already."}}]
27:["$","$L35","img-0",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/fields.png","imageSize":{"height":248,"width":726},"imageProps":{"src":"fields.png","alt":"part of fields"}}]
2b:["$","$L35","img-0",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/profiling.png","imageSize":{"height":141,"width":780},"imageProps":{"src":"profiling.png","alt":"Ranked chart"}}]
2c:["$","$L35","img-1",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/profiling-2.png","imageSize":{"height":228,"width":414},"imageProps":{"src":"profiling-2.png","alt":"Flamegraph chart"}}]
2d:["$","$L35","img-0",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/dropdown.png","imageSize":{"height":174,"width":476},"imageProps":{"src":"dropdown.png","alt":"The dropdown"}}]
2f:["$","$L35","img-0",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/large-number-of-options.png","imageSize":{"height":109,"width":123},"imageProps":{"src":"large-number-of-options.png","alt":">400 options"}}]
31:["$","$L35","img-0",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/optimized-code.png","imageSize":{"height":429,"width":609},"imageProps":{"src":"optimized-code.png","alt":"Optimized code"}}]
32:["$","$L35","img-0",{"src":"/articles/asset/contents/20191012-a-react-form-comp-pref-optimization-with-profiler/after.png","imageSize":{"height":169,"width":748},"imageProps":{"src":"after.png","alt":"After"}}]
